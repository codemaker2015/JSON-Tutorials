self.studioLoader.context.evalInContext("var Il=function(a){return(a=a.exec(jb))?a[1]:\"\"};(function(){if(Pg)return Il(/Firefox\\/([0-9.]+)/);if(D||Tb||Sb)return cc;if(Tg)return Il(/Chrome\\/([0-9.]+)/);if(Ug&&!(Ob()||B(\"iPad\")||B(\"iPod\")))return Il(/Version\\/([0-9.]+)/);if(Qg||Rg){var a=/Version\\/(\\S+).*Mobile\\/(\\S+)/.exec(jb);if(a)return a[1]+\".\"+a[2]}else if(Sg)return(a=Il(/Android\\s+([0-9.]+)/))?a:Il(/Version\\/([0-9.]+)/);return\"\"})();var Jl={},Kl=/OS (\\S+) like/,Ll=/Android (\\S+);/,Ml=function(a,b){null==Jl[b]&&((a=a.exec(jb))?(a=a[1].replace(/_/g,\".\"),Jl[b]=0<=Ha(a,b)):Jl[b]=!1);return Jl[b]};var Nl=function(){I.call(this);this.f=this.h=this.c=!1;this.b=0;this.i=[];this.m=!1};x(Nl,I);var Ol=function(a,b){null==b||a.c||(a.a=b,a.w=!Qg&&!Rg,a.s=Qg||Rg,a.w?a.a.addEventListener(\"click\",v(a.j,a),!1):a.s&&(a.a.addEventListener(\"touchstart\",v(a.K,a),!1),a.a.addEventListener(\"touchmove\",v(a.J,a),!1),a.a.addEventListener(\"touchend\",v(a.B,a),!1)),a.c=!0)},Pl=function(a){null!=a.a&&a.c&&(a.c=!1,a.w?a.a.removeEventListener(\"click\",v(a.j,a),!1):a.s&&(a.a.removeEventListener(\"touchstart\",v(a.K,a),!1),a.a.removeEventListener(\"touchmove\",v(a.J,a),!1),a.a.removeEventListener(\"touchend\",v(a.B,a),!1)))};Nl.prototype.K=function(a){this.h=!0;this.b=a.touches.length;this.m=Ql(this,a.touches)||1!=a.touches.length;Rl(this,a.touches)};Nl.prototype.J=function(a){this.f=!0;this.b=a.touches.length};Nl.prototype.B=function(a){this.h&&1==this.b&&!this.f&&!this.m&&Ql(this,a.changedTouches)&&this.dispatchEvent(new H(\"click\"));this.b=a.touches.length;0==this.b&&(this.f=this.h=!1)};Nl.prototype.j=function(){this.dispatchEvent(new H(\"click\"))};var Rl=function(a,b){a.i=[];z(b,function(a){var b=this.i;a=a.identifier;0<=Ka(b,a)||b.push(a)},a)},Ql=function(a,b){return Ma(b,function(a){return 0<=Ka(this.i,a.identifier)},a)};var Sl=function(a){H.call(this,a)};x(Sl,H);var Tl=function(){I.call(this)};x(Tl,I);var Ul=function(){I.call(this);this.f=new C;this.i=new Nl;this.j=\"none\"};x(Ul,I);var Xl=function(a){this.width=Vl(a).width;this.height=Vl(a).height;this.c=!1;this.b=a.a.muted;this.a=Wl(a);this.volume=a.a.volume};Xl.prototype.muted=function(a,b){return!this.b&&a||0<this.volume&&0==b};Ul.prototype.l=function(){Yl(this);Ul.o.l.call(this)};var Yl=function(a){null!=a.b&&a.b.dispose();null!=a.h&&a.h.dispose();null!=a.a&&Zl(a.a);Hb(a.f);Pl(a.i)},Y=function(a,b,c){c&&null!=a.f.get(b)||(a.f.set(b,!0),a.dispatchEvent(new Sl(b)))},$l=function(a,b){null!=a.f.get(b)&&Ib(a.f,b)};g=Ul.prototype;g.xd=function(){var a;a:{var b=this.a;if(b.a.seeking&&!b.h)b.h=!0,b.i=am(b);else{if(!b.a.seeking&&b.h){b.h=!1;a=0!=b.a.currentTime&&b.a.currentTime<b.i;b.i=-1;break a}if(!b.a.seeking&&0!=b.a.currentTime&&am(b)>b.a.currentTime){a=.5<am(b)-b.a.currentTime;break a}}a=!1}b=bm(this.a);if(a&&(Y(this,\"rewind\",!1),-1!=b)){cm(this.a,.75*b)||$l(this,\"thirdquartile\");cm(this.a,.5*b)||$l(this,\"midpoint\");cm(this.a,.25*b)||$l(this,\"firstquartile\");a:{a=this.a;for(var c=a.c.G(),d=c.length-1;0<=d;d--)if(.5>c[d]){c=a.c;c=0==c.R()?null:c.get(c.R()-1);d=a.c;d.a.length=0;d.b=0;.5<=c&&a.c.add(c);a=!0;break a}a=!1}a&&Y(this,\"replay\",!1)}-1!=b&&(cm(this.a,.25*b)&&Y(this,\"firstquartile\",!0),cm(this.a,.5*b)&&Y(this,\"midpoint\",!0),cm(this.a,.75*b)&&Y(this,\"thirdquartile\",!0))};g.wd=function(){Y(this,\"creativeview\",!0);null!=this.m?(this.b.u(this.i,\"click\",this.rd,!1),Ol(this.i,this.m)):this.b.u(this.a,\"click\",this.Zd);Y(this,\"start\",!0);(this.a.a.muted||0==this.a.a.volume)&&Y(this,\"mute\",!1)};g.yd=function(){var a=this.a.a.muted,b=this.a.a.volume,c=this.c;c.b&&!a||!a&&0==c.volume&&0<b?Y(this,\"unmute\",!1):this.c.muted(a,b)&&Y(this,\"mute\",!1);this.c.b=a;this.c.volume=b};g.vd=function(){if(this.a.a.ended)Y(this,\"complete\",!0);else{var a;if(a=\"pausedAtBeginning\"==this.j)a=this.a,a=!isNaN(a.a.duration)&&0<a.a.duration&&0==a.a.currentTime;a?Y(this,\"stop\",!0):dm(this.a)&&!this.a.a.seeking&&(this.c.c=!0,Y(this,\"pause\",!1))}};g.Yd=function(){this.c.c&&(this.c.c=!1,Y(this,\"resume\",!1))};g.sd=function(){var a;a=this.a;if(!Sg||Sg&&Ml(Ll,2.3))a=!0;else{var b=a.a.duration-am(a);a=0==a.a.currentTime&&1.5>=b}a?\"pausedAtEnd\"==this.j&&dm(this.a)?Y(this,\"stop\",!0):Y(this,\"complete\",!0):this.a.a.pause()};g.rd=function(){Y(this,\"click\",!1)};g.ud=function(){Y(this,\"error\",!1)};g.Zd=function(){Y(this,\"click\",!1)};g.Xb=function(){this.c.a=!0;Y(this,\"fullscreen\",!1)};g.Wb=function(){this.c.a=!1};g.Xd=function(){var a=Vl(this.a),b=Wl(this.a),c=this.c;if(a.width!=c.width||a.height!=c.height)!this.c.a&&b?this.Xb():this.c.a&&!b&&this.Wb(),this.c.width=a.width,this.c.height=a.height};var em=function(a){this.b=0;this.c=a||100;this.a=[]};g=em.prototype;g.add=function(a){var b=this.a[this.b];this.a[this.b]=a;this.b=(this.b+1)%this.c;return b};g.get=function(a){a=fm(this,a);return this.a[a]};g.set=function(a,b){a=fm(this,a);this.a[a]=b};g.R=function(){return this.a.length};g.G=function(){for(var a=this.R(),b=this.R(),c=[],a=this.R()-a;a<b;a++)c.push(this.get(a));return c};g.L=function(){for(var a=[],b=this.R(),c=0;c<b;c++)a[c]=c;return a};g.N=function(a){return a<this.R()};g.xa=function(a){for(var b=this.R(),c=0;c<b;c++)if(this.get(c)==a)return!0;return!1};var fm=function(a,b){if(b>=a.a.length)throw Error(\"Out of bounds exception\");return a.a.length<a.c?b:(a.b+Number(b))%a.c};var gm=function(a){I.call(this);this.a=a;this.c=new em(4);this.i=-1;this.j=this.h=!1};x(gm,Tl);var bm=function(a){return isNaN(a.a.duration)?-1:a.a.duration},dm=function(a){return a.a.paused?Qg||Rg||Tg?a.a.currentTime<a.a.duration:!0:!1},Wl=function(a){return Qg?a.a.webkitSupportsFullscreen&&a.a.webkitDisplayingFullscreen:a.a.offsetWidth>=document.body.offsetWidth&&a.a.offsetHeight>=document.body.offsetHeight},cm=function(a,b){return am(a)>=b},am=function(a){for(a=a.c.G();a.length;){var b=a.pop();if(0<b)return b}return-1},Vl=function(a){return new gc(a.a.offsetWidth,a.a.offsetHeight)};gm.prototype.l=function(){gm.o.l.call(this);Zl(this)};var Zl=function(a){null!=a.f&&(Pl(a.f),a.f=null);null!=a.b&&(a.b.dispose(),a.b=null);a.i=-1;a.j=!1;a.h=!1;a=a.c;a.a.length=0;a.b=0},hm=function(a){a.j||(a.j=!0,a.dispatchEvent(\"start\"),!Sg&&(!Qg||(Qg||Rg)&&Ml(Kl,4))||a.Yb())};g=gm.prototype;g.Wd=function(){Ug&&(this.a.currentTime=.001)};g.cc=function(){this.dispatchEvent(\"play\");Qg||Rg||hm(this)};g.Ed=function(){this.j||((Qg||Rg)&&0<this.a.currentTime&&hm(this),Wb&&this.cc());this.c.add(this.a.currentTime);this.dispatchEvent(\"timeUpdate\")};g.Fd=function(){this.dispatchEvent(\"volumeChange\")};g.Dd=function(){this.dispatchEvent(\"pause\")};g.Ad=function(){this.dispatchEvent(\"end\")};g.Yb=function(){this.dispatchEvent(\"beginFullscreen\")};g.Cd=function(){this.dispatchEvent(\"endFullscreen\")};g.Bd=function(){this.dispatchEvent(\"error\")};g.zd=function(){this.dispatchEvent(\"click\")};var im={},jm=function(a){this.i=a;this.f=this.g=!0;this.c=new Ul;this.c.j=\"pausedAtBeginning\";this.v=this.a=this.b=null;Yh(v(this.w,this))},km=new C;jm.prototype.m=!1;jm.prototype.j=!1;jm.prototype.h=!0;var lm=function(a){var b=km.get(a);null==b&&(b=new jm(a),km.set(a,b));return b};jm.prototype.w=function(a){this.a=a;mm(this)};var mm=function(a){nm(a,!1);nm(a,!0);if(null!=a.a&&null!=a.v){var b=a.c,c=a.b;Yl(b);b.a=c;c=b.a;Zl(c);c.b=new L(c);c.b.u(c.a,\"canplay\",c.Wd);c.b.u(c.a,\"ended\",c.Ad);c.b.u(c.a,\"webkitbeginfullscreen\",c.Yb);c.b.u(c.a,\"webkitendfullscreen\",c.Cd);c.b.u(c.a,\"pause\",c.Dd);c.b.u(c.a,\"playing\",c.cc);c.b.u(c.a,\"timeupdate\",c.Ed);c.b.u(c.a,\"volumechange\",c.Fd);c.b.u(c.a,\"error\",c.Bd);c.f=new Nl;c.b.u(c.f,\"click\",c.zd,!1);Ol(c.f,c.a);b.c=new Xl(b.a);b.m=null;b.b=new L(b);b.b.u(b.a,\"timeUpdate\",b.xd,!1);b.b.u(b.a,\"volumeChange\",b.yd,!1);b.b.u(b.a,\"pause\",b.vd,!1);b.b.u(b.a,\"play\",b.Yd,!1);b.b.u(b.a,\"end\",b.sd,!1);b.b.u(b.a,\"beginFullscreen\",b.Xb,!1);b.b.u(b.a,\"endFullscreen\",b.Wb,!1);b.b.u(b.a,\"start\",b.wd,!1);b.b.u(b.a,\"error\",b.ud,!1);b.h=new he(1E3);jf(b.b,b.h,\"tick\",b.Xd,!1,b);b.h.start();a.b.u(\"timeUpdate\",a.wc,!1,a);a.v.paused?a.c.u(\"start\",a.Oa,!1,a):a.Oa()}},nm=function(a,b){om(a,b,\"resume\",a.Oa);om(a,b,\"replay\",a.de);om(a,b,\"pause\",a.ae);om(a,b,\"stop\",a.pe);om(a,b,\"mute\",a.Vd);om(a,b,\"unmute\",a.xe);om(a,b,\"firstquartile\",a.Qc);om(a,b,\"midpoint\",a.Td);om(a,b,\"thirdquartile\",a.ve);om(a,b,\"complete\",a.Hc)},om=function(a,b,c,d){(b?a.c.u:a.c.$).call(a.c,c,d,!1,a)};g=jm.prototype;g.Oa=function(){this.c.$(\"start\",this.Oa,!1,this);pm(this,\"play\",!this.h);qm(this,\"Start\");this.h=!1;null!=this.a&&this.f&&!this.m&&(this.a.m(),this.m=!0)};g.de=function(){pm(this,\"replay\",!0);qm(this,\"Stop\");this.g=!1};g.ae=function(){pm(this,\"pause\",!0);qm(this,\"Stop\")};g.pe=function(){pm(this,\"stop\",!0);qm(this,\"Stop\");this.g=!1};g.Vd=function(){pm(this,\"mute\",!this.h)};g.xe=function(){pm(this,\"unmute\",!this.h)};g.Qc=function(){pm(this,\"firstquartile\")};g.Td=function(){pm(this,\"midpoint\")};g.ve=function(){pm(this,\"thirdquartile\")};g.Hc=function(){pm(this,\"complete\");qm(this,\"Stop\");this.g=!1;null!=this.a&&this.f&&!this.j&&(this.a.m(),this.j=!0)};g.wc=function(a){this.a.A.C(\"updateVideoProgress\",[\"EVENT_VIDEO_\"+a.type.toUpperCase(),bm(this.b),this.b.a.currentTime])};var pm=function(a,b,c){null!=a.a&&a.f&&(c&&Bg(a.a.b,\"Count\",a.i,\"EVENT_VIDEO_INTERACTION\"),Bg(a.a.b,\"Count\",a.i,\"EVENT_VIDEO_\"+b.toUpperCase()))},qm=function(a,b){null!=a.a&&a.f&&a.g&&Bg(a.a.b,b,a.i,\"EVENT_VIDEO_VIEW_TIMER\")};var rm=function(a){G.call(this);this.c=a;this.a={};this.b=null;Yh(v(this.g,this))};x(rm,G);m(\"studio.video.Reporter\",rm,void 0);var sm=new C,tm=function(a,b,c){var d=lm(a);\"boolean\"==typeof c&&(d.h=c);Yl(d.c);d.g=!0;d.f=!0;d.v=b;d.b=new gm(d.v);mm(d);sm.N(a)||sm.set(a,new rm(b))};rm.attach=tm;rm.prototype.g=function(a){this.b=a;this.b.Ab(this.c)};rm.prototype.l=function(){for(var a in this.a)this.c[a]=this.a[a];rm.o.l.call(this)};var um=function(a){a=lm(a);null==a.b||dm(a.b)||a.b.a.ended||(pm(a,\"stop\",!1),qm(a,\"Stop\"),a.g=!1);nm(a,!1);a.f=!1;a.v=null;Yl(a.c);a.b&&(a.b.$(\"timeUpdate\",a.wc,!1,a),a.b.dispose())};rm.detach=um;var vm=function(){};var wm,xm=function(){};x(xm,vm);var ym=function(a){var b;a:{if(!a.a&&\"undefined\"==typeof XMLHttpRequest&&\"undefined\"!=typeof ActiveXObject){for(var c=[\"MSXML2.XMLHTTP.6.0\",\"MSXML2.XMLHTTP.3.0\",\"MSXML2.XMLHTTP\",\"Microsoft.XMLHTTP\"],d=0;d<c.length;d++){var e=c[d];try{new ActiveXObject(e);b=a.a=e;break a}catch(f){}}throw Error(\"Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed\");}b=a.a}return b?new ActiveXObject(b):new XMLHttpRequest};wm=new xm;var Am=function(a,b){b=b?fb(b):{};b.responseType=\"blob\";return zm(\"GET\",a,b).then(function(a){return a.response})},zm=function(a,b,c){return new Oc(function(d,e){var f=c||{},k,p=f.Be?ym(f.Be):ym(wm);try{p.open(a,b,!0)}catch(Vb){e(new Bm(\"Error opening XHR: \"+Vb.message,b))}p.onreadystatechange=function(){if(4==p.readyState){h.clearTimeout(k);var a;a:switch(p.status){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:a=!0;break a;default:a=!1}!a&&(a=0===p.status)&&(a=b.match(Pe)[1]||null,!a&&h.self&&h.self.location&&(a=h.self.location.protocol,a=a.substr(0,a.length-1)),a=a?a.toLowerCase():\"\",a=!(\"http\"==a||\"https\"==a||\"\"==a));a?d(p):e(new Cm(p.status,b))}};p.onerror=function(){e(new Bm(\"Network error\",b))};var K;if(f.headers){for(var fa in f.headers)K=f.headers[fa],null!=K&&p.setRequestHeader(fa,K);K=f.headers[\"Content-Type\"]}fa=h.FormData&&!1;\"POST\"!=a||void 0!==K||fa||p.setRequestHeader(\"Content-Type\",\"application/x-www-form-urlencoded;charset=utf-8\");f.withCredentials&&(p.withCredentials=f.withCredentials);f.responseType&&(p.responseType=f.responseType);f.Ud&&p.overrideMimeType(f.Ud);0<f.we&&(k=h.setTimeout(function(){p.onreadystatechange=ba;p.abort();e(new Dm(b))},f.we));try{p.send(null)}catch(Vb){p.onreadystatechange=ba,h.clearTimeout(k),e(new Bm(\"Error sending XHR: \"+Vb.message,b))}})},Bm=function(a,b){y.call(this,a+\", url=\"+b);this.url=b};x(Bm,y);Bm.prototype.name=\"XhrError\";var Cm=function(a,b){Bm.call(this,\"Request Failed, status=\"+a,b);this.status=a};x(Cm,Bm);Cm.prototype.name=\"XhrHttpError\";var Dm=function(a){Bm.call(this,\"Request timed out\",a)};x(Dm,Bm);Dm.prototype.name=\"XhrTimeoutError\";m(\"studio.sdk.video.VideoResource.getBlobForUrl\",function(a){return Zh().then(function(b){b=b.ya(a);return\"file:\"==window.location.protocol?Sc(Error(\"You cannot fetch the blob of a video when running locally. Run a local web server to test this creative (For example, python -m SimpleHTTPServer).\")):Ca(b,\"/itag/\")?Em(Fm(b)).then(Am):Am(b)})},void 0);var Em=function(a){return zm(\"HEAD\",a).then(function(b){return Gm(b)?zm(\"GET\",a).then(function(a){return Em(a.response)}):a})},Fm=function(a){return Ca(a,\"/itag/\")&&!Ca(a,\"/alr/yes/\")?(a=a.split(\"/\"),a.splice(a.length-2,0,\"alr\",\"yes\"),a.join(\"/\")):a},Gm=function(a){a=a.getResponseHeader(\"Content-Type\");return Ca(a,\"text/plain\")};");
