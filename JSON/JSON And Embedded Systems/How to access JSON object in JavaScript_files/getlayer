function cbolaGetUrlVars(e){if("undefined"==typeof e)return{};var t={};e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,n,i){t[n]=i});return t}function cbolaXdrCall(){if(cbolaApprBrowser=!1,Cbola.Env.activePid=cbolaGetUrlVars(window.location.href.toLowerCase()).cbolapid,!Cbola.Env.activePid){var e=document.getElementById("carambola_proxy").getAttribute("src");Cbola.Env.activePid=cbolaGetUrlVars(e).pid}var t=new Date,n=(t.getDate()<=9?"0"+t.getDate():t.getDate())+""+(t.getMonth()+1<=9?"0"+(t.getMonth()+1):t.getMonth()+1)+t.getFullYear()%100+(t.getHours()<=9?"0"+t.getHours():t.getHours())+(t.getMinutes()<=9?"0"+t.getMinutes():t.getMinutes())+(t.getSeconds()<=9?"0"+t.getSeconds():t.getSeconds())+(t.getMilliseconds()%100<=9?"0"+t.getMilliseconds()%100:t.getMilliseconds()%100)+Math.floor(9e4*Math.random()+1e4),i="PageViewId="+n+"&PublisherId="+Cbola.Env.activePid+"&QueryString="+document.domain,o="//analytics.carambo.la/SetPageRequestString?"+i;if(XMLHttpRequest){var r=new XMLHttpRequest;if("withCredentials"in r)r.open("GET",o,!0),r.onreadystatechange=handler,r.send();else if(XDomainRequest){var a=new XDomainRequest;a.open("get",o),a.responseType="text",a.onerror=function(){},a.onload=function(){},a.onprogress=function(){},a.ontimeout=function(){},setTimeout(function(){a.send()},0)}}}function cbola_setZepto(){var e=function(){function e(e){return null==e?String(e):j[q.call(e)]||"object"}function t(t){return"function"==e(t)}function n(e){return null!=e&&e==e.window}function i(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function o(t){return"object"==e(t)}function r(e){return o(e)&&!n(e)&&Object.getPrototypeOf(e)==Object.prototype}function a(e){return"number"==typeof e.length}function s(e){return S.call(e,function(e){return null!=e})}function l(e){return e.length>0?$cbola.fn.concat.apply([],e):e}function c(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$cbola1_$cbola2").replace(/([a-z\d])([A-Z])/g,"$cbola1_$cbola2").replace(/_/g,"-").toLowerCase()}function d(e,t){return"number"!=typeof t||P[c(e)]?t:t+"px"}function u(e){var t,n;return L[e]||(t=A.createElement(e),A.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),L[e]=n),L[e]}function p(e){return"children"in e?x.call(e.children):$cbola.map(e.childNodes,function(e){return 1==e.nodeType?e:void 0})}function h(e,t,n){for(w in t)n&&(r(t[w])||Y(t[w]))?(r(t[w])&&!r(e[w])&&(e[w]={}),Y(t[w])&&!Y(e[w])&&(e[w]=[]),h(e[w],t[w],n)):t[w]!==C&&(e[w]=t[w])}function m(e,t){return null==t?$cbola(e):$cbola(e).filter(t)}function g(e,n,i,o){return t(n)?n.call(e,i,o):n}function f(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function b(e,t){var n=e.className||"",i=n&&n.baseVal!==C;return t===C?i?n.baseVal:n:void(i?n.baseVal=t:e.className=t)}function y(e){try{return e?"true"==e||("false"==e?!1:"null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?$cbola.parseJSON(e):e):e}catch(t){return e}}function v(e,t){t(e);for(var n=0,i=e.childNodes.length;i>n;n++)v(e.childNodes[n],t)}var C,w,I,_,E,T=[],x=T.slice,S=T.filter,A=window.document,L={},P={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,O=/^<(\w+)\s*\/?>(?:<\/\1>|)$cbola/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,B=/^(?:body|html)$cbola/i,N=/([A-Z])/g,M=["val","css","html","text","data","width","height","offset"],D=["after","prepend","before","append"],F=A.createElement("table"),W=A.createElement("tr"),H={tr:A.createElement("tbody"),tbody:F,thead:F,tfoot:F,td:W,th:W,"*":A.createElement("div")},U=/complete|loaded|interactive/,V=/^[\w-]*$cbola/,j={},q=j.toString,G={},z=A.createElement("div"),$={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Y=Array.isArray||function(e){return e instanceof Array};return G.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var i,o=e.parentNode,r=!o;return r&&(o=z).appendChild(e),i=~G.qsa(o,t).indexOf(e),r&&z.removeChild(e),i},_=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},E=function(e){return S.call(e,function(t,n){return e.indexOf(t)==n})},G.fragment=function(e,t,n){var i,o,a;return O.test(e)&&(i=$cbola(A.createElement(RegExp.$cbola1))),i||(e.replace&&(e=e.replace(R,"<$cbola1></$cbola2>")),t===C&&(t=k.test(e)&&RegExp.$cbola1),t in H||(t="*"),a=H[t],a.innerHTML=""+e,i=$cbola.each(x.call(a.childNodes),function(){a.removeChild(this)})),r(n)&&(o=$cbola(i),$cbola.each(n,function(e,t){M.indexOf(e)>-1?o[e](t):o.attr(e,t)})),i},G.Z=function(e,t){return e=e||[],e.__proto__=$cbola.fn,e.selector=t||"",e},G.isZ=function(e){return e instanceof G.Z},G.init=function(e,n){var i;if(!e)return G.Z();if("string"==typeof e)if(e=e.trim(),"<"==e[0]&&k.test(e))i=G.fragment(e,RegExp.$cbola1,n),e=null;else{if(n!==C)return $cbola(n).find(e);i=G.qsa(A,e)}else{if(t(e))return $cbola(A).ready(e);if(G.isZ(e))return e;if(Y(e))i=s(e);else if(o(e))i=[e],e=null;else if(k.test(e))i=G.fragment(e.trim(),RegExp.$cbola1,n),e=null;else{if(n!==C)return $cbola(n).find(e);i=G.qsa(A,e)}}return G.Z(i,e)},$cbola=function(e,t){return G.init(e,t)},$cbola.extend=function(e){var t,n=x.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach(function(n){h(e,n,t)}),e},G.qsa=function(e,t){var n,o="#"==t[0],r=!o&&"."==t[0],a=o||r?t.slice(1):t,s=V.test(a);return i(e)&&s&&o?(n=e.getElementById(a))?[n]:[]:1!==e.nodeType&&9!==e.nodeType?[]:x.call(s&&!o?r?e.getElementsByClassName(a):e.getElementsByTagName(t):e.querySelectorAll(t))},$cbola.contains=A.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},$cbola.type=e,$cbola.isFunction=t,$cbola.isWindow=n,$cbola.isArray=Y,$cbola.isPlainObject=r,$cbola.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},$cbola.inArray=function(e,t,n){try{return T.indexOf.call(t,e,n)}catch(i){return-1}},$cbola.camelCase=_,$cbola.trim=function(e){return null==e?"":String.prototype.trim.call(e)},$cbola.uuid=0,$cbola.support={},$cbola.expr={},$cbola.map=function(e,t){var n,i,o,r=[];if(a(e))for(i=0;i<e.length;i++)n=t(e[i],i),null!=n&&r.push(n);else for(o in e)n=t(e[o],o),null!=n&&r.push(n);return l(r)},$cbola.each=function(e,t){var n,i;if(a(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(i in e)if(t.call(e[i],i,e[i])===!1)return e;return e},$cbola.grep=function(e,t){return S.call(e,t)},window.JSON&&($cbola.parseJSON=JSON.parse),$cbola.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){j["[object "+t+"]"]=t.toLowerCase()}),$cbola.fn={forEach:T.forEach,reduce:T.reduce,push:T.push,sort:T.sort,indexOf:T.indexOf,concat:T.concat,map:function(e){return $cbola($cbola.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return $cbola(x.apply(this,arguments))},ready:function(e){return U.test(A.readyState)&&A.body?e($cbola):A.addEventListener("DOMContentLoaded",function(){e($cbola)},!1),this},get:function(e){return e===C?x.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(e){try{return T.every.call(this,function(t,n){return e.call(t,n,t)!==!1}),this}catch(t){Cbola.Logger.getInstance().errorM("Zepto.each",'failed: "each" function of zepto. url: '+Cbola.Env.PageProperties.hostname)}},filter:function(e){return t(e)?this.not(this.not(e)):$cbola(S.call(this,function(t){return G.matches(t,e)}))},add:function(e,t){return $cbola(E(this.concat($cbola(e,t))))},is:function(e){return this.length>0&&G.matches(this[0],e)},not:function(e){var n=[];if(t(e)&&e.call!==C)this.each(function(t){e.call(this,t)||n.push(this)});else{var i="string"==typeof e?this.filter(e):a(e)&&t(e.item)?x.call(e):$cbola(e);this.forEach(function(e){i.indexOf(e)<0&&n.push(e)})}return $cbola(n)},has:function(e){return this.filter(function(){return o(e)?$cbola.contains(this,e):$cbola(this).find(e).size()})},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!o(e)?e:$cbola(e)},last:function(){var e=this[this.length-1];return e&&!o(e)?e:$cbola(e)},find:function(e){var t,n=this;return t=e?"object"==typeof e?$cbola(e).filter(function(){var e=this;return T.some.call(n,function(t){return $cbola.contains(t,e)})}):1==this.length?$cbola(G.qsa(this[0],e)):this.map(function(){return G.qsa(this,e)}):$cbola()},closest:function(e,t){var n=this[0],o=!1;for("object"==typeof e&&(o=$cbola(e));n&&!(o?o.indexOf(n)>=0:G.matches(n,e));)n=n!==t&&!i(n)&&n.parentNode;return $cbola(n)},parents:function(e){for(var t=[],n=this;n.length>0;)n=$cbola.map(n,function(e){return(e=e.parentNode)&&!i(e)&&t.indexOf(e)<0?(t.push(e),e):void 0});return m(t,e)},parent:function(e){return m(E(this.pluck("parentNode")),e)},children:function(e){return m(this.map(function(){return p(this)}),e)},contents:function(){return this.map(function(){return x.call(this.childNodes)})},siblings:function(e){return m(this.map(function(e,t){return S.call(p(t.parentNode),function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return $cbola.map(this,function(t){return t[e]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=u(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=t(e);if(this[0]&&!n)var i=$cbola(e).get(0),o=i.parentNode||this.length>1;return this.each(function(t){$cbola(this).wrapAll(n?e.call(this,t):o?i.cloneNode(!0):i)})},wrapAll:function(e){if(this[0]){$cbola(this[0]).before(e=$cbola(e));for(var t;(t=e.children()).length;)e=t.first();$cbola(e).append(this)}return this},wrapInner:function(e){var n=t(e);return this.each(function(t){var i=$cbola(this),o=i.contents(),r=n?e.call(this,t):e;o.length?o.wrapAll(r):i.append(r)})},unwrap:function(){return this.parent().each(function(){$cbola(this).replaceWith($cbola(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(e){return this.each(function(){var t=$cbola(this);(e===C?"none"==t.css("display"):e)?t.show():t.hide()})},prev:function(e){return $cbola(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return $cbola(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each(function(t){var n=this.innerHTML;$cbola(this).empty().append(g(this,e,t,n))}):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each(function(t){var n=g(this,e,t,this.textContent);this.textContent=null==n?"":""+n}):0 in this?this[0].textContent:null},attr:function(e,t){var n;return"string"!=typeof e||1 in arguments?this.each(function(n){if(1===this.nodeType)if(o(e))for(w in e)f(this,w,e[w]);else f(this,e,g(this,t,n,this.getAttribute(e)))}):this.length&&1===this[0].nodeType?!(n=this[0].getAttribute(e))&&e in this[0]?this[0][e]:n:C},removeAttr:function(e){return this.each(function(){1===this.nodeType&&e.split(" ").forEach(function(e){f(this,e)},this)})},prop:function(e,t){return e=$[e]||e,1 in arguments?this.each(function(n){this[e]=g(this,t,n,this[e])}):this[0]&&this[0][e]},data:function(e,t){var n="data-"+e.replace(N,function(e){return"-"+e}).toLowerCase(),i=1 in arguments?this.attr(n,t):this.attr(n);return null!==i?y(i):C},val:function(e){return 0 in arguments?this.each(function(t){this.value=g(this,e,t,this.value)}):this[0]&&(this[0].multiple?$cbola(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each(function(t){var n=$cbola(this),i=g(this,e,t,n.offset()),o=n.offsetParent().offset(),r={top:i.top-o.top,left:i.left-o.left};"static"==n.css("position")&&(r.position="relative"),n.css(r)});if(!this.length)return null;var t=this[0].getBoundingClientRect();return{left:t.left+window.pageXOffset,top:t.top+window.pageYOffset,width:Math.round(t.width),height:Math.round(t.height)}},css:function(t,n){if(arguments.length<2){var i,o=this[0];if(!o)return;if(i=getComputedStyle(o,""),"string"==typeof t)return o.style[_(t)]||i.getPropertyValue(t);if(Y(t)){var r={};return $cbola.each(t,function(e,t){r[t]=o.style[_(t)]||i.getPropertyValue(t)}),r}}var a="";if("string"==e(t))n||0===n?a=c(t)+":"+d(t,n):this.each(function(){this.style.removeProperty(c(t))});else for(w in t)t[w]||0===t[w]?a+=c(w)+":"+d(w,t[w])+";":this.each(function(){this.style.removeProperty(c(w))});return this.each(function(){this.style.cssText+=";"+a})},index:function(e){return e?this.indexOf($cbola(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return"undefined"==typeof this[0]?!1:new RegExp("(\\s|^)"+e+"(\\s|$)").test(this[0].className)},addClass:function(e){return e?this.each(function(t){if("className"in this){I=[];var n=b(this),i=g(this,e,t,n);i.split(/\s+/g).forEach(function(e){$cbola(this).hasClass(e)||I.push(e)},this),I.length&&b(this,n+(n?" ":"")+I.join(" "))}}):this},removeClass:function(e){if($cbola(this).hasClass(e)){var t=new RegExp("(\\s|^)"+e+"(\\s|$)");this[0].className=this[0].className.replace(t," ")}},toggleClass:function(e,t){return e?this.each(function(n){var i=$cbola(this),o=g(this,e,n,b(this));o.split(/\s+/g).forEach(function(e){(t===C?!i.hasClass(e):t)?i.addClass(e):i.removeClass(e)})}):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return e===C?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return e===C?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],t=this.offsetParent(),n=this.offset(),i=B.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat($cbola(e).css("margin-top"))||0,n.left-=parseFloat($cbola(e).css("margin-left"))||0,i.top+=parseFloat($cbola(t[0]).css("border-top-width"))||0,i.left+=parseFloat($cbola(t[0]).css("border-left-width"))||0,{top:n.top-i.top,left:n.left-i.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||A.body;e&&!B.test(e.nodeName)&&"static"==$cbola(e).css("position");)e=e.offsetParent;return e})}},$cbola.fn.detach=$cbola.fn.remove,["width","height"].forEach(function(e){var t=e.replace(/./,function(e){return e[0].toUpperCase()});$cbola.fn[e]=function(o){var r,a=this[0];return o===C?n(a)?a["inner"+t]:i(a)?a.documentElement["scroll"+t]:(r=this.offset())&&r[e]:this.each(function(t){a=$cbola(this),a.css(e,g(this,o,t,a[e]()))})}}),D.forEach(function(t,n){var i=n%2;$cbola.fn[t]=function(){var t,o,r=$cbola.map(arguments,function(n){return t=e(n),"object"==t||"array"==t||null==n?n:G.fragment(n)}),a=this.length>1;return r.length<1?this:this.each(function(e,t){o=i?t:t.parentNode,t=0==n?t.nextSibling:1==n?t.firstChild:2==n?t:null;var s=$cbola.contains(A.documentElement,o);r.forEach(function(e){if(a)e=e.cloneNode(!0);else if(!o)return $cbola(e).remove();o.insertBefore(e,t),s&&v(e,function(e){null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src||window.eval.call(window,e.innerHTML)})})})},$cbola.fn[i?t+"To":"insert"+(n?"Before":"After")]=function(e){return $cbola(e)[t](this),this}}),G.Z.prototype=$cbola.fn,G.uniq=E,G.deserializeValue=y,$cbola.zepto=G,$cbola}();window.cbolaZepto=e,void 0===window.$cbola&&(window.$cbola=e),function(e){function t(e){return e._zid||(e._zid=p++)}function n(e,n,r,a){if(n=i(n),n.ns)var s=o(n.ns);return(f[t(e)]||[]).filter(function(e){return e&&(!n.e||e.e==n.e)&&(!n.ns||s.test(e.ns))&&(!r||t(e.fn)===t(r))&&(!a||e.sel==a)})}function i(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function o(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$cbola)")}function r(e,t){return e.del&&!y&&e.e in v||!!t}function a(e){return C[e]||y&&v[e]||e}function s(n,o,s,l,d,p,h){var m=t(n),g=f[m]||(f[m]=[]);o.split(/\s/).forEach(function(t){if("ready"==t)return e(document).ready(s);var o=i(t);o.fn=s,o.sel=d,o.e in C&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?o.fn.apply(this,arguments):void 0}),o.del=p;var m=p||s;o.proxy=function(e){if(e=c(e),!e.isImmediatePropagationStopped()){e.data=l;var t=m.apply(n,e._args==u?[e]:[e].concat(e._args));return t===!1&&(e.preventDefault(),e.stopPropagation()),t}},o.i=g.length,g.push(o),"addEventListener"in n&&n.addEventListener(a(o.e),o.proxy,r(o,h))})}function l(e,i,o,s,l){var c=t(e);(i||"").split(/\s/).forEach(function(t){n(e,t,o,s).forEach(function(t){delete f[c][t.i],"removeEventListener"in e&&e.removeEventListener(a(t.e),t.proxy,r(t,l))})})}function c(t,n){return!n&&t.isDefaultPrevented||(n||(n=t),e.each(E,function(e,i){var o=n[e];t[e]=function(){return this[i]=w,o&&o.apply(n,arguments)},t[i]=I}),(n.defaultPrevented!==u?n.defaultPrevented:"returnValue"in n?n.returnValue===!1:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=w)),t}function d(e){var t,n={originalEvent:e};for(t in e)_.test(t)||e[t]===u||(n[t]=e[t]);return c(n,e)}var u,p=1,h=Array.prototype.slice,m=e.isFunction,g=function(e){return"string"==typeof e},f={},b={},y="onfocusin"in window,v={focus:"focusin",blur:"focusout"},C={mouseenter:"mouseover",mouseleave:"mouseout"};b.click=b.mousedown=b.mouseup=b.mousemove="MouseEvents",e.event={add:s,remove:l},e.proxy=function(n,i){var o=2 in arguments&&h.call(arguments,2);if(m(n)){var r=function(){return n.apply(i,o?o.concat(h.call(arguments)):arguments)};return r._zid=t(n),r}if(g(i))return o?(o.unshift(n[i],n),e.proxy.apply(null,o)):e.proxy(n[i],n);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,i){return this.on(e,t,n,i,1)};var w=function(){return!0},I=function(){return!1},_=/^([A-Z]|returnValue$cbola|layer[XY]$cbola)/,E={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,i,o,r){var a,c,p=this;return t&&!g(t)?(e.each(t,function(e,t){p.on(e,n,i,t,r)}),p):(g(n)||m(o)||o===!1||(o=i,i=n,n=u),(m(i)||i===!1)&&(o=i,i=u),o===!1&&(o=I),p.each(function(u,p){r&&(a=function(e){return l(p,e.type,o),o.apply(this,arguments)}),n&&(c=function(t){var i,r=e(t.target).closest(n,p).get(0);return r&&r!==p?(i=e.extend(d(t),{currentTarget:r,liveFired:p}),(a||o).apply(r,[i].concat(h.call(arguments,1)))):void 0}),s(p,t,o,i,n,c||a)}))},e.fn.off=function(t,n,i){var o=this;return t&&!g(t)?(e.each(t,function(e,t){o.off(e,n,t)}),o):(g(n)||m(i)||i===!1||(i=n,n=u),i===!1&&(i=I),o.each(function(){l(this,t,i,n)}))},e.fn.trigger=function(t,n){return t=g(t)||e.isPlainObject(t)?e.Event(t):c(t),t._args=n,this.each(function(){t.type in v&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)})},e.fn.triggerHandler=function(t,i){var o,r;return this.each(function(a,s){o=d(g(t)?e.Event(t):t),o._args=i,o.target=s,e.each(n(s,t.type||t),function(e,t){return r=t.proxy(o),o.isImmediatePropagationStopped()?!1:void 0})}),r},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}}),e.Event=function(e,t){g(e)||(t=e,e=t.type);var n=document.createEvent(b[e]||"Events"),i=!0;if(t)for(var o in t)"bubbles"==o?i=!!t[o]:n[o]=t[o];return n.initEvent(e,i,!0),c(n)}}(e),function(e){function t(t,n,i){var o=e.Event(n);return e(t).trigger(o,i),!o.isDefaultPrevented()}function n(e,n,i,o){return e.global?t(n||y,i,o):void 0}function i(t){t.global&&0===e.active++&&n(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&n(t,null,"ajaxStop")}function r(e,t){var i=t.context;return t.beforeSend.call(i,e,t)===!1||n(t,i,"ajaxBeforeSend",[e,t])===!1?!1:void n(t,i,"ajaxSend",[e,t])}function a(e,t,i,o){var r=i.context,a="success";i.success.call(r,e,a,t),o&&o.resolveWith(r,[e,a,t]),n(i,r,"ajaxSuccess",[t,i,e]),l(a,t,i)}function s(e,t,i,o,r){var a=o.context;o.error.call(a,i,t,e),r&&r.rejectWith(a,[i,t,e]),n(o,a,"ajaxError",[i,o,e||t]),l(t,i,o)}function l(e,t,i){var r=i.context;i.complete.call(r,t,e),n(i,r,"ajaxComplete",[t,i]),o(i)}function c(){}function d(e){return e&&(e=e.split(";",2)[0]),e&&(e==_?"html":e==I?"json":C.test(e)?"script":w.test(e)&&"xml")||"text"}function u(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function p(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()||(t.url=u(t.url,t.data),t.data=void 0)}function h(t,n,i,o){return e.isFunction(n)&&(o=i,i=n,n=void 0),e.isFunction(i)||(o=i,i=void 0),{url:t,data:n,success:i,dataType:o}}function m(t,n,i,o){var r,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,function(n,l){r=e.type(l),o&&(n=i?o:o+"["+(s||"object"==r||"array"==r?n:"")+"]"),!o&&a?t.add(l.name,l.value):"array"==r||!i&&"object"==r?m(t,l,i,n):t.add(n,l)})}var g,f,b=0,y=window.document,v=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,C=/^(?:text|application)\/javascript/i,w=/^(?:text|application)\/xml/i,I="application/json",_="text/html",E=/^\s*$cbola/,T=y.createElement("a");T.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var i,o,l=t.jsonpCallback,c=(e.isFunction(l)?l():l)||"jsonp"+ ++b,d=y.createElement("script"),u=window[c],p=function(t){e(d).triggerHandler("error",t||"abort")},h={abort:p};return n&&n.promise(h),e(d).on("load error",function(r,l){clearTimeout(o),e(d).off().remove(),"error"!=r.type&&i?a(i[0],h,t,n):s(null,l||"error",h,t,n),window[c]=u,i&&e.isFunction(u)&&u(i[0]),u=i=void 0}),r(h,t)===!1?(p("abort"),h):(window[c]=function(){i=arguments},d.src=t.url.replace(/\?(.+)=\?/,"?$cbola1="+c),y.head.appendChild(d),t.timeout>0&&(o=setTimeout(function(){p("timeout")},t.timeout)),h)},e.ajaxSettings={type:"GET",beforeSend:c,success:c,error:c,complete:c,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:I,xml:"application/xml, text/xml",html:_,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0},e.ajax=function(t){var n,o=e.extend({},t||{}),l=e.Deferred&&e.Deferred();for(g in e.ajaxSettings)void 0===o[g]&&(o[g]=e.ajaxSettings[g]);i(o),o.crossDomain||(n=y.createElement("a"),n.href=o.url,n.href=n.href,o.crossDomain=T.protocol+"//"+T.host!=n.protocol+"//"+n.host),o.url||(o.url=window.location.toString()),p(o);var h=o.dataType,m=/\?.+=\?/.test(o.url);if(m&&(h="jsonp"),o.cache!==!1&&(t&&t.cache===!0||"script"!=h&&"jsonp"!=h)||(o.url=u(o.url,"_="+Date.now())),"jsonp"==h)return m||(o.url=u(o.url,o.jsonp?o.jsonp+"=?":o.jsonp===!1?"":"callback=?")),e.ajaxJSONP(o,l);var b,v=o.accepts[h],C={},w=function(e,t){C[e.toLowerCase()]=[e,t]},I=/^([\w-]+:)\/\//.test(o.url)?RegExp.$cbola1:window.location.protocol,_=o.xhr(),x=_.setRequestHeader;if(l&&l.promise(_),o.crossDomain||w("X-Requested-With","XMLHttpRequest"),w("Accept",v||"*/*"),(v=o.mimeType||v)&&(v.indexOf(",")>-1&&(v=v.split(",",2)[0]),_.overrideMimeType&&_.overrideMimeType(v)),(o.contentType||o.contentType!==!1&&o.data&&"GET"!=o.type.toUpperCase())&&w("Content-Type",o.contentType||"application/x-www-form-urlencoded"),o.headers)for(f in o.headers)w(f,o.headers[f]);if(_.setRequestHeader=w,_.onreadystatechange=function(){if(4==_.readyState){_.onreadystatechange=c,clearTimeout(b);var t,n=!1;if(_.status>=200&&_.status<300||304==_.status||0==_.status&&"file:"==I){h=h||d(o.mimeType||_.getResponseHeader("content-type")),t=_.responseText;try{"script"==h?(0,eval)(t):"xml"==h?t=_.responseXML:"json"==h&&(t=E.test(t)?null:e.parseJSON(t))}catch(i){n=i}n?s(n,"parsererror",_,o,l):a(t,_,o,l)}else s(_.statusText||null,_.status?"error":"abort",_,o,l)}},r(_,o)===!1)return _.abort(),s(null,"abort",_,o,l),_;if(o.xhrFields)for(f in o.xhrFields)_[f]=o.xhrFields[f];var S="async"in o?o.async:!0;_.open(o.type,o.url,S,o.username,o.password);for(f in C)x.apply(_,C[f]);return o.timeout>0&&(b=setTimeout(function(){_.onreadystatechange=c,_.abort(),s(null,"timeout",_,o,l)},o.timeout)),_.send(o.data?o.data:null),_},e.get=function(){return e.ajax(h.apply(null,arguments))},e.post=function(){var t=h.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=h.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,i){if(!this.length)return this;var o,r=this,a=t.split(/\s/),s=h(t,n,i),l=s.success;return a.length>1&&(s.url=a[0],o=a[1]),s.success=function(t){r.html(o?e("<div>").html(t.replace(v,"")).find(o):t),l&&l.apply(r,arguments)},e.ajax(s),this};var x=encodeURIComponent;e.param=function(t,n){var i=[];return i.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(x(t)+"="+x(n))},m(i,t,n),i.join("&").replace(/%20/g,"+")}}(e),function(e){e.fn.serializeArray=function(){var t,n,i=[],o=function(e){return e.forEach?e.forEach(o):void i.push({name:t,value:e})};return this[0]&&e.each(this[0].elements,function(i,r){n=r.type,t=r.name,t&&"fieldset"!=r.nodeName.toLowerCase()&&!r.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||r.checked)&&o(e(r).val())}),i},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(0 in arguments)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(e){function t(t){return t=e(t),!(!t.width()&&!t.height())&&"none"!==t.css("display")}function n(e,t){e=e.replace(/=#\]/g,'="#"]');var n,i,o=s.exec(e);if(o&&o[2]in a&&(n=a[o[2]],i=o[3],e=o[1],i)){var r=Number(i);i=isNaN(r)?i.replace(/^["']|["']$/g,""):r}return t(e,n,i)}var i=e.zepto,o=i.qsa,r=i.matches,a=e.expr[":"]={visible:function(){return t(this)?this:void 0},hidden:function(){return t(this)?void 0:this},selected:function(){return this.selected?this:void 0},checked:function(){return this.checked?this:void 0},parent:function(){return this.parentNode},first:function(e){return 0===e?this:void 0},last:function(e,t){return e===t.length-1?this:void 0},eq:function(e,t,n){return e===n?this:void 0},contains:function(t,n,i){return e(this).text().indexOf(i)>-1?this:void 0},has:function(e,t,n){return i.qsa(this,n).length?this:void 0}},s=new RegExp("(.*):(\\w+)(?:\\(([^)]+)\\))?$\\s*"),l=/^\s*>/,c="Zepto"+ +new Date;i.qsa=function(t,r){return n(r,function(n,a,s){try{var d;!n&&a?n="*":l.test(n)&&(d=e(t).addClass(c),n="."+c+" "+n);var u=o(t,n)}catch(p){throw console.error("error performing selector: %o",r),p}finally{d&&d.removeClass(c)}return a?i.uniq(e.map(u,function(e,t){return a.call(e,t,u,s)})):u})},i.matches=function(e,t){return n(t,function(t,n,i){return(!t||r(e,t))&&(!n||n.call(e,null,i)===e)})}}(e),function(e,t){function n(e){return e.replace(/([a-z])([A-Z])/,"$1-$2").toLowerCase()}function i(e){return o?o+e:e.toLowerCase()}var o,r,a,s,l,c,d,u,p,h,m="",g={Webkit:"webkit",Moz:"",O:"o"},f=document.createElement("div"),b=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,y={};e.each(g,function(e,n){return f.style[e+"TransitionProperty"]!==t?(m="-"+e.toLowerCase()+"-",o=n,!1):void 0}),r=m+"transform",y[a=m+"transition-property"]=y[s=m+"transition-duration"]=y[c=m+"transition-delay"]=y[l=m+"transition-timing-function"]=y[d=m+"animation-name"]=y[u=m+"animation-duration"]=y[h=m+"animation-delay"]=y[p=m+"animation-timing-function"]="",e.fx={off:o===t&&f.style.transitionProperty===t,speeds:{_default:400,fast:200,slow:600},cssPrefix:m,transitionEnd:i("TransitionEnd"),animationEnd:i("AnimationEnd")},e.fn.animate=function(n,i,o,r,a){return e.isFunction(i)&&(r=i,o=t,i=t),e.isFunction(o)&&(r=o,o=t),e.isPlainObject(i)&&(o=i.easing,r=i.complete,a=i.delay,i=i.duration),i&&(i=("number"==typeof i?i:e.fx.speeds[i]||e.fx.speeds._default)/1e3),a&&(a=parseFloat(a)/1e3),this.anim(n,i,o,r,a)},e.fn.anim=function(i,o,m,g,f){var v,C,w,I={},_="",E=this,T=e.fx.transitionEnd,x=!1;if(o===t&&(o=e.fx.speeds._default/1e3),f===t&&(f=0),e.fx.off&&(o=0),"string"==typeof i)I[d]=i,I[u]=o+"s",I[h]=f+"s",I[p]=m||"linear",T=e.fx.animationEnd;else{C=[];for(v in i)b.test(v)?_+=v+"("+i[v]+") ":(I[v]=i[v],C.push(n(v)));_&&(I[r]=_,C.push(r)),o>0&&"object"==typeof i&&(I[a]=C.join(", "),I[s]=o+"s",I[c]=f+"s",I[l]=m||"linear")}return w=function(t){if("undefined"!=typeof t){if(t.target!==t.currentTarget)return;e(t.target).unbind(T,w)}else e(this).unbind(T,w);x=!0,e(this).css(y),g&&g.call(this)},o>0&&(this.bind(T,w),setTimeout(function(){x||w.call(E)},1e3*(o+f)+25)),this.size()&&this.get(0).clientLeft,this.css(I),0>=o&&setTimeout(function(){E.each(function(){w.call(this)})},0),this},f=null}(e),function(e){"__proto__"in{}||e.extend(e.zepto,{Z:function(t,n){return t=t||[],e.extend(t,e.fn),t.selector=n||"",t.__Z=!0,t},isZ:function(t){return"array"===e.type(t)&&"__Z"in t}});try{getComputedStyle(void 0)}catch(t){var n=getComputedStyle;window.getComputedStyle=function(e){try{return n(e)}catch(t){return null}}}}(e)}function isRemoteScript(e){return"undefined"!=typeof e.src&&""!==e.src&&null!==e.src}function cbolaSetWriteCapture(){if(Cbola.Logger.getInstance().alwaysSend("WriteCapture executed by "+Cbola.Config.extractTypeAds+". url: "+Cbola.Env.PageProperties.hostname),Cbola.Config.writeCaptureAlreadySet)return!0;Cbola.Config.writeCaptureAlreadySet=!0;try{!function(e,t){function n(t){var n=k.createElement("div");k.body.insertBefore(n,null),e.replaceWith(n,'<script type="text/javascript">'+t+"</script>")}function i(e,t){for(var n=0,i=e.length;i>n;n++)if(t(e[n])===!1)return}function o(e){return"[object Function]"===Object.prototype.toString.call(e)}function r(e,t,n){return Array.prototype.slice.call(e,t||0,n||e&&e.length)}function a(e,t){function n(e){return!(o=t(e))}var o=!1;return i(e,n),o}function s(e){this._queue=[],this._children=[],this._parent=e,e&&e._addChild(this)}function l(e){return e?new s(e):(s.call(this),void(this.paused=0))}function c(){}function d(n){i(n,function(n){var o=k.getElementById(n.id);return o?(i(n.el.childNodes,function(e){o.appendChild(e)}),o.contentWindow&&t.setTimeout(function(){n.el.contentWindow.document.copyTo(o.contentWindow.document)},1),void e.copyAttrs(n.el,o)):void R("<proxyGetElementById - finish>","no element in writen markup with id "+n.id)})}function u(e,t){return t&&t[e]===!1?!1:t&&t[e]||Q[e]}function p(t,n){function i(e){v.out+=e}function o(e){v.out+=e+"\n"}function a(n){var i=e.$cbola(t.target),o=k.createElement("div");i.parentNode.insertBefore(o,i),e.replaceWith(o,T(n))}function s(n){var i=e.$cbola(t.target),o=k.createElement("div");i.parentNode.insertBefore(o,i),e.replaceWith(o,T(n)+"\n")}function l(e){var t=k.createElement("div");return m.push({id:e,el:t}),t.contentWindow={document:new c},t}function p(n){
var i=e.$cbola(t.target),o=k.createElement("div");return i.parentNode.insertBefore(o,i),e.replaceWith(o,v.out),v.out="",O?v.getEl.call(k,n):v.getEl(n)}function h(e){var t=O?v.getEl.call(k,e):v.getEl(e);return t||findEl(e)}var m=[],g=u("proxyGetElementById",n),f=u("forceLastScriptTag",n),b=u("writeOnGetElementById",n),y=u("immediateWrites",n),v={write:k.write,writeln:k.writeln,finish:function(){},out:""};if(t.state=v,k.write=y?a:i,k.writeln=y?s:o,(g||b)&&(v.getEl=k.getElementById,k.getElementById=h,b?findEl=p:(findEl=l,v.finish=function(){d(m)})),f){v.getByTag=k.getElementsByTagName,k.getElementsByTagName=function(n){var i=r(O?v.getByTag.call(k,n):v.getByTag(n));return"script"===n&&i.push(e.$cbola(t.target)),i};var C=v.finish;v.finish=function(){C(),k.getElementsByTagName=v.getByTag}}return v}function h(e){return k.write=e.write,k.writeln=e.writeln,e.getEl&&(k.getElementById=e.getEl),e.out}function m(e){return e&&e.replace(/^\s*<!(\[CDATA\[|--)/,"").replace(/(\]\]|--)>\s*$cbola/,"")}function g(){}function f(e,t){try{Cbola.Logger.getInstance().info(Cbola.Logger.Colors.RED,"Write capture error"),Cbola.Logger.getInstance().info(e),Cbola.Logger.getInstance().info(t)}catch(n){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.RED,"Write capture error")}}function b(e,t,i){var o=p(t,i);try{n(m(e))}catch(r){R(e,r)}finally{h(o)}return o}function y(e){var t=/^(\w+:)?\/\/([^\/?#]+)/.exec(e);return t&&(t[1]&&t[1]!=location.protocol||t[2]!=location.host)}function v(e){return new RegExp("\\b"+e+"[\\s\\r\\n]*=[\\s\\r\\n]*(?:([\"'])([\\s\\S]*?)\\1|([^\\s>]+))","i")}function C(e){var t=v(e);return function(e){var n=t.exec(e)||[];return n[2]||n[3]}}function w(){return(++G).toString()}function I(e,t){var n;return o(e)&&(n=e,e=null),e=e||{},n=n||e&&e.done,e.done=t?function(){t(n)}:n,e}function _(e){var t=w();return j[t]=function(){e(),delete j[t]},t}function E(e){return q.replace(/%d/,_(e))}function T(t,n,i,r){function a(e){return s(e,e.substring(0,e.length-2)+">","")}function s(t,i,o){function a(){c.push(k)}function s(){C(o)}function l(){e.ajax({url:S,type:"GET",dataType:"text",async:!1,success:function(e){C(e)}})}function d(e,t,n){R("<XHR for "+S+">",n),c.resume()}function m(){return E(function(){c.resume()})}function f(){function t(e,t){if(!n)return void(i=e);try{C(e,m())}catch(o){R(e,o)}}var n,i;return e.ajax({url:S,type:"GET",dataType:"text",async:!0,success:t,error:d}),function(){n=!0,i?C(i):c.pause()}}function v(e){function t(e,t,n){Y("out",S,i.out),I(h(i),E(i.finish)+m()),Y("resume",S)}var i=p(N,n);c.pause(),Y("pause",S),x(N.target,S,t)}function C(e,t){var i=b(e,N,n);t=E(i.finish)+(t||""),I(i.out,t)}function w(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return delete t.done,t}function I(t,i){e.replaceWith(N.target,T(t,w(n),c,N)+(i||""))}var S=D(i),A=F(i)||"",L=W(i)||"",P=!A&&!L||-1!==A.toLowerCase().indexOf("javascript")||-1!==L.toLowerCase().indexOf("javascript");if(Y("replace",S,t),!P)return t;var k,O=_(a),B=U+O,N={target:"#"+B,parent:r};return S?(S=g(S),i=i.replace(M,""),k=y(S)?v:u("asyncAll",n)?f():l):k=s,'<div style="display: none" id="'+B+'"></div>'+i+V.replace(/%d/,O)+"</script>"}var c=i&&new l(i)||z;n=I(n);var d=u("done",n),m="",g=u("fixUrls",n);return o(g)||(g=function(e){return e}),o(d)&&(m=E(function(){c.push(d)})),t.replace(B,s).replace(N,a)+m}function x(t,n,i){var o=document.createElement("script");o.src=n,t=e.$cbola(t);var r=!1,a=t.parentNode;o.onload=o.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i(),o.onload=o.onreadystatechange=null,a.removeChild(o))},a.insertBefore(o,t)}function S(e,t){var n=z;i(e,function(e){function t(){e.action(T(e.html,e.options,n),e)}n.push(t)}),t&&n.push(t)}function A(e){for(var t=e;t&&1===t.nodeType;)for(e=t,t=t.lastChild;t&&1!==t.nodeType;)t=t.previousSibling;return e}function L(t){var n,i=k.write,o=k.writeln,r=[];k.writeln=function(e){k.write(e+"\n")};var a;k.write=function(e){var t=A(k.body);t!==n&&(n=t,r.push(a={el:t,out:[]})),a.out.push(e)},e.onLoad(function(){var n,a,s,l,c;t=I(t),c=t.done,t.done=function(){k.write=i,k.writeln=o,c&&c()};for(var d=0,u=r.length;u>d;d++)n=r[d].el,a=k.createElement("div"),n.parentNode.insertBefore(a,n.nextSibling),s=r[d].out.join(""),l=u-d===1?T(s,t):T(s),e.replaceWith(a,l)})}function P(t){for(var n,i,o,r,a,s=document.getElementsByTagName("script"),c=0,d=t?E(function(){++c>=u.length&&t()}):"",u=[],p=0,h=s.length;h>p;p++)n=s[p],r=n.getAttribute("extsrc"),a=n.getAttribute("asyncsrc"),(r||a)&&u.push({ext:r,async:a,s:n});for(p=0,h=u.length;h>p;p++)i=u[p],i.ext?(o='<script type="text/javascript" src="'+i.ext+'"> </script>',e.replaceWith(i.s,T(o)+d)):i.async&&(o='<script type="text/javascript" src="'+i.async+'"> </script>',e.replaceWith(i.s,T(o,{asyncAll:!0},new l)+d))}var k=t.document;e=e||function(e){return{ajax:e.ajax,$cbola:function(t){return e(t)[0]},replaceWith:function(t,n){var i=e(t)[0];if("undefined"==typeof i)Cbola.Logger.getInstance().info("Not find nextSibling for el");else{var o=i.nextSibling,r=i.parentNode;e(i).remove(),o?e(o).before(n):e(r).append(n)}},onLoad:function(t){e(t)},copyAttrs:function(t,n){for(var i=e(n),o=t.attributes,r=0,a=o.length;a>r;r++)if(o[r]&&o[r].value)try{i.attr(o[r].name,o[r].value)}catch(s){}}}}(t.$cbola),e.copyAttrs=e.copyAttrs||function(){},e.onLoad=e.onLoad||function(){throw"error: autoAsync cannot be used without $cbola or defining writeCaptureSupport.onLoad"},s.prototype={_addChild:function(e){this._children.push(e)},push:function(e){this._queue.push(e),this._bubble("_doRun")},pause:function(){this._bubble("_doPause")},resume:function(){this._bubble("_doResume")},_bubble:function(e){for(var t=this;!t[e];)t=t._parent;return t[e]()},_next:function(){function e(e){return e._next()}if(a(this._children,e))return!0;var t=this._queue.shift();return t&&t(),!!t}},l.prototype=function(){function e(){}return e.prototype=s.prototype,new e}(),l.prototype._doRun=function(){if(!this.running){this.running=!0;try{for(;this.paused<1&&this._next(););}finally{this.running=!1}}},l.prototype._doPause=function(){this.paused++},l.prototype._doResume=function(){this.paused--,this._doRun()},c.prototype={_html:"",open:function(){this._opened=!0,this._delegate&&this._delegate.open()},write:function(e){this._closed||(this._written=!0,this._delegate?this._delegate.write(e):this._html+=e)},writeln:function(e){this.write(e+"\n")},close:function(){this._closed=!0,this._delegate&&this._delegate.close()},copyTo:function(e){this._delegate=e,e.foobar=!0,this._opened&&e.open(),this._written&&e.write(this._html),this._closed&&e.close()}};var O=function(){var e={f:k.getElementById};try{return e.f.call(k,"abc"),!0}catch(t){return!1}}(),R=o(t.console&&console.error)?f:g,B=/(<script[^>]*>)([\s\S]*?)<\/script>/gi,N=/<script[^>]*\/>/gi,M=v("src"),D=C("src"),F=C("type"),W=C("language"),H="__document_write_ajax_callbacks__",U="__document_write_ajax_div-",V="window['"+H+"']['%d']();",j=t[H]={},q='<script type="text/javascript">'+V+"</script>",G=0,z=new l,$=[],Y=window._debugWriteCapture?function(){}:function(e,t,n){$.push({type:e,src:t,data:n})},X=(window._debugWriteCapture?function(){}:function(){$.push(arguments)},"cbolaWriteCapture"),Q=t[X]={_original:t[X],support:e,fixUrls:function(e){return e.replace(/&amp;/g,"&")},noConflict:function(){return t[X]=this._original,this},debug:$,proxyGetElementById:!1,_forTest:{Q:l,GLOBAL_Q:z,$cbola:e,matchAttr:C,slice:r,capture:p,uncapture:h,captureWrite:b},replaceWith:function(t,n,i){e.replaceWith(t,T(n,i))},html:function(t,n,i){var o=e.$cbola(t);o.innerHTML="<span/>",e.replaceWith(o.firstChild,T(n,i))},load:function(t,n,i){e.ajax({url:n,dataType:"text",type:"GET",success:function(e){Q.html(t,e,i)}})},extsrc:P,autoAsync:L,sanitize:T,sanitizeSerial:S}}(this.writeCaptureSupport,this),function(e,t,n){function i(e){return"[object String]"==Object.prototype.toString.call(e)}function o(e,t,n,i){if(0==arguments.length)return r.call(this);var o=h[e];return"load"==e?c.call(this,t,n,i):(o||p(e),a.call(this,t,n,o))}function r(){function t(){var t=this,a=!1;this[m]=!0,e.each(h,function(e){var r=n[e];r&&(t[e]=function(n,s,l){if(!a&&i(n))try{return a=!0,o.call(t,e,n,s,l)}finally{a=!1}return r.apply(t,arguments)})}),this.pushStack=function(){return r.call(n.pushStack.apply(t,arguments))},this.endCapture=function(){return n}}if(this[m])return this;var n=this;return t.prototype=n,new t}function a(n,i,o){var r,a=this;return i&&i.done?(r=i.done,delete i.done):e.isFunction(i)&&(r=i,i=null),t.sanitizeSerial(e.map(this,function(e){return{html:n,options:i,action:function(t){o.call(e,t)}}}),r&&function(){r.call(a)}||r),this}function s(t){e(this).html(t)}function l(t){return function(n){e(this)[t](n)}}function c(t,n,i){var o,r=this,a=t.indexOf(" ");return a>=0&&(o=t.slice(a,t.length),t=t.slice(0,a)),e.isFunction(i)&&(n=n||{},n.done=i),e.ajax({url:t,type:n&&n.type||"GET",dataType:"html",data:n&&n.params,complete:d(r,n,o)})}function d(e,t,n){return function(i,o){if("success"==o||"notmodified"==o){var r=u(i.responseText,n);a.call(e,r,t,s)}}}function u(t,n){if(!n||!t)return t;var i=0,o={};return e("<div/>").append(t.replace(/<script(.|\s)*?\/script>/g,function(e){return o[i]=e,"$cbola-writeCapture-script-placeholder-"+i++ +"-wc"})).find(n).html().replace(g,function(e,t){return o[t]})}function p(e){throw"invalid method parameter "+e}var h={html:s};e.each(["append","prepend","after","before","wrap","wrapAll","replaceWith","wrapInner"],function(){h[this]=l(this)}),e.fn.cbolaWriteCapture=o;var m="__writeCaptureJsProxied-fghebd__",g=/$cbola-writeCapture-script-placeholder-(\d+)-wc/g;e.cbolaWriteCapture=t}($cbola,cbolaWriteCapture.noConflict())}catch(e){console.log("cbolaWriteCapture ERR WC file")}}function cboladebug(){Cbola.Env.DEBUG=!0,localStorage.setItem("cbolaDebug","1")}function rcboladebug(){Cbola.Env.DEBUG=!1,localStorage.setItem("cbolaDebug","0")}window.Cbola=window.Cbola||{};try{cbolaApprBrowser=!0,cbola_setZepto()}catch(e){cbolaXdrCall()}(function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function i(e,t,n,i){for(var o=-1,r=e?e.length:0;++o<r;){var a=e[o];t(i,a,n(a),e)}return i}function o(e,t){for(var n=-1,i=e?e.length:0;++n<i&&!1!==t(e[n],n,e););return e}function r(e,t){for(var n=e?e.length:0;n--&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(!t(e[n],n,e))return!1;return!0}function s(e,t){for(var n=-1,i=e?e.length:0,o=0,r=[];++n<i;){var a=e[n];t(a,n,e)&&(r[o++]=a)}return r}function l(e,t){return!(!e||!e.length)&&-1<b(e,t,0)}function c(e,t,n){for(var i=-1,o=e?e.length:0;++i<o;)if(n(t,e[i]))return!0;return!1}function d(e,t){for(var n=-1,i=e?e.length:0,o=Array(i);++n<i;)o[n]=t(e[n],n,e);return o}function u(e,t){for(var n=-1,i=t.length,o=e.length;++n<i;)e[o+n]=t[n];return e}function p(e,t,n,i){var o=-1,r=e?e.length:0;for(i&&r&&(n=e[++o]);++o<r;)n=t(n,e[o],o,e);return n}function h(e,t,n,i){var o=e?e.length:0;for(i&&o&&(n=e[--o]);o--;)n=t(n,e[o],o,e);return n}function m(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}function g(e,t,n){var i;return n(e,function(e,n,o){return t(e,n,o)?(i=n,!1):void 0}),i}function f(e,t,n,i){var o=e.length;for(n+=i?1:-1;i?n--:++n<o;)if(t(e[n],n,e))return n;return-1}function b(e,t,n){if(t!==t)return B(e,n);--n;for(var i=e.length;++n<i;)if(e[n]===t)return n;return-1}function y(e,t,n,i){--n;for(var o=e.length;++n<o;)if(i(e[n],t))return n;return-1}function v(e,t){var n=e?e.length:0;return n?I(e,t)/n:z}function C(e,t,n,i,o){return o(e,function(e,o,r){n=i?(i=!1,e):t(n,e,o,r)}),n}function w(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function I(e,t){for(var n,i=-1,o=e.length;++i<o;){var r=t(e[i]);r!==q&&(n=n===q?r:n+r)}return n}function _(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}function E(e,t){return d(t,function(t){return[t,e[t]]})}function T(e){return function(t){return e(t)}}function x(e,t){return d(t,function(t){return e[t]})}function S(e,t){return e.has(t)}function A(e,t){for(var n=-1,i=e.length;++n<i&&-1<b(t,e[n],0););return n}function L(e,t){for(var n=e.length;n--&&-1<b(t,e[n],0););return n}function P(e){return e&&e.Object===Object?e:null}function k(e){return Me[e]}function O(e){return De[e]}function R(e){return"\\"+We[e]}function B(e,t,n){var i=e.length;for(t+=n?1:-1;n?t--:++t<i;){var o=e[t];if(o!==o)return t}return-1}function N(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}function M(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function D(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}function F(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var a=e[n];a!==t&&"__lodash_placeholder__"!==a||(e[n]="__lodash_placeholder__",r[o++]=n)}return r}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function H(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function U(e){if(!e||!ke.test(e))return e.length;for(var t=Le.lastIndex=0;Le.test(e);)t++;return t}function V(e){return Fe[e]}function j(P){function Ee(e,t){return P.setTimeout.call($e,e,t)}function Te(e){if(qi(e)&&!ya(e)&&!(e instanceof De)){if(e instanceof Me)return e;if(Oo.call(e,"__wrapped__"))return ci(e)}return new Me(e)}function xe(){}function Me(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=q}function De(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Fe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function We(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Ve(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function je(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ve;++t<n;)this.add(e[t])}function Ge(e){this.__data__=new We(e)}function ze(e,t,n,i){return e===q||Ni(e,So[n])&&!Oo.call(i,n)?t:e}function Xe(e,t,n){(n===q||Ni(e[t],n))&&("number"!=typeof t||n!==q||t in e)||(e[t]=n)}function Qe(e,t,n){var i=e[t];Oo.call(e,t)&&Ni(i,n)&&(n!==q||t in e)||(e[t]=n)}function Ze(e,t){for(var n=e.length;n--;)if(Ni(e[n][0],t))return n;return-1}function Je(e,t,n,i){return Er(e,function(e,o,r){t(i,e,n(e),r)}),i}function Ke(e,t){return e&&un(t,ao(t),e)}function et(e,t){for(var n=-1,i=null==e,o=t.length,r=Array(o);++n<o;)r[n]=i?q:oo(e,t[n]);return r}function tt(e,t,n){return e===e&&(n!==q&&(e=n>=e?e:n),t!==q&&(e=e>=t?e:t)),e}function nt(e,t,n,i,r,a,s){var l;if(i&&(l=a?i(e,r,a,s):i(e)),l!==q)return l;if(!ji(e))return e;if(r=ya(e)){if(l=$n(e),!t)return dn(e,l)}else{var c=Gn(e),d="[object Function]"==c||"[object GeneratorFunction]"==c;if(va(e))return rn(e,t);if("[object Object]"==c||"[object Arguments]"==c||d&&!a){if(N(e))return a?e:{};if(l=Yn(d?{}:e),!t)return pn(e,Ke(l,e))}else{if(!Ne[c])return a?e:{};l=Xn(e,c,nt,t)}}if(s||(s=new Ge),a=s.get(e))return a;if(s.set(e,l),!r)var u=n?gt(e,ao,qn):ao(e);return o(u||e,function(o,r){u&&(r=o,o=e[r]),Qe(l,r,nt(o,t,n,i,r,e,s))}),l}function it(e){var t=ao(e),n=t.length;return function(i){if(null==i)return!n;for(var o=n;o--;){var r=t[o],a=e[r],s=i[r];if(s===q&&!(r in Object(i))||!a(s))return!1}return!0}}function ot(e){return ji(e)?Go(e):{}}function rt(e,t,n){if("function"!=typeof e)throw new To("Expected a function");return Ee(function(){e.apply(q,n)},t)}function at(e,t,n,i){var o=-1,r=l,a=!0,s=e.length,u=[],p=t.length;if(!s)return u;n&&(t=d(t,T(n))),i?(r=c,a=!1):t.length>=200&&(r=S,a=!1,t=new je(t));e:for(;++o<s;){var h=e[o],m=n?n(h):h,h=i||0!==h?h:0;if(a&&m===m){for(var g=p;g--;)if(t[g]===m)continue e;u.push(h)}else r(t,m,i)||u.push(h)}return u}function st(e,t){var n=!0;return Er(e,function(e,i,o){return n=!!t(e,i,o)}),n}function lt(e,t,n){for(var i=-1,o=e.length;++i<o;){var r=e[i],a=t(r);if(null!=a&&(s===q?a===a&&!Xi(a):n(a,s)))var s=a,l=r}return l}function ct(e,t){var n=[];return Er(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n}function dt(e,t,n,i,o){var r=-1,a=e.length;for(n||(n=Zn),o||(o=[]);++r<a;){var s=e[r];t>0&&n(s)?t>1?dt(s,t-1,n,i,o):u(o,s):i||(o[o.length]=s)}return o}function ut(e,t){return e&&xr(e,t,ao)}function pt(e,t){return e&&Sr(e,t,ao)}function ht(e,t){return s(t,function(t){return Hi(e[t])})}function mt(e,t){t=ti(t,e)?[t]:nn(t);for(var n=0,i=t.length;null!=e&&i>n;)e=e[si(t[n++])];return n&&n==i?e:q}function gt(e,t,n){return t=t(e),ya(e)?t:u(t,n(e))}function ft(e,t){return e>t}function bt(e,t){return null!=e&&(Oo.call(e,t)||"object"==typeof e&&t in e&&null===Qo(Object(e)))}function yt(e,t){return null!=e&&t in Object(e)}function vt(e,t,n){for(var i=n?c:l,o=e[0].length,r=e.length,a=r,s=Array(r),u=1/0,p=[];a--;){var h=e[a];a&&t&&(h=d(h,T(t))),u=tr(h.length,u),s[a]=!n&&(t||o>=120&&h.length>=120)?new je(a&&h):q}var h=e[0],m=-1,g=s[0];e:for(;++m<o&&u>p.length;){var f=h[m],b=t?t(f):f,f=n||0!==f?f:0;if(g?!S(g,b):!i(p,b,n)){for(a=r;--a;){var y=s[a];if(y?!S(y,b):!i(e[a],b,n))continue e}g&&g.push(b),p.push(f)}}return p}function Ct(e,t,n){var i={};return ut(e,function(e,o,r){t(i,n(e),o,r)}),i}function wt(e,t,i){return ti(t,e)||(t=nn(t),e=ai(e,t),t=gi(t)),t=null==e?e:e[si(t)],null==t?q:n(t,e,i)}function It(e,t,n,i,o){if(e===t)t=!0;else if(null==e||null==t||!ji(e)&&!qi(t))t=e!==e&&t!==t;else e:{var r=ya(e),a=ya(t),s="[object Array]",l="[object Array]";r||(s=Gn(e),s="[object Arguments]"==s?"[object Object]":s),a||(l=Gn(t),l="[object Arguments]"==l?"[object Object]":l);var c="[object Object]"==s&&!N(e),a="[object Object]"==l&&!N(t);if((l=s==l)&&!c)o||(o=new Ge),t=r||Qi(e)?Mn(e,t,It,n,i,o):Dn(e,t,s,It,n,i,o);else{if(!(2&i)&&(r=c&&Oo.call(e,"__wrapped__"),s=a&&Oo.call(t,"__wrapped__"),r||s)){e=r?e.value():e,t=s?t.value():t,o||(o=new Ge),t=It(e,t,n,i,o);break e}if(l)t:if(o||(o=new Ge),r=2&i,s=ao(e),a=s.length,l=ao(t).length,a==l||r){for(c=a;c--;){var d=s[c];if(!(r?d in t:bt(t,d))){t=!1;break t}}if(l=o.get(e))t=l==t;else{l=!0,o.set(e,t);for(var u=r;++c<a;){var d=s[c],p=e[d],h=t[d];if(n)var m=r?n(h,p,d,t,e,o):n(p,h,d,e,t,o);if(m===q?p!==h&&!It(p,h,n,i,o):!m){l=!1;break}u||(u="constructor"==d)}l&&!u&&(n=e.constructor,i=t.constructor,n!=i&&"constructor"in e&&"constructor"in t&&!("function"==typeof n&&n instanceof n&&"function"==typeof i&&i instanceof i)&&(l=!1)),o["delete"](e),t=l}}else t=!1;else t=!1}}return t}function _t(e,t,n,i){var o=n.length,r=o,a=!i;if(null==e)return!r;for(e=Object(e);o--;){var s=n[o];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++o<r;){var s=n[o],l=s[0],c=e[l],d=s[1];if(a&&s[2]){if(c===q&&!(l in e))return!1}else{if(s=new Ge,i)var u=i(c,d,l,e,t,s);if(u===q?!It(d,c,i,3,s):!u)return!1}}return!0}function Et(e){return!ji(e)||Po&&Po in e?!1:(Hi(e)||N(e)?Do:ye).test(li(e))}function Tt(e){return"function"==typeof e?e:null==e?mo:"object"==typeof e?ya(e)?Pt(e[0],e[1]):Lt(e):yo(e)}function xt(e){e=null==e?e:Object(e);var t,n=[];for(t in e)n.push(t);return n}function St(e,t){return t>e}function At(e,t){var n=-1,i=Di(e)?Array(e.length):[];return Er(e,function(e,o,r){i[++n]=t(e,o,r)}),i}function Lt(e){var t=Vn(e);return 1==t.length&&t[0][2]?oi(t[0][0],t[0][1]):function(n){return n===e||_t(n,e,t)}}function Pt(e,t){return ti(e)&&t===t&&!ji(t)?oi(si(e),t):function(n){var i=oo(n,e);return i===q&&i===t?ro(n,e):It(t,i,q,3)}}function kt(e,t,n,i,r){if(e!==t){if(!ya(t)&&!Qi(t))var a=so(t);o(a||t,function(o,s){if(a&&(s=o,o=t[s]),ji(o)){r||(r=new Ge);var l=s,c=r,d=e[l],u=t[l],p=c.get(u);if(p)Xe(e,l,p);else{var p=i?i(d,u,l+"",e,t,c):q,h=p===q;h&&(p=u,ya(u)||Qi(u)?ya(d)?p=d:Fi(d)?p=dn(d):(h=!1,p=nt(u,!0)):zi(u)||Mi(u)?Mi(d)?p=no(d):!ji(d)||n&&Hi(d)?(h=!1,p=nt(u,!0)):p=d:h=!1),c.set(u,p),h&&kt(p,u,n,i,c),c["delete"](u),Xe(e,l,p)}}else l=i?i(e[s],o,s+"",e,t,r):q,l===q&&(l=o),Xe(e,s,l)})}}function Ot(e,t){var n=e.length;return n?(t+=0>t?n:0,Kn(t,n)?e[t]:q):void 0}function Rt(e,t,n){var i=-1;return t=d(t.length?t:[mo],T(Hn())),e=At(e,function(e){return{a:d(t,function(t){return t(e)}),b:++i,c:e}}),w(e,function(e,t){var i;e:{i=-1;for(var o=e.a,r=t.a,a=o.length,s=n.length;++i<a;){var l=sn(o[i],r[i]);if(l){i=i>=s?l:l*("desc"==n[i]?-1:1);break e}}i=e.b-t.b}return i})}function Bt(e,t){return e=Object(e),p(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function Nt(e,t){for(var n=-1,i=gt(e,so,Or),o=i.length,r={};++n<o;){var a=i[n],s=e[a];t(s,a)&&(r[a]=s)}return r}function Mt(e){return function(t){return null==t?q:t[e]}}function Dt(e){return function(t){return mt(t,e)}}function Ft(e,t,n,i){var o=i?y:b,r=-1,a=t.length,s=e;for(e===t&&(t=dn(t)),n&&(s=d(e,T(n)));++r<a;)for(var l=0,c=t[r],c=n?n(c):c;-1<(l=o(s,c,l,i));)s!==e&&$o.call(s,l,1),$o.call(e,l,1);return e}function Wt(e,t){for(var n=e?t.length:0,i=n-1;n--;){var o=t[n];if(n==i||o!==r){var r=o;if(Kn(o))$o.call(e,o,1);else if(ti(o,e))delete e[si(o)];else{var o=nn(o),a=ai(e,o);null!=a&&delete a[si(gi(o))]}}}}function Ht(e,t){return e+Xo(ir()*(t-e+1))}function Ut(e,t){var n="";if(!e||1>t||t>9007199254740991)return n;do t%2&&(n+=e),(t=Xo(t/2))&&(e+=e);while(t);return n}function Vt(e,t,n,i){t=ti(t,e)?[t]:nn(t);for(var o=-1,r=t.length,a=r-1,s=e;null!=s&&++o<r;){var l=si(t[o]);if(ji(s)){var c=n;if(o!=a){var d=s[l],c=i?i(d,l,s):q;c===q&&(c=null==d?Kn(t[o+1])?[]:{}:d)}Qe(s,l,c)}s=s[l]}return e}function jt(e,t,n){var i=-1,o=e.length;for(0>t&&(t=-t>o?0:o+t),n=n>o?o:n,0>n&&(n+=o),o=t>n?0:n-t>>>0,t>>>=0,n=Array(o);++i<o;)n[i]=e[i+t];return n}function qt(e,t){var n;return Er(e,function(e,i,o){return n=t(e,i,o),!n}),!!n}function Gt(e,t,n){var i=0,o=e?e.length:i;if("number"==typeof t&&t===t&&2147483647>=o){for(;o>i;){var r=i+o>>>1,a=e[r];null!==a&&!Xi(a)&&(n?t>=a:t>a)?i=r+1:o=r}return o}return zt(e,t,mo,n)}function zt(e,t,n,i){t=n(t);for(var o=0,r=e?e.length:0,a=t!==t,s=null===t,l=Xi(t),c=t===q;r>o;){var d=Xo((o+r)/2),u=n(e[d]),p=u!==q,h=null===u,m=u===u,g=Xi(u);(a?i||m:c?m&&(i||p):s?m&&p&&(i||!h):l?m&&p&&!h&&(i||!g):h||g?0:i?t>=u:t>u)?o=d+1:r=d}return tr(r,4294967294)}function $t(e,t){for(var n=-1,i=e.length,o=0,r=[];++n<i;){var a=e[n],s=t?t(a):a;if(!n||!Ni(s,l)){var l=s;r[o++]=0===a?0:a}}return r}function Yt(e){return"number"==typeof e?e:Xi(e)?z:+e}function Xt(e){if("string"==typeof e)return e;if(Xi(e))return _r?_r.call(e):"";var t=e+"";return"0"==t&&1/e==-G?"-0":t}function Qt(e,t,n){var i=-1,o=l,r=e.length,a=!0,s=[],d=s;if(n)a=!1,o=c;else if(r>=200){if(o=t?null:Lr(e))return W(o);a=!1,o=S,d=new je}else d=t?[]:s;e:for(;++i<r;){var u=e[i],p=t?t(u):u,u=n||0!==u?u:0;if(a&&p===p){for(var h=d.length;h--;)if(d[h]===p)continue e;t&&d.push(p),s.push(u)}else o(d,p,n)||(d!==s&&d.push(p),s.push(u))}return s}function Zt(e,t,n,i){for(var o=e.length,r=i?o:-1;(i?r--:++r<o)&&t(e[r],r,e););return n?jt(e,i?0:r,i?r+1:o):jt(e,i?r+1:0,i?o:r)}function Jt(e,t){var n=e;return n instanceof De&&(n=n.value()),p(t,function(e,t){return t.func.apply(t.thisArg,u([e],t.args))},n)}function Kt(e,t,n){for(var i=-1,o=e.length;++i<o;)var r=r?u(at(r,e[i],t,n),at(e[i],r,t,n)):e[i];return r&&r.length?Qt(r,t,n):[]}function en(e,t,n){for(var i=-1,o=e.length,r=t.length,a={};++i<o;)n(a,e[i],r>i?t[i]:q);return a}function tn(e){return Fi(e)?e:[]}function nn(e){return ya(e)?e:Nr(e)}function on(e,t,n){var i=e.length;return n=n===q?i:n,!t&&n>=i?e:jt(e,t,n)}function rn(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function an(e){var t=new e.constructor(e.byteLength);return new Uo(t).set(new Uo(e)),t}function sn(e,t){if(e!==t){var n=e!==q,i=null===e,o=e===e,r=Xi(e),a=t!==q,s=null===t,l=t===t,c=Xi(t);if(!s&&!c&&!r&&e>t||r&&a&&l&&!s&&!c||i&&a&&l||!n&&l||!o)return 1;if(!i&&!r&&!c&&t>e||c&&n&&o&&!i&&!r||s&&n&&o||!a&&o||!l)return-1}return 0}function ln(e,t,n,i){var o=-1,r=e.length,a=n.length,s=-1,l=t.length,c=er(r-a,0),d=Array(l+c);for(i=!i;++s<l;)d[s]=t[s];for(;++o<a;)(i||r>o)&&(d[n[o]]=e[o]);for(;c--;)d[s++]=e[o++];return d}function cn(e,t,n,i){var o=-1,r=e.length,a=-1,s=n.length,l=-1,c=t.length,d=er(r-s,0),u=Array(d+c);for(i=!i;++o<d;)u[o]=e[o];for(d=o;++l<c;)u[d+l]=t[l];for(;++a<s;)(i||r>o)&&(u[d+n[a]]=e[o++]);return u}function dn(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}function un(e,t,n,i){n||(n={});for(var o=-1,r=t.length;++o<r;){var a=t[o],s=i?i(n[a],e[a],a,n,e):e[a];Qe(n,a,s)}return n}function pn(e,t){return un(e,qn(e),t)}function hn(e,t){return function(n,o){var r=ya(n)?i:Je,a=t?t():{};return r(n,e,Hn(o),a)}}function mn(e){return Bi(function(t,n){var i=-1,o=n.length,r=o>1?n[o-1]:q,a=o>2?n[2]:q,r=e.length>3&&"function"==typeof r?(o--,r):q;for(a&&ei(n[0],n[1],a)&&(r=3>o?q:r,o=1),t=Object(t);++i<o;)(a=n[i])&&e(t,a,i,r);return t})}function gn(e,t){return function(n,i){if(null==n)return n;if(!Di(n))return e(n,i);for(var o=n.length,r=t?o:-1,a=Object(n);(t?r--:++r<o)&&!1!==i(a[r],r,a););return n}}function fn(e){return function(t,n,i){var o=-1,r=Object(t);i=i(t);for(var a=i.length;a--;){var s=i[e?a:++o];if(!1===n(r[s],s,r))break}return t}}function bn(e,t,n){function i(){return(this&&this!==$e&&this instanceof i?r:e).apply(o?n:this,arguments)}var o=1&t,r=Cn(e);return i}function yn(e){return function(t){t=io(t);var n=ke.test(t)?t.match(Le):q,i=n?n[0]:t.charAt(0);return t=n?on(n,1).join(""):t.slice(1),i[e]()+t}}function vn(e){return function(t){return p(po(uo(t).replace(Se,"")),e,"")}}function Cn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ot(e.prototype),t=e.apply(n,t);return ji(t)?t:n}}function wn(e,t,i){function o(){for(var a=arguments.length,s=Array(a),l=a,c=Wn(o);l--;)s[l]=arguments[l];return l=3>a&&s[0]!==c&&s[a-1]!==c?[]:F(s,c),a-=l.length,i>a?On(e,t,En,o.placeholder,q,s,l,q,q,i-a):n(this&&this!==$e&&this instanceof o?r:e,this,s)}var r=Cn(e);return o}function In(e){return function(t,n,i){var o=Object(t);if(n=Hn(n,3),!Di(t))var r=ao(t);return i=e(r||t,function(e,t){return r&&(t=e,e=o[t]),n(e,t,o)},i),i>-1?t[r?r[i]:i]:q}}function _n(e){return Bi(function(t){t=dt(t,1);var n=t.length,i=n,o=Me.prototype.thru;for(e&&t.reverse();i--;){var r=t[i];if("function"!=typeof r)throw new To("Expected a function");if(o&&!a&&"wrapper"==Fn(r))var a=new Me([],!0)}for(i=a?i:n;++i<n;)var r=t[i],o=Fn(r),s="wrapper"==o?Pr(r):q,a=s&&ni(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[Fn(s[0])].apply(a,s[3]):1==r.length&&ni(r)?a[o]():a.thru(r);return function(){var e=arguments,i=e[0];if(a&&1==e.length&&ya(i)&&i.length>=200)return a.plant(i).value();for(var o=0,e=n?t[o].apply(this,e):i;++o<n;)e=t[o].call(this,e);return e}})}function En(e,t,n,i,o,r,a,s,l,c){function d(){for(var b=arguments.length,y=Array(b),v=b;v--;)y[v]=arguments[v];if(m){var C,w=Wn(d),v=y.length;for(C=0;v--;)y[v]===w&&C++}if(i&&(y=ln(y,i,o,m)),r&&(y=cn(y,r,a,m)),b-=C,m&&c>b)return w=F(y,w),On(e,t,En,d.placeholder,n,y,w,s,l,c-b);if(w=p?n:this,v=h?w[e]:e,b=y.length,s){C=y.length;for(var I=tr(s.length,C),_=dn(y);I--;){var E=s[I];y[I]=Kn(E,C)?_[E]:q}}else g&&b>1&&y.reverse();return u&&b>l&&(y.length=l),this&&this!==$e&&this instanceof d&&(v=f||Cn(v)),v.apply(w,y)}var u=128&t,p=1&t,h=2&t,m=24&t,g=512&t,f=h?q:Cn(e);return d}function Tn(e,t){return function(n,i){return Ct(n,e,t(i))}}function xn(e){return function(t,n){var i;if(t===q&&n===q)return 0;if(t!==q&&(i=t),n!==q){if(i===q)return n;"string"==typeof t||"string"==typeof n?(t=Xt(t),n=Xt(n)):(t=Yt(t),n=Yt(n)),i=e(t,n)}return i}}function Sn(e){return Bi(function(t){return t=1==t.length&&ya(t[0])?d(t[0],T(Hn())):d(dt(t,1,Jn),T(Hn())),Bi(function(i){var o=this;return e(t,function(e){return n(e,o,i)})})})}function An(e,t){t=t===q?" ":Xt(t);var n=t.length;return 2>n?n?Ut(t,e):t:(n=Ut(t,Yo(e/U(t))),ke.test(t)?on(n.match(Le),0,e).join(""):n.slice(0,e))}function Ln(e,t,i,o){function r(){for(var t=-1,l=arguments.length,c=-1,d=o.length,u=Array(d+l),p=this&&this!==$e&&this instanceof r?s:e;++c<d;)u[c]=o[c];for(;l--;)u[c++]=arguments[++t];return n(p,a?i:this,u)}var a=1&t,s=Cn(e);return r}function Pn(e){return function(t,n,i){i&&"number"!=typeof i&&ei(t,n,i)&&(n=i=q),t=to(t),t=t===t?t:0,n===q?(n=t,t=0):n=to(n)||0,i=i===q?n>t?1:-1:to(i)||0;var o=-1;n=er(Yo((n-t)/(i||1)),0);for(var r=Array(n);n--;)r[e?n:++o]=t,t+=i;return r}}function kn(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=to(t),n=to(n)),e(t,n)}}function On(e,t,n,i,o,r,a,s,l,c){var d=8&t,u=d?a:q;a=d?q:a;var p=d?r:q;return r=d?q:r,t=(t|(d?32:64))&~(d?64:32),4&t||(t&=-4),t=[e,t,o,p,u,r,a,s,l,c],n=n.apply(q,t),ni(e)&&Br(n,t),n.placeholder=i,n}function Rn(e){var t=_o[e];return function(e,n){if(e=to(e),n=tr(Ki(n),292)){var i=(io(e)+"e").split("e"),i=t(i[0]+"e"+(+i[1]+n)),i=(io(i)+"e").split("e");return+(i[0]+"e"+(+i[1]-n))}return t(e)}}function Bn(e){return function(t){var n=Gn(t);return"[object Map]"==n?D(t):"[object Set]"==n?H(t):E(t,e(t))}}function Nn(e,t,n,i,o,r,a,s){var l=2&t;if(!l&&"function"!=typeof e)throw new To("Expected a function");var c=i?i.length:0;if(c||(t&=-97,i=o=q),a=a===q?a:er(Ki(a),0),s=s===q?s:Ki(s),c-=o?o.length:0,64&t){var d=i,u=o;i=o=q}var p=l?q:Pr(e);return r=[e,t,n,i,o,d,u,r,a,s],p&&(n=r[1],e=p[1],t=n|e,i=128==e&&8==n||128==e&&256==n&&p[8]>=r[7].length||384==e&&p[8]>=p[7].length&&8==n,131>t||i)&&(1&e&&(r[2]=p[2],t|=1&n?0:4),(n=p[3])&&(i=r[3],r[3]=i?ln(i,n,p[4]):n,r[4]=i?F(r[3],"__lodash_placeholder__"):p[4]),(n=p[5])&&(i=r[5],r[5]=i?cn(i,n,p[6]):n,r[6]=i?F(r[5],"__lodash_placeholder__"):p[6]),(n=p[7])&&(r[7]=n),128&e&&(r[8]=null==r[8]?p[8]:tr(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=t),e=r[0],t=r[1],n=r[2],i=r[3],o=r[4],s=r[9]=null==r[9]?l?0:e.length:er(r[9]-c,0),!s&&24&t&&(t&=-25),(p?Ar:Br)(t&&1!=t?8==t||16==t?wn(e,t,s):32!=t&&33!=t||o.length?En.apply(q,r):Ln(e,t,n,i):bn(e,t,n),r)}function Mn(e,t,n,i,o,r){var a=2&o,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;if(l=r.get(e))return l==t;var l=-1,c=!0,d=1&o?new je:q;for(r.set(e,t);++l<s;){var u=e[l],p=t[l];if(i)var h=a?i(p,u,l,t,e,r):i(u,p,l,e,t,r);if(h!==q){if(h)continue;c=!1;break}if(d){if(!m(t,function(e,t){return d.has(t)||u!==e&&!n(u,e,i,o,r)?void 0:d.add(t)})){c=!1;break}}else if(u!==p&&!n(u,p,i,o,r)){c=!1;break}}return r["delete"](e),c}function Dn(e,t,n,i,o,r,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)break;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":if(e.byteLength!=t.byteLength||!i(new Uo(e),new Uo(t)))break;return!0;case"[object Boolean]":case"[object Date]":return+e==+t;case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object Number]":return e!=+e?t!=+t:e==+t;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=D;case"[object Set]":if(s||(s=W),e.size!=t.size&&!(2&r))break;return(n=a.get(e))?n==t:(r|=1,a.set(e,t),Mn(s(e),s(t),i,o,r,a));case"[object Symbol]":if(Ir)return Ir.call(e)==Ir.call(t)}return!1}function Fn(e){for(var t=e.name+"",n=gr[t],i=Oo.call(gr,t)?n.length:0;i--;){var o=n[i],r=o.func;if(null==r||r==e)return o.name}return t}function Wn(e){return(Oo.call(Te,"placeholder")?Te:e).placeholder}function Hn(){var e=Te.iteratee||go,e=e===go?Tt:e;return arguments.length?e(arguments[0],arguments[1]):e}function Un(e,t){var n=e.__data__,i=typeof t;return("string"==i||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==t:null===t)?n["string"==typeof t?"string":"hash"]:n.map}function Vn(e){for(var t=ao(e),n=t.length;n--;){var i=t[n],o=e[i];t[n]=[i,o,o===o&&!ji(o)]}return t}function jn(e,t){var n=null==e?q:e[t];return Et(n)?n:q}function qn(e){return jo(Object(e))}function Gn(e){return No.call(e)}function zn(e,t,n){t=ti(t,e)?[t]:nn(t);for(var i,o=-1,r=t.length;++o<r;){var a=si(t[o]);if(!(i=null!=e&&n(e,a)))break;e=e[a]}return i?i:(r=e?e.length:0,!!r&&Vi(r)&&Kn(a,r)&&(ya(e)||Yi(e)||Mi(e)))}function $n(e){var t=e.length,n=e.constructor(t);
return t&&"string"==typeof e[0]&&Oo.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Yn(e){return"function"!=typeof e.constructor||ii(e)?{}:ot(Qo(Object(e)))}function Xn(n,i,o,r){var a=n.constructor;switch(i){case"[object ArrayBuffer]":return an(n);case"[object Boolean]":case"[object Date]":return new a(+n);case"[object DataView]":return i=r?an(n.buffer):n.buffer,new n.constructor(i,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return i=r?an(n.buffer):n.buffer,new n.constructor(i,n.byteOffset,n.length);case"[object Map]":return i=r?o(D(n),!0):D(n),p(i,e,new n.constructor);case"[object Number]":case"[object String]":return new a(n);case"[object RegExp]":return i=new n.constructor(n.source,me.exec(n)),i.lastIndex=n.lastIndex,i;case"[object Set]":return i=r?o(W(n),!0):W(n),p(i,t,new n.constructor);case"[object Symbol]":return Ir?Object(Ir.call(n)):{}}}function Qn(e){var t=e?e.length:q;return Vi(t)&&(ya(e)||Yi(e)||Mi(e))?_(t,String):null}function Zn(e){return ya(e)||Mi(e)}function Jn(e){return ya(e)&&!(2==e.length&&!Hi(e[0]))}function Kn(e,t){return t=null==t?9007199254740991:t,!!t&&("number"==typeof e||Ce.test(e))&&e>-1&&0==e%1&&t>e}function ei(e,t,n){if(!ji(n))return!1;var i=typeof t;return("number"==i?Di(n)&&Kn(t,n.length):"string"==i&&t in n)?Ni(n[t],e):!1}function ti(e,t){if(ya(e))return!1;var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Xi(e)?!0:oe.test(e)||!ie.test(e)||null!=t&&e in Object(t)}function ni(e){var t=Fn(e),n=Te[t];return"function"==typeof n&&t in De.prototype?e===n?!0:(t=Pr(n),!!t&&e===t[0]):!1}function ii(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||So)}function oi(e,t){return function(n){return null==n?!1:n[e]===t&&(t!==q||e in Object(n))}}function ri(e,t,n,i,o,r){return ji(e)&&ji(t)&&kt(e,t,q,ri,r.set(t,e)),e}function ai(e,t){return 1==t.length?e:mt(e,jt(t,0,-1))}function si(e){if("string"==typeof e||Xi(e))return e;var t=e+"";return"0"==t&&1/e==-G?"-0":t}function li(e){if(null!=e){try{return ko.call(e)}catch(t){}return e+""}return""}function ci(e){if(e instanceof De)return e.clone();var t=new Me(e.__wrapped__,e.__chain__);return t.__actions__=dn(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function di(e,t,n){var i=e?e.length:0;return i?(t=n||t===q?1:Ki(t),jt(e,0>t?0:t,i)):[]}function ui(e,t,n){var i=e?e.length:0;return i?(t=n||t===q?1:Ki(t),t=i-t,jt(e,0,0>t?0:t)):[]}function pi(e,t,n){var i=e?e.length:0;return i?(n=null==n?0:Ki(n),0>n&&(n=er(i+n,0)),f(e,Hn(t,3),n)):-1}function hi(e,t,n){var i=e?e.length:0;if(!i)return-1;var o=i-1;return n!==q&&(o=Ki(n),o=0>n?er(i+o,0):tr(o,i-1)),f(e,Hn(t,3),o,!0)}function mi(e){return e&&e.length?e[0]:q}function gi(e){var t=e?e.length:0;return t?e[t-1]:q}function fi(e,t){return e&&e.length&&t&&t.length?Ft(e,t):e}function bi(e){return e?rr.call(e):e}function yi(e){if(!e||!e.length)return[];var t=0;return e=s(e,function(e){return Fi(e)?(t=er(e.length,t),!0):void 0}),_(t,function(t){return d(e,Mt(t))})}function vi(e,t){if(!e||!e.length)return[];var i=yi(e);return null==t?i:d(i,function(e){return n(t,q,e)})}function Ci(e){return e=Te(e),e.__chain__=!0,e}function wi(e,t){return t(e)}function Ii(){return this}function _i(e,t){return(ya(e)?o:Er)(e,Hn(t,3))}function Ei(e,t){return(ya(e)?r:Tr)(e,Hn(t,3))}function Ti(e,t){return(ya(e)?d:At)(e,Hn(t,3))}function xi(e,t,n){var i=-1,o=Zi(e),r=o.length,a=r-1;for(t=(n?ei(e,t,n):t===q)?1:tt(Ki(t),0,r);++i<t;)e=Ht(i,a),n=o[e],o[e]=o[i],o[i]=n;return o.length=t,o}function Si(){return wo.now()}function Ai(e,t,n){return t=n?q:t,t=e&&null==t?e.length:t,Nn(e,128,q,q,q,q,t)}function Li(e,t){var n;if("function"!=typeof t)throw new To("Expected a function");return e=Ki(e),function(){return 0<--e&&(n=t.apply(this,arguments)),1>=e&&(t=q),n}}function Pi(e,t,n){return t=n?q:t,e=Nn(e,8,q,q,q,q,q,t),e.placeholder=Pi.placeholder,e}function ki(e,t,n){return t=n?q:t,e=Nn(e,16,q,q,q,q,q,t),e.placeholder=ki.placeholder,e}function Oi(e,t,n){function i(t){var n=l,i=c;return l=c=q,m=t,u=e.apply(i,n)}function o(e){var n=e-h;return e-=m,h===q||n>=t||0>n||f&&e>=d}function r(){var e=Si();if(o(e))return a(e);var n;n=e-m,e=t-(e-h),n=f?tr(e,d-n):e,p=Ee(r,n)}function a(e){return p=q,b&&l?i(e):(l=c=q,u)}function s(){var e=Si(),n=o(e);if(l=arguments,c=this,h=e,n){if(p===q)return m=e=h,p=Ee(r,t),g?i(e):u;if(f)return p=Ee(r,t),i(h)}return p===q&&(p=Ee(r,t)),u}var l,c,d,u,p,h,m=0,g=!1,f=!1,b=!0;if("function"!=typeof e)throw new To("Expected a function");return t=to(t)||0,ji(n)&&(g=!!n.leading,d=(f="maxWait"in n)?er(to(n.maxWait)||0,t):d,b="trailing"in n?!!n.trailing:b),s.cancel=function(){m=0,l=h=c=p=q},s.flush=function(){return p===q?u:a(Si())},s}function Ri(e,t){function n(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;return r.has(o)?r.get(o):(i=e.apply(this,i),n.cache=r.set(o,i),i)}if("function"!=typeof e||t&&"function"!=typeof t)throw new To("Expected a function");return n.cache=new(Ri.Cache||Ve),n}function Bi(e,t){if("function"!=typeof e)throw new To("Expected a function");return t=er(t===q?e.length-1:Ki(t),0),function(){for(var i=arguments,o=-1,r=er(i.length-t,0),a=Array(r);++o<r;)a[o]=i[t+o];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,i[0],a);case 2:return e.call(this,i[0],i[1],a)}for(r=Array(t+1),o=-1;++o<t;)r[o]=i[o];return r[t]=a,n(e,this,r)}}function Ni(e,t){return e===t||e!==e&&t!==t}function Mi(e){return Fi(e)&&Oo.call(e,"callee")&&(!zo.call(e,"callee")||"[object Arguments]"==No.call(e))}function Di(e){return null!=e&&Vi(kr(e))&&!Hi(e)}function Fi(e){return qi(e)&&Di(e)}function Wi(e){return qi(e)?"[object Error]"==No.call(e)||"string"==typeof e.message&&"string"==typeof e.name:!1}function Hi(e){return e=ji(e)?No.call(e):"","[object Function]"==e||"[object GeneratorFunction]"==e}function Ui(e){return"number"==typeof e&&e==Ki(e)}function Vi(e){return"number"==typeof e&&e>-1&&0==e%1&&9007199254740991>=e}function ji(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function qi(e){return!!e&&"object"==typeof e}function Gi(e){return"number"==typeof e||qi(e)&&"[object Number]"==No.call(e)}function zi(e){return!qi(e)||"[object Object]"!=No.call(e)||N(e)?!1:(e=Qo(Object(e)),null===e?!0:(e=Oo.call(e,"constructor")&&e.constructor,"function"==typeof e&&e instanceof e&&ko.call(e)==Bo))}function $i(e){return ji(e)&&"[object RegExp]"==No.call(e)}function Yi(e){return"string"==typeof e||!ya(e)&&qi(e)&&"[object String]"==No.call(e)}function Xi(e){return"symbol"==typeof e||qi(e)&&"[object Symbol]"==No.call(e)}function Qi(e){return qi(e)&&Vi(e.length)&&!!Be[No.call(e)]}function Zi(e){if(!e)return[];if(Di(e))return Yi(e)?e.match(Le):dn(e);if(qo&&e[qo])return M(e[qo]());var t=Gn(e);return("[object Map]"==t?D:"[object Set]"==t?W:lo)(e)}function Ji(e){return e?(e=to(e),e===G||e===-G?1.7976931348623157e308*(0>e?-1:1):e===e?e:0):0===e?e:0}function Ki(e){e=Ji(e);var t=e%1;return e===e?t?e-t:e:0}function eo(e){return e?tt(Ki(e),0,4294967295):0}function to(e){if("number"==typeof e)return e;if(Xi(e))return z;if(ji(e)&&(e=Hi(e.valueOf)?e.valueOf():e,e=ji(e)?e+"":e),"string"!=typeof e)return 0===e?e:+e;e=e.replace(le,"");var t=be.test(e);return t||ve.test(e)?Ue(e.slice(2),t?2:8):fe.test(e)?z:+e}function no(e){return un(e,so(e))}function io(e){return null==e?"":Xt(e)}function oo(e,t,n){return e=null==e?q:mt(e,t),e===q?n:e}function ro(e,t){return null!=e&&zn(e,t,yt)}function ao(e){var t=ii(e);if(!t&&!Di(e))return Ko(Object(e));var n,i=Qn(e),o=!!i,i=i||[],r=i.length;for(n in e)!bt(e,n)||o&&("length"==n||Kn(n,r))||t&&"constructor"==n||i.push(n);return i}function so(e){for(var t=-1,n=ii(e),i=xt(e),o=i.length,r=Qn(e),a=!!r,r=r||[],s=r.length;++t<o;){var l=i[t];a&&("length"==l||Kn(l,s))||"constructor"==l&&(n||!Oo.call(e,l))||r.push(l)}return r}function lo(e){return e?x(e,ao(e)):[]}function co(e){return Ga(io(e).toLowerCase())}function uo(e){return(e=io(e))&&e.replace(we,k).replace(Ae,"")}function po(e,t,n){return e=io(e),t=n?q:t,t===q&&(t=Oe.test(e)?Pe:ue),e.match(t)||[]}function ho(e){return function(){return e}}function mo(e){return e}function go(e){return Tt("function"==typeof e?e:nt(e,!0))}function fo(e,t,n){var i=ao(t),r=ht(t,i);null!=n||ji(t)&&(r.length||!i.length)||(n=t,t=e,e=this,r=ht(t,ao(t)));var a=!(ji(n)&&"chain"in n&&!n.chain),s=Hi(e);return o(r,function(n){var i=t[n];e[n]=i,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=dn(this.__actions__)).push({func:i,args:arguments,thisArg:e}),n.__chain__=t,n}return i.apply(e,u([this.value()],arguments))})}),e}function bo(){}function yo(e){return ti(e)?Mt(si(e)):Dt(e)}function vo(){return[]}function Co(){return!1}P=P?Ye.defaults({},P,Ye.pick($e,Re)):$e;var wo=P.Date,Io=P.Error,_o=P.Math,Eo=P.RegExp,To=P.TypeError,xo=P.Array.prototype,So=P.Object.prototype,Ao=P.String.prototype,Lo=P["__core-js_shared__"],Po=function(){var e=/[^.]+$/.exec(Lo&&Lo.keys&&Lo.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ko=P.Function.prototype.toString,Oo=So.hasOwnProperty,Ro=0,Bo=ko.call(Object),No=So.toString,Mo=$e._,Do=Eo("^"+ko.call(Oo).replace(ae,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fo=qe?P.Buffer:q,Wo=P.Reflect,Ho=P.Symbol,Uo=P.Uint8Array,Vo=Wo?Wo.f:q,jo=Object.getOwnPropertySymbols,qo="symbol"==typeof(qo=Ho&&Ho.iterator)?qo:q,Go=Object.create,zo=So.propertyIsEnumerable,$o=xo.splice,Yo=_o.ceil,Xo=_o.floor,Qo=Object.getPrototypeOf,Zo=P.isFinite,Jo=xo.join,Ko=Object.keys,er=_o.max,tr=_o.min,nr=P.parseInt,ir=_o.random,or=Ao.replace,rr=xo.reverse,ar=Ao.split,sr=jn(P,"DataView"),lr=jn(P,"Map"),cr=jn(P,"Promise"),dr=jn(P,"Set"),ur=jn(P,"WeakMap"),pr=jn(Object,"create"),hr=ur&&new ur,mr=!zo.call({valueOf:1},"valueOf"),gr={},fr=li(sr),br=li(lr),yr=li(cr),vr=li(dr),Cr=li(ur),wr=Ho?Ho.prototype:q,Ir=wr?wr.valueOf:q,_r=wr?wr.toString:q;Te.templateSettings={escape:ee,evaluate:te,interpolate:ne,variable:"",imports:{_:Te}},Te.prototype=xe.prototype,Te.prototype.constructor=Te,Me.prototype=ot(xe.prototype),Me.prototype.constructor=Me,De.prototype=ot(xe.prototype),De.prototype.constructor=De,Fe.prototype.clear=function(){this.__data__=pr?pr(null):{}},Fe.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},Fe.prototype.get=function(e){var t=this.__data__;return pr?(e=t[e],"__lodash_hash_undefined__"===e?q:e):Oo.call(t,e)?t[e]:q},Fe.prototype.has=function(e){var t=this.__data__;return pr?t[e]!==q:Oo.call(t,e)},Fe.prototype.set=function(e,t){return this.__data__[e]=pr&&t===q?"__lodash_hash_undefined__":t,this},We.prototype.clear=function(){this.__data__=[]},We.prototype["delete"]=function(e){var t=this.__data__;return e=Ze(t,e),0>e?!1:(e==t.length-1?t.pop():$o.call(t,e,1),!0)},We.prototype.get=function(e){var t=this.__data__;return e=Ze(t,e),0>e?q:t[e][1]},We.prototype.has=function(e){return-1<Ze(this.__data__,e)},We.prototype.set=function(e,t){var n=this.__data__,i=Ze(n,e);return 0>i?n.push([e,t]):n[i][1]=t,this},Ve.prototype.clear=function(){this.__data__={hash:new Fe,map:new(lr||We),string:new Fe}},Ve.prototype["delete"]=function(e){return Un(this,e)["delete"](e)},Ve.prototype.get=function(e){return Un(this,e).get(e)},Ve.prototype.has=function(e){return Un(this,e).has(e)},Ve.prototype.set=function(e,t){return Un(this,e).set(e,t),this},je.prototype.add=je.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},je.prototype.has=function(e){return this.__data__.has(e)},Ge.prototype.clear=function(){this.__data__=new We},Ge.prototype["delete"]=function(e){return this.__data__["delete"](e)},Ge.prototype.get=function(e){return this.__data__.get(e)},Ge.prototype.has=function(e){return this.__data__.has(e)},Ge.prototype.set=function(e,t){var n=this.__data__;return n instanceof We&&200==n.__data__.length&&(n=this.__data__=new Ve(n.__data__)),n.set(e,t),this};var Er=gn(ut),Tr=gn(pt,!0),xr=fn(),Sr=fn(!0);Vo&&!zo.call({valueOf:1},"valueOf")&&(xt=function(e){return M(Vo(e))});var Ar=hr?function(e,t){return hr.set(e,t),e}:mo,Lr=dr&&1/W(new dr([,-0]))[1]==G?function(e){return new dr(e)}:bo,Pr=hr?function(e){return hr.get(e)}:bo,kr=Mt("length");jo||(qn=vo);var Or=jo?function(e){for(var t=[];e;)u(t,qn(e)),e=Qo(Object(e));return t}:qn;(sr&&"[object DataView]"!=Gn(new sr(new ArrayBuffer(1)))||lr&&"[object Map]"!=Gn(new lr)||cr&&"[object Promise]"!=Gn(cr.resolve())||dr&&"[object Set]"!=Gn(new dr)||ur&&"[object WeakMap]"!=Gn(new ur))&&(Gn=function(e){var t=No.call(e);if(e=(e="[object Object]"==t?e.constructor:q)?li(e):q)switch(e){case fr:return"[object DataView]";case br:return"[object Map]";case yr:return"[object Promise]";case vr:return"[object Set]";case Cr:return"[object WeakMap]"}return t});var Rr=Lo?Hi:Co,Br=function(){var e=0,t=0;return function(n,i){var o=Si(),r=16-(o-t);if(t=o,r>0){if(150<=++e)return n}else e=0;return Ar(n,i)}}(),Nr=Ri(function(e){var t=[];return io(e).replace(re,function(e,n,i,o){t.push(i?o.replace(pe,"$1"):n||e)}),t}),Mr=Bi(function(e,t){return Fi(e)?at(e,dt(t,1,Fi,!0)):[]}),Dr=Bi(function(e,t){var n=gi(t);return Fi(n)&&(n=q),Fi(e)?at(e,dt(t,1,Fi,!0),Hn(n)):[]}),Fr=Bi(function(e,t){var n=gi(t);return Fi(n)&&(n=q),Fi(e)?at(e,dt(t,1,Fi,!0),q,n):[]}),Wr=Bi(function(e){var t=d(e,tn);return t.length&&t[0]===e[0]?vt(t):[]}),Hr=Bi(function(e){var t=gi(e),n=d(e,tn);return t===gi(n)?t=q:n.pop(),n.length&&n[0]===e[0]?vt(n,Hn(t)):[]}),Ur=Bi(function(e){var t=gi(e),n=d(e,tn);return t===gi(n)?t=q:n.pop(),n.length&&n[0]===e[0]?vt(n,q,t):[]}),Vr=Bi(fi),jr=Bi(function(e,t){t=dt(t,1);var n=e?e.length:0,i=et(e,t);return Wt(e,d(t,function(e){return Kn(e,n)?+e:e}).sort(sn)),i}),qr=Bi(function(e){return Qt(dt(e,1,Fi,!0))}),Gr=Bi(function(e){var t=gi(e);return Fi(t)&&(t=q),Qt(dt(e,1,Fi,!0),Hn(t))}),zr=Bi(function(e){var t=gi(e);return Fi(t)&&(t=q),Qt(dt(e,1,Fi,!0),q,t)}),$r=Bi(function(e,t){return Fi(e)?at(e,t):[]}),Yr=Bi(function(e){return Kt(s(e,Fi))}),Xr=Bi(function(e){var t=gi(e);return Fi(t)&&(t=q),Kt(s(e,Fi),Hn(t))}),Qr=Bi(function(e){var t=gi(e);return Fi(t)&&(t=q),Kt(s(e,Fi),q,t)}),Zr=Bi(yi),Jr=Bi(function(e){var t=e.length,t=t>1?e[t-1]:q,t="function"==typeof t?(e.pop(),t):q;return vi(e,t)}),Kr=Bi(function(e){function t(t){return et(t,e)}e=dt(e,1);var n=e.length,i=n?e[0]:0,o=this.__wrapped__;return!(n>1||this.__actions__.length)&&o instanceof De&&Kn(i)?(o=o.slice(i,+i+(n?1:0)),o.__actions__.push({func:wi,args:[t],thisArg:q}),new Me(o,this.__chain__).thru(function(e){return n&&!e.length&&e.push(q),e})):this.thru(t)}),ea=hn(function(e,t,n){Oo.call(e,n)?++e[n]:e[n]=1}),ta=In(pi),na=In(hi),ia=hn(function(e,t,n){Oo.call(e,n)?e[n].push(t):e[n]=[t]}),oa=Bi(function(e,t,i){var o=-1,r="function"==typeof t,a=ti(t),s=Di(e)?Array(e.length):[];return Er(e,function(e){var l=r?t:a&&null!=e?e[t]:q;s[++o]=l?n(l,e,i):wt(e,t,i)}),s}),ra=hn(function(e,t,n){e[n]=t}),aa=hn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),sa=Bi(function(e,t){if(null==e)return[];var n=t.length;return n>1&&ei(e,t[0],t[1])?t=[]:n>2&&ei(t[0],t[1],t[2])&&(t=[t[0]]),t=1==t.length&&ya(t[0])?t[0]:dt(t,1,Jn),Rt(e,t,[])}),la=Bi(function(e,t,n){var i=1;if(n.length)var o=F(n,Wn(la)),i=32|i;return Nn(e,i,t,n,o)}),ca=Bi(function(e,t,n){var i=3;if(n.length)var o=F(n,Wn(ca)),i=32|i;return Nn(t,i,e,n,o)}),da=Bi(function(e,t){return rt(e,1,t)}),ua=Bi(function(e,t,n){return rt(e,to(t)||0,n)});Ri.Cache=Ve;var pa=Bi(function(e,t){t=1==t.length&&ya(t[0])?d(t[0],T(Hn())):d(dt(t,1,Jn),T(Hn()));var i=t.length;return Bi(function(o){for(var r=-1,a=tr(o.length,i);++r<a;)o[r]=t[r].call(this,o[r]);return n(e,this,o)})}),ha=Bi(function(e,t){var n=F(t,Wn(ha));return Nn(e,32,q,t,n)}),ma=Bi(function(e,t){var n=F(t,Wn(ma));return Nn(e,64,q,t,n)}),ga=Bi(function(e,t){return Nn(e,256,q,q,q,dt(t,1))}),fa=kn(ft),ba=kn(function(e,t){return e>=t}),ya=Array.isArray,va=Fo?function(e){return e instanceof Fo}:Co,Ca=kn(St),wa=kn(function(e,t){return t>=e}),Ia=mn(function(e,t){if(mr||ii(t)||Di(t))un(t,ao(t),e);else for(var n in t)Oo.call(t,n)&&Qe(e,n,t[n])}),_a=mn(function(e,t){if(mr||ii(t)||Di(t))un(t,so(t),e);else for(var n in t)Qe(e,n,t[n])}),Ea=mn(function(e,t,n,i){un(t,so(t),e,i)}),Ta=mn(function(e,t,n,i){un(t,ao(t),e,i)}),xa=Bi(function(e,t){return et(e,dt(t,1))}),Sa=Bi(function(e){return e.push(q,ze),n(Ea,q,e)}),Aa=Bi(function(e){return e.push(q,ri),n(Ra,q,e)}),La=Tn(function(e,t,n){e[t]=n},ho(mo)),Pa=Tn(function(e,t,n){Oo.call(e,t)?e[t].push(n):e[t]=[n]},Hn),ka=Bi(wt),Oa=mn(function(e,t,n){kt(e,t,n)}),Ra=mn(function(e,t,n,i){kt(e,t,n,i)}),Ba=Bi(function(e,t){return null==e?{}:(t=d(dt(t,1),si),Bt(e,at(gt(e,so,Or),t)))}),Na=Bi(function(e,t){return null==e?{}:Bt(e,d(dt(t,1),si))}),Ma=Bn(ao),Da=Bn(so),Fa=vn(function(e,t,n){return t=t.toLowerCase(),e+(n?co(t):t)}),Wa=vn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ha=vn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Ua=yn("toLowerCase"),Va=vn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),ja=vn(function(e,t,n){return e+(n?" ":"")+Ga(t)}),qa=vn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ga=yn("toUpperCase"),za=Bi(function(e,t){try{return n(e,q,t)}catch(i){return Wi(i)?i:new Io(i)}}),$a=Bi(function(e,t){return o(dt(t,1),function(t){t=si(t),e[t]=la(e[t],e)}),e}),Ya=_n(),Xa=_n(!0),Qa=Bi(function(e,t){return function(n){return wt(n,e,t)}}),Za=Bi(function(e,t){return function(n){return wt(e,n,t)}}),Ja=Sn(d),Ka=Sn(a),es=Sn(m),ts=Pn(),ns=Pn(!0),is=xn(function(e,t){return e+t}),os=Rn("ceil"),rs=xn(function(e,t){return e/t}),as=Rn("floor"),ss=xn(function(e,t){return e*t}),ls=Rn("round"),cs=xn(function(e,t){return e-t});return Te.after=function(e,t){if("function"!=typeof t)throw new To("Expected a function");return e=Ki(e),function(){return 1>--e?t.apply(this,arguments):void 0}},Te.ary=Ai,Te.assign=Ia,Te.assignIn=_a,Te.assignInWith=Ea,Te.assignWith=Ta,Te.at=xa,Te.before=Li,Te.bind=la,Te.bindAll=$a,Te.bindKey=ca,Te.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return ya(e)?e:[e]},Te.chain=Ci,Te.chunk=function(e,t,n){if(t=(n?ei(e,t,n):t===q)?1:er(Ki(t),0),n=e?e.length:0,!n||1>t)return[];for(var i=0,o=0,r=Array(Yo(n/t));n>i;)r[o++]=jt(e,i,i+=t);return r},Te.compact=function(e){for(var t=-1,n=e?e.length:0,i=0,o=[];++t<n;){var r=e[t];r&&(o[i++]=r)}return o},Te.concat=function(){for(var e=arguments.length,t=Array(e?e-1:0),n=arguments[0],i=e;i--;)t[i-1]=arguments[i];return e?u(ya(n)?dn(n):[n],dt(t,1)):[]},Te.cond=function(e){var t=e?e.length:0,i=Hn();return e=t?d(e,function(e){if("function"!=typeof e[1])throw new To("Expected a function");return[i(e[0]),e[1]]}):[],Bi(function(i){for(var o=-1;++o<t;){var r=e[o];if(n(r[0],this,i))return n(r[1],this,i)}})},Te.conforms=function(e){return it(nt(e,!0))},Te.constant=ho,Te.countBy=ea,Te.create=function(e,t){var n=ot(e);return t?Ke(n,t):n},Te.curry=Pi,Te.curryRight=ki,Te.debounce=Oi,Te.defaults=Sa,Te.defaultsDeep=Aa,Te.defer=da,Te.delay=ua,Te.difference=Mr,Te.differenceBy=Dr,Te.differenceWith=Fr,Te.drop=di,Te.dropRight=ui,Te.dropRightWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3),!0,!0):[]},Te.dropWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3),!0):[]},Te.fill=function(e,t,n,i){var o=e?e.length:0;if(!o)return[];for(n&&"number"!=typeof n&&ei(e,t,n)&&(n=0,i=o),o=e.length,n=Ki(n),0>n&&(n=-n>o?0:o+n),i=i===q||i>o?o:Ki(i),0>i&&(i+=o),i=n>i?0:eo(i);i>n;)e[n++]=t;return e},Te.filter=function(e,t){return(ya(e)?s:ct)(e,Hn(t,3))},Te.flatMap=function(e,t){return dt(Ti(e,t),1)},Te.flatMapDeep=function(e,t){return dt(Ti(e,t),G)},Te.flatMapDepth=function(e,t,n){return n=n===q?1:Ki(n),dt(Ti(e,t),n)},Te.flatten=function(e){return e&&e.length?dt(e,1):[]},Te.flattenDeep=function(e){return e&&e.length?dt(e,G):[]},Te.flattenDepth=function(e,t){return e&&e.length?(t=t===q?1:Ki(t),dt(e,t)):[]},Te.flip=function(e){return Nn(e,512)},Te.flow=Ya,Te.flowRight=Xa,Te.fromPairs=function(e){for(var t=-1,n=e?e.length:0,i={};++t<n;){var o=e[t];i[o[0]]=o[1]}return i},Te.functions=function(e){return null==e?[]:ht(e,ao(e))},Te.functionsIn=function(e){return null==e?[]:ht(e,so(e))},Te.groupBy=ia,Te.initial=function(e){return ui(e,1)},Te.intersection=Wr,Te.intersectionBy=Hr,Te.intersectionWith=Ur,Te.invert=La,Te.invertBy=Pa,Te.invokeMap=oa,Te.iteratee=go,Te.keyBy=ra,Te.keys=ao,Te.keysIn=so,Te.map=Ti,Te.mapKeys=function(e,t){var n={};return t=Hn(t,3),ut(e,function(e,i,o){n[t(e,i,o)]=e}),n},Te.mapValues=function(e,t){var n={};return t=Hn(t,3),ut(e,function(e,i,o){n[i]=t(e,i,o)}),n},Te.matches=function(e){return Lt(nt(e,!0))},Te.matchesProperty=function(e,t){return Pt(e,nt(t,!0))},Te.memoize=Ri,Te.merge=Oa,Te.mergeWith=Ra,Te.method=Qa,Te.methodOf=Za,Te.mixin=fo,Te.negate=function(e){if("function"!=typeof e)throw new To("Expected a function");return function(){return!e.apply(this,arguments)}},Te.nthArg=function(e){return e=Ki(e),Bi(function(t){return Ot(t,e)})},Te.omit=Ba,Te.omitBy=function(e,t){return t=Hn(t),Nt(e,function(e,n){return!t(e,n)})},Te.once=function(e){return Li(2,e)},Te.orderBy=function(e,t,n,i){return null==e?[]:(ya(t)||(t=null==t?[]:[t]),n=i?q:n,ya(n)||(n=null==n?[]:[n]),Rt(e,t,n))},Te.over=Ja,Te.overArgs=pa,Te.overEvery=Ka,Te.overSome=es,Te.partial=ha,Te.partialRight=ma,Te.partition=aa,Te.pick=Na,Te.pickBy=function(e,t){return null==e?{}:Nt(e,Hn(t))},Te.property=yo,Te.propertyOf=function(e){return function(t){return null==e?q:mt(e,t)}},Te.pull=Vr,Te.pullAll=fi,Te.pullAllBy=function(e,t,n){return e&&e.length&&t&&t.length?Ft(e,t,Hn(n)):e},Te.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Ft(e,t,q,n):e},Te.pullAt=jr,Te.range=ts,Te.rangeRight=ns,Te.rearg=ga,Te.reject=function(e,t){var n=ya(e)?s:ct;return t=Hn(t,3),n(e,function(e,n,i){return!t(e,n,i)})},Te.remove=function(e,t){var n=[];if(!e||!e.length)return n;var i=-1,o=[],r=e.length;for(t=Hn(t,3);++i<r;){var a=e[i];t(a,i,e)&&(n.push(a),o.push(i))}return Wt(e,o),n},Te.rest=Bi,Te.reverse=bi,Te.sampleSize=xi,Te.set=function(e,t,n){return null==e?e:Vt(e,t,n)},Te.setWith=function(e,t,n,i){return i="function"==typeof i?i:q,null==e?e:Vt(e,t,n,i)},Te.shuffle=function(e){return xi(e,4294967295)},Te.slice=function(e,t,n){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&ei(e,t,n)?(t=0,n=i):(t=null==t?0:Ki(t),n=n===q?i:Ki(n)),jt(e,t,n)):[]},Te.sortBy=sa,Te.sortedUniq=function(e){return e&&e.length?$t(e):[]},Te.sortedUniqBy=function(e,t){return e&&e.length?$t(e,Hn(t)):[]},Te.split=function(e,t,n){return n&&"number"!=typeof n&&ei(e,t,n)&&(t=n=q),n=n===q?4294967295:n>>>0,n?(e=io(e))&&("string"==typeof t||null!=t&&!$i(t))&&(t=Xt(t),""==t&&ke.test(e))?on(e.match(Le),0,n):ar.call(e,t,n):[]},Te.spread=function(e,t){if("function"!=typeof e)throw new To("Expected a function");return t=t===q?0:er(Ki(t),0),Bi(function(i){var o=i[t];return i=on(i,0,t),o&&u(i,o),n(e,this,i)})},Te.tail=function(e){return di(e,1)},Te.take=function(e,t,n){return e&&e.length?(t=n||t===q?1:Ki(t),jt(e,0,0>t?0:t)):[]},Te.takeRight=function(e,t,n){var i=e?e.length:0;return i?(t=n||t===q?1:Ki(t),t=i-t,jt(e,0>t?0:t,i)):[]},Te.takeRightWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3),!1,!0):[]},Te.takeWhile=function(e,t){return e&&e.length?Zt(e,Hn(t,3)):[]},Te.tap=function(e,t){return t(e),e},Te.throttle=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new To("Expected a function");return ji(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),Oi(e,t,{leading:i,maxWait:t,trailing:o})},Te.thru=wi,Te.toArray=Zi,Te.toPairs=Ma,Te.toPairsIn=Da,Te.toPath=function(e){return ya(e)?d(e,si):Xi(e)?[e]:dn(Nr(e))},Te.toPlainObject=no,Te.transform=function(e,t,n){var i=ya(e)||Qi(e);if(t=Hn(t,4),null==n)if(i||ji(e)){var r=e.constructor;n=i?ya(e)?new r:[]:Hi(r)?ot(Qo(Object(e))):{}}else n={};return(i?o:ut)(e,function(e,i,o){return t(n,e,i,o)}),n},Te.unary=function(e){return Ai(e,1)},Te.union=qr,Te.unionBy=Gr,Te.unionWith=zr,Te.uniq=function(e){return e&&e.length?Qt(e):[]},Te.uniqBy=function(e,t){return e&&e.length?Qt(e,Hn(t)):[]},Te.uniqWith=function(e,t){return e&&e.length?Qt(e,q,t):[]},Te.unset=function(e,t){var n;if(null==e)n=!0;else{n=e;var i=t,i=ti(i,n)?[i]:nn(i);n=ai(n,i),i=si(gi(i)),n=!(null!=n&&bt(n,i))||delete n[i]}return n},Te.unzip=yi,Te.unzipWith=vi,Te.update=function(e,t,n){return null==e?e:Vt(e,t,("function"==typeof n?n:mo)(mt(e,t)),void 0)},Te.updateWith=function(e,t,n,i){return i="function"==typeof i?i:q,null!=e&&(e=Vt(e,t,("function"==typeof n?n:mo)(mt(e,t)),i)),e},Te.values=lo,Te.valuesIn=function(e){return null==e?[]:x(e,so(e))},Te.without=$r,Te.words=po,Te.wrap=function(e,t){return t=null==t?mo:t,ha(t,e)},Te.xor=Yr,Te.xorBy=Xr,Te.xorWith=Qr,Te.zip=Zr,Te.zipObject=function(e,t){return en(e||[],t||[],Qe)},Te.zipObjectDeep=function(e,t){return en(e||[],t||[],Vt)},Te.zipWith=Jr,Te.entries=Ma,Te.entriesIn=Da,Te.extend=_a,Te.extendWith=Ea,fo(Te,Te),Te.add=is,Te.attempt=za,Te.camelCase=Fa,Te.capitalize=co,Te.ceil=os,Te.clamp=function(e,t,n){return n===q&&(n=t,t=q),n!==q&&(n=to(n),n=n===n?n:0),t!==q&&(t=to(t),t=t===t?t:0),tt(to(e),t,n)},Te.clone=function(e){return nt(e,!1,!0)},Te.cloneDeep=function(e){return nt(e,!0,!0)},Te.cloneDeepWith=function(e,t){return nt(e,!0,!0,t)},Te.cloneWith=function(e,t){return nt(e,!1,!0,t)},Te.deburr=uo,Te.divide=rs,Te.endsWith=function(e,t,n){e=io(e),t=Xt(t);var i=e.length;return n=n===q?i:tt(Ki(n),0,i),n-=t.length,n>=0&&e.indexOf(t,n)==n},Te.eq=Ni,Te.escape=function(e){return(e=io(e))&&K.test(e)?e.replace(Z,O):e},Te.escapeRegExp=function(e){return(e=io(e))&&se.test(e)?e.replace(ae,"\\$&"):e},Te.every=function(e,t,n){var i=ya(e)?a:st;return n&&ei(e,t,n)&&(t=q),i(e,Hn(t,3))},Te.find=ta,Te.findIndex=pi,Te.findKey=function(e,t){return g(e,Hn(t,3),ut)},Te.findLast=na,Te.findLastIndex=hi,Te.findLastKey=function(e,t){return g(e,Hn(t,3),pt)},Te.floor=as,Te.forEach=_i,Te.forEachRight=Ei,Te.forIn=function(e,t){return null==e?e:xr(e,Hn(t,3),so)},Te.forInRight=function(e,t){return null==e?e:Sr(e,Hn(t,3),so)},Te.forOwn=function(e,t){return e&&ut(e,Hn(t,3))},Te.forOwnRight=function(e,t){return e&&pt(e,Hn(t,3))},Te.get=oo,Te.gt=fa,Te.gte=ba,Te.has=function(e,t){return null!=e&&zn(e,t,bt)},Te.hasIn=ro,Te.head=mi,Te.identity=mo,Te.includes=function(e,t,n,i){return e=Di(e)?e:lo(e),n=n&&!i?Ki(n):0,i=e.length,0>n&&(n=er(i+n,0)),Yi(e)?i>=n&&-1<e.indexOf(t,n):!!i&&-1<b(e,t,n)},Te.indexOf=function(e,t,n){var i=e?e.length:0;return i?(n=null==n?0:Ki(n),0>n&&(n=er(i+n,0)),b(e,t,n)):-1},Te.inRange=function(e,t,n){return t=to(t)||0,n===q?(n=t,t=0):n=to(n)||0,e=to(e),e>=tr(t,n)&&e<er(t,n)},Te.invoke=ka,Te.isArguments=Mi,Te.isArray=ya,Te.isArrayBuffer=function(e){return qi(e)&&"[object ArrayBuffer]"==No.call(e)},Te.isArrayLike=Di,Te.isArrayLikeObject=Fi,Te.isBoolean=function(e){return!0===e||!1===e||qi(e)&&"[object Boolean]"==No.call(e)},Te.isBuffer=va,Te.isDate=function(e){return qi(e)&&"[object Date]"==No.call(e)},Te.isElement=function(e){return!!e&&1===e.nodeType&&qi(e)&&!zi(e)},Te.isEmpty=function(e){if(Di(e)&&(ya(e)||Yi(e)||Hi(e.splice)||Mi(e)||va(e)))return!e.length;if(qi(e)){var t=Gn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size}for(var n in e)if(Oo.call(e,n))return!1;return!(mr&&ao(e).length)},Te.isEqual=function(e,t){return It(e,t)},Te.isEqualWith=function(e,t,n){var i=(n="function"==typeof n?n:q)?n(e,t):q;return i===q?It(e,t,n):!!i},Te.isError=Wi,Te.isFinite=function(e){return"number"==typeof e&&Zo(e)},Te.isFunction=Hi,Te.isInteger=Ui,Te.isLength=Vi,Te.isMap=function(e){return qi(e)&&"[object Map]"==Gn(e)},Te.isMatch=function(e,t){return e===t||_t(e,t,Vn(t))},Te.isMatchWith=function(e,t,n){return n="function"==typeof n?n:q,_t(e,t,Vn(t),n)},Te.isNaN=function(e){return Gi(e)&&e!=+e},Te.isNative=function(e){if(Rr(e))throw new Io("This method is not supported with `core-js`. Try https://github.com/es-shims.");return Et(e)},Te.isNil=function(e){return null==e},Te.isNull=function(e){return null===e},Te.isNumber=Gi,Te.isObject=ji,Te.isObjectLike=qi,Te.isPlainObject=zi,Te.isRegExp=$i,Te.isSafeInteger=function(e){return Ui(e)&&e>=-9007199254740991&&9007199254740991>=e},Te.isSet=function(e){return qi(e)&&"[object Set]"==Gn(e)},Te.isString=Yi,Te.isSymbol=Xi,Te.isTypedArray=Qi,Te.isUndefined=function(e){return e===q},Te.isWeakMap=function(e){return qi(e)&&"[object WeakMap]"==Gn(e)},Te.isWeakSet=function(e){return qi(e)&&"[object WeakSet]"==No.call(e)},Te.join=function(e,t){return e?Jo.call(e,t):""},Te.kebabCase=Wa,Te.last=gi,Te.lastIndexOf=function(e,t,n){var i=e?e.length:0;if(!i)return-1;var o=i;if(n!==q&&(o=Ki(n),o=(0>o?er(i+o,0):tr(o,i-1))+1),t!==t)return B(e,o-1,!0);for(;o--;)if(e[o]===t)return o;return-1},Te.lowerCase=Ha,Te.lowerFirst=Ua,Te.lt=Ca,Te.lte=wa,Te.max=function(e){return e&&e.length?lt(e,mo,ft):q},Te.maxBy=function(e,t){return e&&e.length?lt(e,Hn(t),ft):q},Te.mean=function(e){return v(e,mo)},Te.meanBy=function(e,t){return v(e,Hn(t))},Te.min=function(e){return e&&e.length?lt(e,mo,St):q},Te.minBy=function(e,t){return e&&e.length?lt(e,Hn(t),St):q},Te.stubArray=vo,Te.stubFalse=Co,Te.stubObject=function(){return{}},Te.stubString=function(){return""},Te.stubTrue=function(){return!0},Te.multiply=ss,Te.nth=function(e,t){return e&&e.length?Ot(e,Ki(t)):q},Te.noConflict=function(){return $e._===this&&($e._=Mo),this},Te.noop=bo,Te.now=Si,Te.pad=function(e,t,n){e=io(e);var i=(t=Ki(t))?U(e):0;return!t||i>=t?e:(t=(t-i)/2,An(Xo(t),n)+e+An(Yo(t),n))},Te.padEnd=function(e,t,n){e=io(e);var i=(t=Ki(t))?U(e):0;return t&&t>i?e+An(t-i,n):e},Te.padStart=function(e,t,n){e=io(e);var i=(t=Ki(t))?U(e):0;return t&&t>i?An(t-i,n)+e:e},Te.parseInt=function(e,t,n){return n||null==t?t=0:t&&(t=+t),e=io(e).replace(le,""),nr(e,t||(ge.test(e)?16:10))},Te.random=function(e,t,n){if(n&&"boolean"!=typeof n&&ei(e,t,n)&&(t=n=q),n===q&&("boolean"==typeof t?(n=t,t=q):"boolean"==typeof e&&(n=e,e=q)),e===q&&t===q?(e=0,t=1):(e=to(e)||0,t===q?(t=e,e=0):t=to(t)||0),e>t){var i=e;e=t,t=i}return n||e%1||t%1?(n=ir(),tr(e+n*(t-e+He("1e-"+((n+"").length-1))),t)):Ht(e,t)},Te.reduce=function(e,t,n){var i=ya(e)?p:C,o=3>arguments.length;return i(e,Hn(t,4),n,o,Er)},Te.reduceRight=function(e,t,n){var i=ya(e)?h:C,o=3>arguments.length;return i(e,Hn(t,4),n,o,Tr)},Te.repeat=function(e,t,n){return t=(n?ei(e,t,n):t===q)?1:Ki(t),Ut(io(e),t)},Te.replace=function(){var e=arguments,t=io(e[0]);return 3>e.length?t:or.call(t,e[1],e[2])},Te.result=function(e,t,n){t=ti(t,e)?[t]:nn(t);var i=-1,o=t.length;for(o||(e=q,o=1);++i<o;){var r=null==e?q:e[si(t[i])];r===q&&(i=o,r=n),e=Hi(r)?r.call(e):r}return e},Te.round=ls,Te.runInContext=j,Te.sample=function(e){e=Di(e)?e:lo(e);var t=e.length;return t>0?e[Ht(0,t-1)]:q},Te.size=function(e){if(null==e)return 0;if(Di(e)){var t=e.length;return t&&Yi(e)?U(e):t}return qi(e)&&(t=Gn(e),"[object Map]"==t||"[object Set]"==t)?e.size:ao(e).length},Te.snakeCase=Va,Te.some=function(e,t,n){var i=ya(e)?m:qt;return n&&ei(e,t,n)&&(t=q),i(e,Hn(t,3))},Te.sortedIndex=function(e,t){return Gt(e,t)},Te.sortedIndexBy=function(e,t,n){return zt(e,t,Hn(n))},Te.sortedIndexOf=function(e,t){var n=e?e.length:0;if(n){var i=Gt(e,t);if(n>i&&Ni(e[i],t))return i}return-1},Te.sortedLastIndex=function(e,t){return Gt(e,t,!0)},Te.sortedLastIndexBy=function(e,t,n){return zt(e,t,Hn(n),!0)},Te.sortedLastIndexOf=function(e,t){if(e&&e.length){var n=Gt(e,t,!0)-1;if(Ni(e[n],t))return n}return-1},Te.startCase=ja,Te.startsWith=function(e,t,n){return e=io(e),n=tt(Ki(n),0,e.length),e.lastIndexOf(Xt(t),n)==n},Te.subtract=cs,Te.sum=function(e){return e&&e.length?I(e,mo):0},Te.sumBy=function(e,t){return e&&e.length?I(e,Hn(t)):0},Te.template=function(e,t,n){var i=Te.templateSettings;n&&ei(e,t,n)&&(t=q),e=io(e),t=Ea({},t,i,ze),n=Ea({},t.imports,i.imports,ze);var o,r,a=ao(n),s=x(n,a),l=0;n=t.interpolate||Ie;var c="__p+='";n=Eo((t.escape||Ie).source+"|"+n.source+"|"+(n===ne?he:Ie).source+"|"+(t.evaluate||Ie).source+"|$","g");var d="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,i,a,s,d){return i||(i=a),c+=e.slice(l,d).replace(_e,R),n&&(o=!0,c+="'+__e("+n+")+'"),s&&(r=!0,c+="';"+s+";\n__p+='"),
i&&(c+="'+((__t=("+i+"))==null?'':__t)+'"),l=d+t.length,t}),c+="';",(t=t.variable)||(c="with(obj){"+c+"}"),c=(r?c.replace($,""):c).replace(Y,"$1").replace(X,"$1;"),c="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(r?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",t=za(function(){return Function(a,d+"return "+c).apply(q,s)}),t.source=c,Wi(t))throw t;return t},Te.times=function(e,t){if(e=Ki(e),1>e||e>9007199254740991)return[];var n=4294967295,i=tr(e,4294967295);for(t=Hn(t),e-=4294967295,i=_(i,t);++n<e;)t(n);return i},Te.toFinite=Ji,Te.toInteger=Ki,Te.toLength=eo,Te.toLower=function(e){return io(e).toLowerCase()},Te.toNumber=to,Te.toSafeInteger=function(e){return tt(Ki(e),-9007199254740991,9007199254740991)},Te.toString=io,Te.toUpper=function(e){return io(e).toUpperCase()},Te.trim=function(e,t,n){return(e=io(e))&&(n||t===q)?e.replace(le,""):e&&(t=Xt(t))?(e=e.match(Le),t=t.match(Le),on(e,A(e,t),L(e,t)+1).join("")):e},Te.trimEnd=function(e,t,n){return(e=io(e))&&(n||t===q)?e.replace(de,""):e&&(t=Xt(t))?(e=e.match(Le),t=L(e,t.match(Le))+1,on(e,0,t).join("")):e},Te.trimStart=function(e,t,n){return(e=io(e))&&(n||t===q)?e.replace(ce,""):e&&(t=Xt(t))?(e=e.match(Le),t=A(e,t.match(Le)),on(e,t).join("")):e},Te.truncate=function(e,t){var n=30,i="...";if(ji(t))var o="separator"in t?t.separator:o,n="length"in t?Ki(t.length):n,i="omission"in t?Xt(t.omission):i;e=io(e);var r=e.length;if(ke.test(e))var a=e.match(Le),r=a.length;if(n>=r)return e;if(r=n-U(i),1>r)return i;if(n=a?on(a,0,r).join(""):e.slice(0,r),o===q)return n+i;if(a&&(r+=n.length-r),$i(o)){if(e.slice(r).search(o)){var s=n;for(o.global||(o=Eo(o.source,io(me.exec(o))+"g")),o.lastIndex=0;a=o.exec(s);)var l=a.index;n=n.slice(0,l===q?r:l)}}else e.indexOf(Xt(o),r)!=r&&(o=n.lastIndexOf(o),o>-1&&(n=n.slice(0,o)));return n+i},Te.unescape=function(e){return(e=io(e))&&J.test(e)?e.replace(Q,V):e},Te.uniqueId=function(e){var t=++Ro;return io(e)+t},Te.upperCase=qa,Te.upperFirst=Ga,Te.each=_i,Te.eachRight=Ei,Te.first=mi,fo(Te,function(){var e={};return ut(Te,function(t,n){Oo.call(Te.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Te.VERSION="4.13.1",o("bind bindKey curry curryRight partial partialRight".split(" "),function(e){Te[e].placeholder=Te}),o(["drop","take"],function(e,t){De.prototype[e]=function(n){var i=this.__filtered__;if(i&&!t)return new De(this);n=n===q?1:er(Ki(n),0);var o=this.clone();return i?o.__takeCount__=tr(n,o.__takeCount__):o.__views__.push({size:tr(n,4294967295),type:e+(0>o.__dir__?"Right":"")}),o},De.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var n=t+1,i=1==n||3==n;De.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Hn(e,3),type:n}),t.__filtered__=t.__filtered__||i,t}}),o(["head","last"],function(e,t){var n="take"+(t?"Right":"");De.prototype[e]=function(){return this[n](1).value()[0]}}),o(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");De.prototype[e]=function(){return this.__filtered__?new De(this):this[n](1)}}),De.prototype.compact=function(){return this.filter(mo)},De.prototype.find=function(e){return this.filter(e).head()},De.prototype.findLast=function(e){return this.reverse().find(e)},De.prototype.invokeMap=Bi(function(e,t){return"function"==typeof e?new De(this):this.map(function(n){return wt(n,e,t)})}),De.prototype.reject=function(e){return e=Hn(e,3),this.filter(function(t){return!e(t)})},De.prototype.slice=function(e,t){e=Ki(e);var n=this;return n.__filtered__&&(e>0||0>t)?new De(n):(0>e?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==q&&(t=Ki(t),n=0>t?n.dropRight(-t):n.take(t-e)),n)},De.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},De.prototype.toArray=function(){return this.take(4294967295)},ut(De.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),i=/^(?:head|last)$/.test(t),o=Te[i?"take"+("last"==t?"Right":""):t],r=i||/^find/.test(t);o&&(Te.prototype[t]=function(){function t(e){return e=o.apply(Te,u([e],s)),i&&p?e[0]:e}var a=this.__wrapped__,s=i?[1]:arguments,l=a instanceof De,c=s[0],d=l||ya(a);d&&n&&"function"==typeof c&&1!=c.length&&(l=d=!1);var p=this.__chain__,h=!!this.__actions__.length,c=r&&!p,l=l&&!h;return!r&&d?(a=l?a:new De(this),a=e.apply(a,s),a.__actions__.push({func:wi,args:[t],thisArg:q}),new Me(a,p)):c&&l?e.apply(this,s):(a=this.thru(t),c?i?a.value()[0]:a.value():a)})}),o("pop push shift sort splice unshift".split(" "),function(e){var t=xo[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);Te.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var o=this.value();return t.apply(ya(o)?o:[],e)}return this[n](function(n){return t.apply(ya(n)?n:[],e)})}}),ut(De.prototype,function(e,t){var n=Te[t];if(n){var i=n.name+"";(gr[i]||(gr[i]=[])).push({name:t,func:n})}}),gr[En(q,2).name]=[{name:"wrapper",func:q}],De.prototype.clone=function(){var e=new De(this.__wrapped__);return e.__actions__=dn(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=dn(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=dn(this.__views__),e},De.prototype.reverse=function(){if(this.__filtered__){var e=new De(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},De.prototype.value=function(){var e,t=this.__wrapped__.value(),n=this.__dir__,i=ya(t),o=0>n,r=i?t.length:0;e=r;for(var a=this.__views__,s=0,l=-1,c=a.length;++l<c;){var d=a[l],u=d.size;switch(d.type){case"drop":s+=u;break;case"dropRight":e-=u;break;case"take":e=tr(e,s+u);break;case"takeRight":s=er(s,e-u)}}if(e={start:s,end:e},a=e.start,s=e.end,e=s-a,o=o?s:a-1,a=this.__iteratees__,s=a.length,l=0,c=tr(e,this.__takeCount__),!i||200>r||r==e&&c==e)return Jt(t,this.__actions__);i=[];e:for(;e--&&c>l;){for(o+=n,r=-1,d=t[o];++r<s;){var p=a[r],u=p.type,p=(0,p.iteratee)(d);if(2==u)d=p;else if(!p){if(1==u)continue e;break e}}i[l++]=d}return i},Te.prototype.at=Kr,Te.prototype.chain=function(){return Ci(this)},Te.prototype.commit=function(){return new Me(this.value(),this.__chain__)},Te.prototype.next=function(){this.__values__===q&&(this.__values__=Zi(this.value()));var e=this.__index__>=this.__values__.length,t=e?q:this.__values__[this.__index__++];return{done:e,value:t}},Te.prototype.plant=function(e){for(var t,n=this;n instanceof xe;){var i=ci(n);i.__index__=0,i.__values__=q,t?o.__wrapped__=i:t=i;var o=i,n=n.__wrapped__}return o.__wrapped__=e,t},Te.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof De?(this.__actions__.length&&(e=new De(this)),e=e.reverse(),e.__actions__.push({func:wi,args:[bi],thisArg:q}),new Me(e,this.__chain__)):this.thru(bi)},Te.prototype.toJSON=Te.prototype.valueOf=Te.prototype.value=function(){return Jt(this.__wrapped__,this.__actions__)},qo&&(Te.prototype[qo]=Ii),Te}var q,G=1/0,z=NaN,$=/\b__p\+='';/g,Y=/\b(__p\+=)''\+/g,X=/(__e\(.*?\)|\b__t\))\+'';/g,Q=/&(?:amp|lt|gt|quot|#39|#96);/g,Z=/[&<>"'`]/g,J=RegExp(Q.source),K=RegExp(Z.source),ee=/<%-([\s\S]+?)%>/g,te=/<%([\s\S]+?)%>/g,ne=/<%=([\s\S]+?)%>/g,ie=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oe=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,ae=/[\\^$.*+?()[\]{}|]/g,se=RegExp(ae.source),le=/^\s+|\s+$/g,ce=/^\s+/,de=/\s+$/,ue=/[a-zA-Z0-9]+/g,pe=/\\(\\)?/g,he=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,me=/\w*$/,ge=/^0x/i,fe=/^[-+]0x[0-9a-f]+$/i,be=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ve=/^0o[0-7]+$/i,Ce=/^(?:0|[1-9]\d*)$/,we=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Ie=/($^)/,_e=/['\n\r\u2028\u2029\\]/g,Ee="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",Te="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Ee,xe="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Se=RegExp("['’]","g"),Ae=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),Le=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+xe+Ee,"g"),Pe=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['’](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['’](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['’](?:D|LL|M|RE|S|T|VE))?|\\d+",Te].join("|"),"g"),ke=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Oe=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Re="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ isFinite parseInt setTimeout".split(" "),Be={};Be["[object Float32Array]"]=Be["[object Float64Array]"]=Be["[object Int8Array]"]=Be["[object Int16Array]"]=Be["[object Int32Array]"]=Be["[object Uint8Array]"]=Be["[object Uint8ClampedArray]"]=Be["[object Uint16Array]"]=Be["[object Uint32Array]"]=!0,Be["[object Arguments]"]=Be["[object Array]"]=Be["[object ArrayBuffer]"]=Be["[object Boolean]"]=Be["[object DataView]"]=Be["[object Date]"]=Be["[object Error]"]=Be["[object Function]"]=Be["[object Map]"]=Be["[object Number]"]=Be["[object Object]"]=Be["[object RegExp]"]=Be["[object Set]"]=Be["[object String]"]=Be["[object WeakMap]"]=!1;var Ne={};Ne["[object Arguments]"]=Ne["[object Array]"]=Ne["[object ArrayBuffer]"]=Ne["[object DataView]"]=Ne["[object Boolean]"]=Ne["[object Date]"]=Ne["[object Float32Array]"]=Ne["[object Float64Array]"]=Ne["[object Int8Array]"]=Ne["[object Int16Array]"]=Ne["[object Int32Array]"]=Ne["[object Map]"]=Ne["[object Number]"]=Ne["[object Object]"]=Ne["[object RegExp]"]=Ne["[object Set]"]=Ne["[object String]"]=Ne["[object Symbol]"]=Ne["[object Uint8Array]"]=Ne["[object Uint8ClampedArray]"]=Ne["[object Uint16Array]"]=Ne["[object Uint32Array]"]=!0,Ne["[object Error]"]=Ne["[object Function]"]=Ne["[object WeakMap]"]=!1;var Me={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Fe={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},We={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},He=parseFloat,Ue=parseInt,Ve="object"==typeof exports&&exports,je=Ve&&"object"==typeof module&&module,qe=je&&je.exports===Ve,Ge=P("object"==typeof self&&self),ze=P("object"==typeof this&&this),$e=P("object"==typeof global&&global)||Ge||ze||Function("return this")(),Ye=j();(Ge||{}).Cbola._=Ye,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Ye}):je?((je.exports=Ye).Cbola._=Ye,Ve.Cbola._=Ye):$e.Cbola._=Ye}).call(this);var CryptoJSCbola=CryptoJSCbola||function(e,t){var n={},i=n.lib={},o=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,e=e.sigBytes;if(this.clamp(),i%4)for(var o=0;e>o;o++)t[i+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((i+o)%4);else if(65535<n.length)for(o=0;e>o;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(4294967296*e.random()|0);return r.create(n,t)}}),a=n.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],i=0;e>i;i++){var o=t[i>>>2]>>>24-8*(i%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return r.create(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],i=0;e>i;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-8*(i%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return r.create(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,o=e.min(4*t,o);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=o}return r.create(l,o)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({init:function(){this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return u.HMAC.create(e,n).finalize(t)}}});var u=n.algo={};return n}(Math);!function(){var e=CryptoJSCbola,t=e.lib,n=t.WordArray,t=t.Hasher,i=[],o=e.algo.SHA1=t.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var n=this._hash.words,o=n[0],r=n[1],a=n[2],s=n[3],l=n[4],c=0;80>c;c++){if(16>c)i[c]=0|e[t+c];else{var d=i[c-3]^i[c-8]^i[c-14]^i[c-16];i[c]=d<<1|d>>>31}d=(o<<5|o>>>27)+l+i[c],d=20>c?d+((r&a|~r&s)+1518500249):40>c?d+((r^a^s)+1859775393):60>c?d+((r&a|r&s|a&s)-1894007588):d+((r^a^s)-899497514),l=s,s=a,a=r<<30|r>>>2,r=o,o=d}n[0]=n[0]+o|0,n[1]=n[1]+r|0,n[2]=n[2]+a|0,n[3]=n[3]+s|0,n[4]=n[4]+l|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+15]=n,e.sigBytes=4*t.length,this._process()}});e.SHA1=t._createHelper(o),e.HmacSHA1=t._createHmacHelper(o)}();var CryptoJSCbola=CryptoJSCbola||function(e,t){var n={},i=n.lib={},o=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var n=new e;return t&&n.mixIn(t),n.$super=this,n},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=i.WordArray=o.extend({init:function(e,n){e=this.words=e||[],this.sigBytes=n!=t?n:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,n=e.words,i=this.sigBytes,e=e.sigBytes;if(this.clamp(),i%4)for(var o=0;e>o;o++)t[i+o>>>2]|=(n[o>>>2]>>>24-8*(o%4)&255)<<24-8*((i+o)%4);else if(65535<n.length)for(o=0;e>o;o+=4)t[i+o>>>2]=n[o>>>2];else t.push.apply(t,n);return this.sigBytes+=e,this},clamp:function(){var t=this.words,n=this.sigBytes;t[n>>>2]&=4294967295<<32-8*(n%4),t.length=e.ceil(n/4)},clone:function(){var e=o.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var n=[],i=0;t>i;i+=4)n.push(4294967296*e.random()|0);return r.create(n,t)}}),a=n.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],i=0;e>i;i++){var o=t[i>>>2]>>>24-8*(i%4)&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i+=2)n[i>>>3]|=parseInt(e.substr(i,2),16)<<24-4*(i%8);return r.create(n,t/2)}},l=a.Latin1={stringify:function(e){for(var t=e.words,e=e.sigBytes,n=[],i=0;e>i;i++)n.push(String.fromCharCode(t[i>>>2]>>>24-8*(i%4)&255));return n.join("")},parse:function(e){for(var t=e.length,n=[],i=0;t>i;i++)n[i>>>2]|=(255&e.charCodeAt(i))<<24-8*(i%4);return r.create(n,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},d=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var n=this._data,i=n.words,o=n.sigBytes,a=this.blockSize,s=o/(4*a),s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0),t=s*a,o=e.min(4*t,o);if(t){for(var l=0;t>l;l+=a)this._doProcessBlock(i,l);l=i.splice(0,t),n.sigBytes-=o}return r.create(l,o)},clone:function(){var e=o.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=d.extend({init:function(){this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=d.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,n){return e.create(n).finalize(t)}},_createHmacHelper:function(e){return function(t,n){return u.HMAC.create(e,n).finalize(t)}}});var u=n.algo={};return n}(Math);if(function(e){function t(e,t,n,i,o,r,a){return e=e+(t&n|~t&i)+o+a,(e<<r|e>>>32-r)+t}function n(e,t,n,i,o,r,a){return e=e+(t&i|n&~i)+o+a,(e<<r|e>>>32-r)+t}function i(e,t,n,i,o,r,a){return e=e+(t^n^i)+o+a,(e<<r|e>>>32-r)+t}function o(e,t,n,i,o,r,a){return e=e+(n^(t|~i))+o+a,(e<<r|e>>>32-r)+t}var r=CryptoJSCbola,a=r.lib,s=a.WordArray,a=a.Hasher,l=r.algo,c=[];!function(){for(var t=0;64>t;t++)c[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var a=0;16>a;a++){var s=r+a,l=e[s];e[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var s=this._hash.words,l=s[0],d=s[1],u=s[2],p=s[3],a=0;64>a;a+=4)16>a?(l=t(l,d,u,p,e[r+a],7,c[a]),p=t(p,l,d,u,e[r+a+1],12,c[a+1]),u=t(u,p,l,d,e[r+a+2],17,c[a+2]),d=t(d,u,p,l,e[r+a+3],22,c[a+3])):32>a?(l=n(l,d,u,p,e[r+(a+1)%16],5,c[a]),p=n(p,l,d,u,e[r+(a+6)%16],9,c[a+1]),u=n(u,p,l,d,e[r+(a+11)%16],14,c[a+2]),d=n(d,u,p,l,e[r+a%16],20,c[a+3])):48>a?(l=i(l,d,u,p,e[r+(3*a+5)%16],4,c[a]),p=i(p,l,d,u,e[r+(3*a+8)%16],11,c[a+1]),u=i(u,p,l,d,e[r+(3*a+11)%16],16,c[a+2]),d=i(d,u,p,l,e[r+(3*a+14)%16],23,c[a+3])):(l=o(l,d,u,p,e[r+3*a%16],6,c[a]),p=o(p,l,d,u,e[r+(3*a+7)%16],10,c[a+1]),u=o(u,p,l,d,e[r+(3*a+14)%16],15,c[a+2]),d=o(d,u,p,l,e[r+(3*a+5)%16],21,c[a+3]));s[0]=s[0]+l|0,s[1]=s[1]+d|0,s[2]=s[2]+u|0,s[3]=s[3]+p|0},_doFinalize:function(){var e=this._data,t=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;for(t[i>>>5]|=128<<24-i%32,t[(i+64>>>9<<4)+14]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)n=e[t],e[t]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}}),r.MD5=a._createHelper(l),r.HmacMD5=a._createHmacHelper(l)}(Math),function(e,t,n,i,o,r,a,s,l){function c(e){var t,n=e.length,o=this,r=0,a=o.i=o.j=0,s=o.S=[];for(n||(e=[n++]);i>r;)s[r]=r++;for(r=0;i>r;r++)s[r]=s[a=y&a+e[r%n]+(t=s[r])],s[a]=t;(o.g=function(e){for(var t,n=0,r=o.i,a=o.j,s=o.S;e--;)t=s[r=y&r+1],n=n*i+s[y&(s[r]=s[a=y&a+t])+(s[a]=t)];return o.i=r,o.j=a,n})(i)}function d(e,t){var n,i=[],o=typeof e;if(t&&"object"==o)for(n in e)try{i.push(d(e[n],t-1))}catch(r){}return i.length?i:"string"==o?e:e+"\x00"}function u(e,t){for(var n,i=e+"",o=0;o<i.length;)t[y&o]=y&(n^=19*t[y&o])+i.charCodeAt(o++);return h(t)}function p(n){try{return m?h(m.randomBytes(i)):(e.crypto.getRandomValues(n=new Uint8Array(i)),h(n))}catch(o){return[+new Date,e,(n=e.navigator)&&n.plugins,e.screen,h(t)]}}function h(e){return String.fromCharCode.apply(0,e)}var m,g=n.pow(i,o),f=n.pow(2,r),b=2*f,y=i-1,v=n["cbolaSeed"+l]=function(e,r,a){var s=[];r=1==r?{entropy:!0}:r||{};var m=u(d(r.entropy?[e,h(t)]:null==e?p():e,3),s),y=new c(s);return u(h(y.S),t),(r.pass||a||function(e,t,i){return i?(n[l]=e,t):e})(function(){for(var e=y.g(o),t=g,n=0;f>e;)e=(e+n)*i,t*=i,n=y.g(1);for(;e>=b;)e/=2,t/=2,n>>>=1;return(e+n)/t},m,"global"in r?r.global:this==n)};if(u(n[l](),t),a&&a.exports){a.exports=v;try{m=require("crypto")}catch(C){}}else s&&s.amd&&s(function(){return v})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random"),Bilimbi=function(){function e(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return!!(t>0||navigator.userAgent.match(/Trident.*rv\:11\./)||navigator.userAgent.match(/Edge\//))}function t(){function t(e,t,n){"undefined"!=typeof e&&null!==e||console.log("Target elem is null");try{return a?3===n.nodeType?e.insertAdjacentHTML(t,n.nodeValue):e.insertAdjacentElement(t,n):(t=t.toLowerCase(),"beforebegin"===t?e.parentElement?e.parentElement.insertBefore(n,e):e.parentNode?e.parentNode.insertBefore(n,e):console.log("parent of targetElem is undefined. targetElem: ",e):"afterend"===t&&(e.parentElement&&e.nextElementSibling?e.parentElement.insertBefore(n,e.nextElementSibling):e.parentNode&&e.nextElementSibling?e.parentNode.insertBefore(n,e.nextElementSibling):console.log("parent of targetElem is undefined or nextElementSibling. targetElem: ",e)),e.insertAdjacentHTML(t,n.outerHTML))}catch(i){console.log("Exception in insertAdjacentElement: ",e,i)}}function n(){}function i(){document.write=h.write,document.writeln=h.writeln,document.open=h.open,document.close=h.close}function o(){if(u.length<1)return void(this.isWriting=!1);if(!this.isWriting){var e=u.pop();e.insertAdjacentElement=t,this.isWriting=!0,e.onComplete=function(){this.isWriting=!1,d.completed=!0,o()}.bind(this),d=e,d.completed=!1,e.optionalTag&&(e.elem.dataset.bilimbiTag=e.optionalTag),e.write()}}function r(e){var n=p[d.id+"-"+e];if("undefined"!=typeof n){p[d.id+"-"+e]="";var i=document.getElementById(Bilimbi.PLACEHOLDER+"doc-"+d.id+"-"+e),o=document.createRange();o.selectNode(document.body);for(var r=o.createContextualFragment(n),a=d.pendingScripts.length,s=r.querySelectorAll("script"),l=0;l<s.length;l++){var c=s[l],u=document.createElement("span");u.id=Bilimbi.PLACEHOLDER+d.id+"-"+d.numberOfScripts,c.parentElement?t(c,"beforeBegin",u):t(i,"afterEnd",u),c.dataset.proxyId=d.numberOfScripts,d.numberOfScripts++;var h=c.parentElement;h||(h=r),h.removeChild(c),d.pendingScripts.splice(a,0,c)}for(l=0;l<r.childNodes.length;l++)t(i,"beforeBegin",r.childNodes[l])}}var a=!0;"undefined"==typeof document.body.insertAdjacentElement&&(a=!1);var s=e(),l=[],c={prefetchRemoteScripts:!1},d=null,u=[],p=[],h={write:document.write,writeln:document.writeln,open:document.open,close:document.close},m={setOptions:function(e){c=e},write:function(e,t,n){if(s)postscribe(e,t);else{var i=new Bilimbi.Writer(t,e,l,c,n);u.unshift(i),o()}},runNextScriptIfNeeded:function(e){r(e),i(),d.cleanupAfterScript(e),d.handleNextPendingScript()},overrideDocWrite:function(e){document.write=function(t){p[d.id+"-"+e]?p[d.id+"-"+e]+=t:p[d.id+"-"+e]=t,p[d.id+"-"+e].endsWith(">")&&r(e)},document.open=n,document.close=n,document.writeln=function(e){document.write(e+"\n")}},addScriptTransformer:function(e){l.push(e)},getActiveTag:function(){return d.optionalTag},getCompletedScripts:function(){return d.completedScripts},isActive:function(){return d&&!d.completed}};return m}var n;return{getInstance:function(){return n||(n=t()),n}}}(),Bilimbi.NS="blmb",Bilimbi.PLACEHOLDER=Bilimbi.NS+"-placeholder-",Bilimbi.DEBUG=!1,Bilimbi.Writer=function(e,t,n,i,o){this.scriptTransformers=n,this.options=i,this.elem=t,this.html=e,this.numberOfScripts=0,this.pendingScripts=[],this.completedScripts=[],this.id=Bilimbi.Writer.instanceCount++,this.optionalTag=o},Bilimbi.Writer.instanceCount=0,Bilimbi.Writer.prototype.write=function(){var e=document.createRange();e.selectNode(document.body);for(var t=e.createContextualFragment(this.html),n=t.querySelectorAll("script"),i=0;i<n.length;i++){var o=n[i],r=document.createElement("span");r.id=Bilimbi.PLACEHOLDER+this.id+"-"+this.numberOfScripts,this.insertAdjacentElement(o,"beforeBegin",r),o.dataset.proxyId=this.numberOfScripts,this.numberOfScripts++;var a=o.parentElement;a||(a=t),a.removeChild(o),this.pendingScripts.unshift(o)}this.elem.innerHTML="",this.elem.appendChild(t),this.handleNextPendingScript()},Bilimbi.Writer.prototype.onComplete=function(){},Bilimbi.Writer.prototype.fetchNextScript=function(e){var t=this.pendingScripts.pop(),n="undefined"!=typeof t.src&&""!==t.src&&null!==t.src;if(n?this.completedScripts.push({type:"remote",src:t.src}):this.completedScripts.push({type:"local",content:t.innerHTML}),n&&this.options.prefetchRemoteScripts){var i="http://pde.carambo.la/GetHtmlContent?url="+encodeURIComponent(t.src);fetch(i,{cache:"no-cache"}).then(function(e){return e.json()}).then(function(n){null!==n&&(t.innerHTML=n.HtmlContent),e(t)})["catch"](function(n){console.warn("fetching remote script src failed:",t.src,"skipping..."),e(null)})}else e(t)},Bilimbi.Writer.prototype.handleNextPendingScript=function(){function e(e){return function(e){return function(){Bilimbi.getInstance().runNextScriptIfNeeded(e)}}(e)}if(this.pendingScripts.length>0){var t=this;this.fetchNextScript(function(n){if(null!==n){var i=n,o=null,r="undefined"!=typeof i.src&&""!==i.src&&null!==i.src;this.options.prefetchRemoteScripts&&(o=i.src,i.removeAttribute("src"),r=!1);for(var a=0;a<t.scriptTransformers.length;a++)i=t.scriptTransformers[a](i);i.textContent.startsWith("Bilimbi.getInstance()")&&handleNextPendingScript();var s=i.dataset.proxyId,l=document.getElementById(Bilimbi.PLACEHOLDER+t.id+"-"+s),c=document.createElement("script");c.dataset.proxyWrappersId=s,c.innerHTML="Bilimbi.getInstance().overrideDocWrite("+s+");",t.insertAdjacentElement(l,"beforeBegin",c);var d=document.createElement("span");if(d.id=Bilimbi.PLACEHOLDER+"doc-"+t.id+"-"+s,t.insertAdjacentElement(l,"afterEnd",d),null!=o){var u=document.createElement("div");u.innerHTML="<script src="+o+"</script>";var p=u.children[0];t.insertAdjacentElement(l,"afterEnd",p)}if(r)i.onreadystatechange=e(s),i.onload=e(s),t.insertAdjacentElement(l,"afterEnd",i);else{var h=document.createElement("script");h.dataset.proxyWrappersId=s,h.innerHTML="Bilimbi.getInstance().runNextScriptIfNeeded("+s+");",t.insertAdjacentElement(l,"afterEnd",i),t.insertAdjacentElement(i,"afterEnd",h)}}}.bind(this))}else this.cleanupWhenDone(),this.onComplete()},Bilimbi.Writer.prototype.cleanupAfterScript=function(e){if(!Bilimbi.DEBUG){var t=document.getElementById(Bilimbi.PLACEHOLDER+this.id+"-"+e);t&&t.parentElement.removeChild(t);var n=document.getElementById(Bilimbi.PLACEHOLDER+"doc-"+this.id+"-"+e);n&&n.parentElement.removeChild(n);var i=document.querySelector('[data-proxy-id="'+e+'"]');i&&(i.dataset[Bilimbi.NS+"Done"]=!0,delete i.dataset.proxyId);var o=document.querySelectorAll('[data-proxy-wrappers-id="'+e+'"]');o.length>0&&o[0].parentElement.removeChild(o[0]),o.length>1&&o[1].parentElement.removeChild(o[1])}},Bilimbi.Writer.prototype.cleanupWhenDone=function(){if(!Bilimbi.DEBUG)for(var e=this.elem.querySelectorAll("[data-"+Bilimbi.NS+'-done="true"]'),t=0;t<e.length;t++)delete e[t].dataset[Bilimbi.NS+"Done"]},function(){function e(e,s){e=e||"",s=s||{};for(var l in t)t.hasOwnProperty(l)&&(s.autoFix&&(s["fix_"+l]=!0),s.fix=s.fix||s["fix_"+l]);var c=[],d=document.createElement("div"),u=function(e){return"string"==typeof e&&-1!==e.indexOf("&")?(d.innerHTML=e,d.textContent||d.innerText||e):e},p=function(t){e+=t},h=function(t){e=t+e},m={comment:/^<!--/,endTag:/^<\//,atomicTag:/^<\s*(script|style|noscript|iframe|textarea)[\s\/>]/i,startTag:/^</,chars:/^[^<]/},g={comment:function(){var t=e.indexOf("-->");if(t>=0){var n=e.substr(4,t-1);return{content:n,length:t+3}}},endTag:function(){var t=e.match(i);return t?{tagName:t[1],length:t[0].length}:void 0},atomicTag:function(){var t=g.startTag();if(t){var n=e.slice(t.length);if(n.match(new RegExp("</\\s*"+t.tagName+"\\s*>","i"))){var i=n.match(new RegExp("([\\s\\S]*?)</\\s*"+t.tagName+"\\s*>","i"));if(i)return{tagName:t.tagName,attrs:t.attrs,content:i[1],length:i[0].length+t.length}}}},startTag:function(){var t=e.indexOf(">");if(-1===t)return null;var i=e.match(n);if(i){var a={},s={},l=i[2];return i[2].replace(o,function(e,t){if(arguments[2]||arguments[3]||arguments[4]||arguments[5])if(arguments[5])a[arguments[5]]="",s[t]=!0;else{var n=arguments[2]||arguments[3]||arguments[4]||r.test(t)&&t||"";a[t]=u(n)}else a[t]=null;l=l.replace(e,"")}),{tagName:i[1],attrs:a,booleanAttrs:s,rest:l,unary:!!i[3],length:i[0].length}}},chars:function(){var t=e.indexOf("<");return{length:t>=0?t:e.length}}},f=function(){for(var t in m)if(m[t].test(e)){a&&console.log("suspected "+t);var n=g[t]();return n?(a&&console.log("parsed "+t,n),n.type=n.type||t,n.text=e.substr(0,n.length),e=e.slice(n.length),n):null}},b=function(e){for(var t;t=f();)if(e[t.type]&&e[t.type](t)===!1)return},y=function(){var t=e;return e="",t},v=function(){return e};return s.fix&&!function(){var t=/^(AREA|BASE|BASEFONT|BR|COL|FRAME|HR|IMG|INPUT|ISINDEX|LINK|META|PARAM|EMBED)$/i,n=/^(COLGROUP|DD|DT|LI|OPTIONS|P|TD|TFOOT|TH|THEAD|TR)$/i,i=[];
i.last=function(){return this[this.length-1]},i.lastTagNameEq=function(e){var t=this.last();return t&&t.tagName&&t.tagName.toUpperCase()===e.toUpperCase()},i.containsTagName=function(e){for(var t,n=0;t=this[n];n++)if(t.tagName===e)return!0;return!1};var o=function(e){return e&&"startTag"===e.type&&(e.unary=t.test(e.tagName)||e.unary,e.html5Unary=!/\/>$/.test(e.text)),e},r=f,a=function(){var t=e,n=o(r());return e=t,n},l=function(){var e=i.pop();h("</"+e.tagName+">")},c={startTag:function(e){var t=e.tagName;"TR"===t.toUpperCase()&&i.lastTagNameEq("TABLE")?(h("<TBODY>"),u()):s.fix_selfClose&&n.test(t)&&i.containsTagName(t)?i.lastTagNameEq(t)?l():(h("</"+e.tagName+">"),u()):e.unary||i.push(e)},endTag:function(e){var t=i.last();t?s.fix_tagSoup&&!i.lastTagNameEq(e.tagName)?l():i.pop():s.fix_tagSoup&&d()}},d=function(){r(),u()},u=function(){var e=a();e&&c[e.type]&&c[e.type](e)};f=function(){return u(),o(r())}}(),{append:p,readToken:f,readTokens:b,clear:y,rest:v,stack:c}}var t=function(){var e,t={},n=this.document.createElement("div");return e="<P><I></P></I>",n.innerHTML=e,t.tagSoup=n.innerHTML!==e,n.innerHTML="<P><i><P></P></i></P>",t.selfClose=2===n.childNodes.length,t}(),n=/^<([\-A-Za-z0-9_]+)((?:\s+[\w\-]+(?:\s*=?\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,i=/^<\/([\-A-Za-z0-9_]+)[^>]*>/,o=/(?:([\-A-Za-z0-9_]+)\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))|(?:([\-A-Za-z0-9_]+)(\s|$)+)/g,r=/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noresize|noshade|nowrap|readonly|selected)$/i,a=!1;e.supports=t,e.tokenToString=function(e){var t={comment:function(e){return"<!--"+e.content},endTag:function(e){return"</"+e.tagName+">"},atomicTag:function(e){return a&&console.log(e),t.startTag(e)+e.content+t.endTag(e)},startTag:function(e){var t="<"+e.tagName;for(var n in e.attrs){t+=" "+n;var i=e.attrs[n];"undefined"!=typeof e.booleanAttrs&&"undefined"!=typeof e.booleanAttrs[n]||(t+='="'+(i?i.replace(/(^|[^\\])"/g,'$1\\"'):"")+'"')}return e.rest&&(t+=e.rest),t+(e.unary&&!e.html5Unary?"/>":">")},chars:function(e){return e.text}};return t[e.type](e)},e.escapeAttributes=function(e){var t={};for(var n in e){var i=e[n];t[n]=i&&i.replace(/(^|[^\\])"/g,'$1\\"')}return t};for(var s in t)e.browserHasFlaw=e.browserHasFlaw||!t[s]&&s;this.htmlParser=e}(),function(){function e(){}function t(e){return e!==p&&null!==e}function n(e){return"function"==typeof e}function i(e,t,n){var i,o=e&&e.length||0;for(i=0;o>i;i++)t.call(n,e[i],i)}function o(e,t,n){var i;for(i in e)e.hasOwnProperty(i)&&t.call(n,i,e[i])}function r(e,t){return o(t,function(t,n){e[t]=n}),e}function a(e,n){return e=e||{},o(n,function(n,i){t(e[n])||(e[n]=i)}),e}function s(e){try{return m.call(e)}catch(t){var n=[];return i(e,function(e){n.push(e)}),n}}function l(e){return e&&"tagName"in e?!!~e.tagName.toLowerCase().indexOf("script"):!1}function c(e){return e&&"tagName"in e?!!~e.tagName.toLowerCase().indexOf("style"):!1}var d={afterAsync:e,afterDequeue:e,afterStreamStart:e,afterWrite:e,autoFix:!0,beforeEnqueue:e,beforeWriteToken:function(e){return e},beforeWrite:function(e){return e},done:function(){},error:e,releaseAsync:!1},u=this,p=void 0;if(!u.postscribe){var h=!1,m=Array.prototype.slice,g=function(e){return e[e.length-1]},f=function(){function e(e,n,i){var o=d+n;if(2===arguments.length){var r=e.getAttribute(o);return t(r)?String(r):r}t(i)&&""!==i?e.setAttribute(o,i):e.removeAttribute(o)}function a(t,n){var i=t.ownerDocument;r(this,{root:t,options:n,win:i.defaultView||i.parentWindow,doc:i,parser:htmlParser("",{autoFix:n.autoFix}),actuals:[t],proxyHistory:"",proxyRoot:i.createElement(t.nodeName),scriptStack:[],writeQueue:[]}),cbolaGlobalArrayPosc=this,e(this.proxyRoot,"proxyof",0)}var d="data-ps-";return a.prototype.write=function(){[].push.apply(this.writeQueue,arguments);for(var e;!this.deferredRemote&&this.writeQueue.length;)e=this.writeQueue.shift(),n(e)?this.callFunction(e):this.writeImpl(e)},a.prototype.callFunction=function(e){var t={type:"function",value:e.name||e.toString()};this.onScriptStart(t),e.call(this.win,this.doc),this.onScriptDone(t)},a.prototype.writeImpl=function(e){this.parser.append(e);for(var t,n,i,o=[];(t=this.parser.readToken())&&!(n=l(t))&&!(i=c(t));)t=this.options.beforeWriteToken(t),t&&o.push(t);this.writeStaticTokens(o),n&&this.handleScriptToken(t),i&&this.handleStyleToken(t)},a.prototype.writeStaticTokens=function(e){var t=this.buildChunk(e);if(t.actual)return t.html=this.proxyHistory+t.actual,this.proxyHistory+=t.proxy,this.proxyRoot.innerHTML=t.html,h&&(t.proxyInnerHTML=this.proxyRoot.innerHTML),this.walkChunk(),h&&(t.actualInnerHTML=this.root.innerHTML),t},a.prototype.buildChunk=function(e){var t=this.actuals.length,n=[],o=[],r=[];return i(e,function(e){var i=htmlParser.tokenToString(e);if(n.push(i),e.attrs){if(!/^noscript$/i.test(e.tagName)){var a=t++;o.push(i.replace(/(\/?>)/," "+d+"id="+a+" $1")),"ps-script"!==e.attrs.id&&"ps-style"!==e.attrs.id&&r.push("atomicTag"===e.type?"":"<"+e.tagName+" "+d+"proxyof="+a+(e.unary?" />":">"))}}else o.push(i),r.push("endTag"===e.type?i:"")}),{tokens:e,raw:n.join(""),actual:o.join(""),proxy:r.join("")}},a.prototype.walkChunk=function(){for(var n,i=[this.proxyRoot];t(n=i.shift());){var o=1===n.nodeType,r=o&&e(n,"proxyof");if(!r){o&&(this.actuals[e(n,"id")]=n,e(n,"id",null));var a=n.parentNode&&e(n.parentNode,"proxyof");a&&this.actuals[a].appendChild(n)}i.unshift.apply(i,s(n.childNodes))}},a.prototype.handleScriptToken=function(e){var t=this.parser.clear();if(t&&this.writeQueue.unshift(t),e.src=e.attrs.src||e.attrs.SRC,e=this.options.beforeWriteToken(e)){e.src&&this.scriptStack.length?this.deferredRemote=e:this.onScriptStart(e);var n=this;this.writeScriptToken(e,function(){n.onScriptDone(e)})}},a.prototype.handleStyleToken=function(e){var t=this.parser.clear();t&&this.writeQueue.unshift(t),e.type=e.attrs.type||e.attrs.TYPE||"text/css",e=this.options.beforeWriteToken(e),e&&this.writeStyleToken(e),t&&this.write()},a.prototype.writeStyleToken=function(e){var t=this.buildStyle(e);this.insertStyle(t),e.content&&(t.styleSheet&&!t.sheet?t.styleSheet.cssText=e.content:t.appendChild(this.doc.createTextNode(e.content)))},a.prototype.buildStyle=function(e){var t=this.doc.createElement(e.tagName);return t.setAttribute("type",e.type),o(e.attrs,function(e,n){t.setAttribute(e,n)}),t},a.prototype.insertStyle=function(e){this.writeImpl('<span id="ps-style"/>');var t=this.doc.getElementById("ps-style");t.parentNode.replaceChild(e,t)},a.prototype.onScriptStart=function(e){e.outerWrites=this.writeQueue,this.writeQueue=[],this.scriptStack.unshift(e)},a.prototype.onScriptDone=function(e){return e!==this.scriptStack[0]?void this.options.error({message:"Bad script nesting or script finished twice"}):(this.scriptStack.shift(),this.write.apply(this,e.outerWrites),void(!this.scriptStack.length&&this.deferredRemote&&(this.onScriptStart(this.deferredRemote),this.deferredRemote=null)))},a.prototype.writeScriptToken=function(e,t){var n=this.buildScript(e),i=this.shouldRelease(n),o=this.options.afterAsync;e.src&&(n.src=e.src,this.scriptLoadHandler(n,i?o:function(){t(),o()}));try{this.insertScript(n),e.src&&!i||t()}catch(r){this.options.error(r),t()}},a.prototype.buildScript=function(e){var t=this.doc.createElement(e.tagName);return o(e.attrs,function(e,n){t.setAttribute(e,n)}),e.content&&(t.text=e.content),t},a.prototype.insertScript=function(e){this.writeImpl('<span id="ps-script"/>');var t=this.doc.getElementById("ps-script");t.parentNode.replaceChild(e,t)},a.prototype.scriptLoadHandler=function(e,t){function n(){e=e.onload=e.onreadystatechange=e.onerror=null}function i(){n(),t()}function o(e){n(),a(e),t()}var a=this.options.error;r(e,{onload:function(){i()},onreadystatechange:function(){/^(loaded|complete)$/.test(e.readyState)&&i()},onerror:function(){o({message:"remote script failed "+e.src})}})},a.prototype.shouldRelease=function(e){var t=/^script$/i.test(e.nodeName);return!t||!!(this.options.releaseAsync&&e.src&&e.hasAttribute("async"))},a}();u.postscribe=function(){function t(){var e,t=c.shift();t&&(e=g(t),e.afterDequeue(),t.stream=i.apply(null,t),e.afterStreamStart())}function i(n,i,a){function c(e){e=a.beforeWrite(e),p.write(e),a.afterWrite(e)}p=new f(n,a),p.id=l++,p.name=a.name||p.id,o.streams[p.name]=p;var d=n.ownerDocument,u={close:d.close,open:d.open,write:d.write,writeln:d.writeln};r(d,{close:e,open:e,write:function(){return c(s(arguments).join(""))},writeln:function(){return c(s(arguments).join("")+"\n")}});var h=p.win.onerror||e;return p.win.onerror=function(e,t,n){a.error({msg:e+" - "+t+":"+n}),h.apply(p.win,arguments)},p.write(i,function(){r(d,u),p.win.onerror=h,a.done(),p=null,t()}),p}function o(i,o,r){n(r)&&(r={done:r}),r=a(r,d),i=/^#/.test(i)?u.document.getElementById(i.substr(1)):i.jquery?i[0]:i;var s=[i,o,r];return i.postscribe={cancel:function(){s.stream?s.stream.abort():s[1]=e}},r.beforeEnqueue(s),c.push(s),p||t(),i.postscribe}var l=0,c=[],p=null;return r(o,{streams:{},queue:c,WriteStream:f})}()}}(),window.Cbola=window.Cbola||{},Cbola.Templates=Cbola.Templates||{createElement:function(e){if(Cbola.Templates[e]){var t=document.createElement("div");return t.innerHTML=Cbola.Templates[e],t=t.children[0]}return null},createFragmentFromTemplate:function(e,t){var n,i,o,r;if(this.Compiled&&Cbola.Templates.Compiled[e]?n=Cbola.Templates.Compiled[e]:Cbola.Templates[e]&&(this.Compiled={},n=Cbola._.template(Cbola.Templates[e]),this.Compiled[e]=n),n){try{i=n(t)}catch(a){return Cbola.Logger.getInstance().error("Cbola.Templates.createElementFromTemplate failed generating template for: "+e+", url: "+Cbola.Env.PageProperties.hostname),null}for(o=document.createElement("div"),o.innerHTML=i,r=document.createDocumentFragment();o.childNodes.length;)r.appendChild(o.childNodes[0]);return r}return null}},Cbola.Styles=Cbola.Styles||{},Cbola.Templates["ad_banner_structure.html"]='<div  class="cbolaBannerStructure unselectDrag">\n  <div></div>\n  <div class="hideAdButton"></div>\n  <div  class="cbolaBanner"></div>\n</div>',Cbola.Templates["desktop_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;width: 100%;">\n  <div class="in-content-container-coverage" style="margin:0 auto;max-width:700px;min-width:440px;position:relative;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_container.html"]='<div class="cbola-layer in-content-container-wrapper" style="position:relative;line-height:normal;">\n  <div class="in-content-container-coverage" style="box-sizing:content-box;margin:0 auto;position:relative;opacity:0;padding:0;-webkit-transition: height 0.6s ease;-moz-transition: height 0.6s ease;-ms-transition: height 0.6s ease;-o-transition: height 0.6s ease;transition: height 0.6s ease;">\n\n  </div>\n</div>',Cbola.Templates["desktop_trivia_loading.html"]='\n<div class="InContent-container-coverage-perceive" style="height: 100%; width: 100%;position: absolute;">\n    <div style="height: 100%; z-index: 0; background-color: white; box-shadow: 0 0 1px rgb(171, 171, 171); position: relative;">\n        <div style="width: 180px;height: 180px;background-color: #f7f7f7;box-shadow: 0 0 1px rgb(224, 224, 224);border-radius: 200px;top: 15px;left: 24px;position: absolute;"></div>\n        <div style="width: 125px;height: 125px;background-color: #f7f7f7;border: 2px solid white;border-radius: 200px;top: 74px;left: 145px;position: absolute;"></div>\n        <div style="  width: 314px;height: 15px;background-color: #f7f7f7;border-radius: 0px;top: 30px;right: 19px;position: absolute;"></div>\n        <div style="  width: 260px;height: 15px;background-color: #f7f7f7;border-radius: 0px;top: 52px;right: 40px;position: absolute;"></div>\n        <div style="  width: 250px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 102px;right: 43px;position: absolute;"></div>\n        <div style="  width: 250px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 116px;right: 43px;position: absolute;"></div>\n        <div style="  width: 210px;height: 8px;background-color: #f7f7f7;border-radius: 0px;top: 130px;right: 63px;position: absolute;"></div>\n        <div style="  width: 79px;height: 40px;background-color: #f7f7f7;border-radius: 11px;bottom: 44px;right: 78px;position: absolute;"></div>\n        <div style="  width: 79px;height: 40px;background-color: #f7f7f7;border-radius: 11px;bottom: 44px;right: 180px;position: absolute;"></div>\n        <div style="  width: 100%;height: 35px;background-color: #f7f7f7;border-radius: 0px;bottom: 0px;right: 0px;position: absolute;"></div>\n    </div>\n</div>',Cbola.Templates["mobile_container.html"]='<div class="InContent-container-centerWrapper" style="line-height: normal;">\n	<div class="inContent-container-coverage" style="float: none;opacity:0;position:relative;width:100%;padding-top:0;box-sizing: content-box;margin:0 auto">\n	</div>\n</div>',Cbola.Templates["sidebar_container.html"]='<div class="cbola-layer in-content-container-centerWrapper " style="position:relative;line-height: normal; text-align: center;">\n  <div style="float: none;opacity:0;position:relative;padding-top: 0;box-sizing: content-box; display: inline-block;" class="in-content-container-coverage">\n\n  </div>\n</div>',Cbola.Templates["sponsored_links_structure.html"]='<ul class="cbola-sponsored">\n  <%Cbola._.forEach(Items, function (item,key) {%>\n  <li data-link-id="<%=item.Id%>" class="cbola-sponsored__item"><a class="cbola-sponsored__link" href="<%=item.Link%>" target="_blank"><%=item.Title%></a></li>\n  <%});%>\n</ul>',Cbola.Templates["width_check.html"]='<div id="carambola_InContent_checkWidth" style="width:100%"></div>',Cbola.Templates["cbolaPlatform.css"]='.cbolaBanner,.cbolaBannerTag{margin-left:auto;margin-right:auto}.cbola-fa,.cbola-ion:before{text-rendering:auto;-moz-osx-font-smoothing:grayscale}.cbolaBannerStructure{position:absolute;font-size:10px;color:#999;text-align:center;opacity:1;font-family:\'Open Sans\';cursor:default;padding:0;z-index:3;line-height:normal!important;overflow:hidden}.cbolaBanner{z-index:4;opacity:1;height:100%;overflow:visible;text-align:center;-webkit-transform-origin:0 0 0;transform-origin:0 0 0}.cbolaBanner iframe{max-width:none;border:0}.cbolaBannerTag{background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') right bottom/5px 8px no-repeat}.hideAdButton{display:block;position:absolute;cursor:pointer;right:3px;margin-top:0;box-shadow:0 0 0 #000!important;z-index:999999;width:18px;height:18px;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -52px -25px no-repeat}.cbola-fa,.cbola-ion:before,[class^=arr-]{display:inline-block}.cbola-sponsored{list-style-type:none!important;width:100%;height:100%;padding:2px 0 0!important;margin:0!important}.cbola-sponsored__item{width:98%;padding:0}.cbola-sponsored__link{color:#000;text-decoration:none!important;text-transform:capitalize}.cbola-ion:before{font-family:Ionicons;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased}.cbola-ion-share-alt:before{content:"\\f3ac"}.cbola-fa{font:normal normal normal 14px/1 FontAwesome;font-size:inherit;-webkit-font-smoothing:antialiased;-webkit-transform:translate(-1px,1px);transform:translate(-1px,1px);font-style:inherit!important}.cbola-fa-facebook:before{content:"\\f09a"}.cbola-fa-twitter:before{content:"\\f099"}.cbola-fa-check:before{content:"\\f00c"}.cbola-fa-times:before{content:"\\f00d"}.cbola-fa-share-alt:before{content:"\\f1e0"}.cbola-fa-hand-o-up:before{content:"\\f0a6"}.unselectDrag{-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.cbolaDisableTransitionOnLoad{transition:none!important;-webkit-transition:none!important}.cbola-clearfix{overflow:auto;zoom:1}[class^=arr-]{border:solid currentColor;border-width:0 .2em .2em 0;padding:.2em}.arr-right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.arr-left{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.arr-up{transform:rotate(-135deg);-webkit-transform:rotate(-135deg)}.arr-down{transform:rotate(45deg);-webkit-transform:rotate(45deg)}.cbola-loader{position:absolute;top:50%;left:50%;margin-left:-19px!important;margin-top:-19px!important;height:38px;width:38px;border:4px solid rgba(100,100,100,.3);border-top:4px solid rgba(100,100,100,.9);border-radius:50%;-webkit-animation:cbolaLoader 1.2s infinite linear;animation:cbolaLoader 1.2s infinite linear;box-sizing:border-box}@-webkit-keyframes cbolaLoader{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes cbolaLoader{from{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}span.cbola-clamped-text{overflow:hidden;position:relative;line-height:1.4em;max-height:2.8em;text-align:justify;display:block;padding-right:1em;margin-left:1em}span.cbola-clamped-text:before{content:\'...\';position:absolute;right:0;bottom:0}span.cbola-clamped-text:after{content:\'\';position:absolute;right:0;width:1em;height:1em;margin-top:.2em;background:#fff}.cbola-fade-out{opacity:0!important;pointer-events:none}.cbola-fade-in{opacity:1!important;pointer-events:auto}.cbola-hidden{visibility:hidden!important;pointer-events:none}.cbola-hide-scrollbars::-webkit-scrollbar{display:none}',function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),Cbola.EventBus=Cbola.EventBus||window.document.createElement("span"),Cbola.EventBus.fire=function(e,t){var n=new CustomEvent(e,{detail:t});Cbola.EventBus.dispatchEvent(n)},Cbola.EventBus.Events={LAYER_READY:"LayerReadyEvent",LAYER_ATTACHED:"LayerAttached",LAYER_IS_VIEWABLE:"LayerBecameViewable",COVERING_TRIGGER_ON:"coveringTriggerOn",COVERING_TRIGGER_OFF:"coveringTriggerOff",ELEMENT_SUCCESS:"ElementSuccess",ELEMENT_FAILED:"ElementFailed",TIMER_ENDED:"TimerEnded",PAGE_ELEMENTS_DATA_RECEIVED:"PageElementsDataReceived",ADS_POOL_MANAGER_READY:"AdsPoolManagerReady"},window.Cbola=window.Cbola||{},window.cbolaConfig={},Cbola.Config=Cbola.Config||{},Cbola.Config.Defaults=Cbola.Config.Defaults||{},Cbola.Globals=Cbola.Globals||{},Cbola.Enums=Cbola.Enums||{},Cbola.Enums.ProductTypes={IN_IMAGE:1,IN_CONTENT:2,IN_IMAGE_PENDING:101},Cbola.Enums.ServerCallTypes={CDN:0,SERVER:1},Cbola.Enums.IntegrationTypes={ERROR:0,NORMAL:1,DFP:2,SAFE_FRAME:3,IFRAME:4},Cbola.Enums.SetClickTypes={ITEM_LINK:1,FEEDBACK_ICON_ON:2,FEEDBACK_ICON_OFF:3,FEEDBACK_ICON_CLOSE:4,FEEDBACK_STARS_1:5,FEEDBACK_STARS_2:6,FEEDBACK_STARS_3:7,FEEDBACK_STARS_4:8,FEEDBACK_STARS_5:9,CARAMBOLA_ICON:10,SHARE_BEFORE_FACEBOOK:11,SHARE_BEFORE_TWITTER:12,SHARE_AFTER_FACEBOOK:13,SHARE_AFTER_TWITTER:14,AD_BUTTON_CLOSE:15,SHARE_BEFORE_ALT:16,ENDING_SCREEN_OUT:21,FOOTER_AD_BUTTON_CLOSE:22},Cbola.Enums.RefreshTypes={NONE:0,CLICK:1,TIMEOUT:2,BOTH:3},Cbola.Enums.AdTriggerTypes={PAGE_LOAD:1,TIMEOUT:2,CLICK:3,APPERANCE:4,URL_CHANGE:5,PSA:6},Cbola.Enums.LoadStatusTypes={SUCCESS:1,BAD_PAGE:2,WRONG_AD_SIZE:3,FAILED:4,NOT_FOUND:5,TOO_SMALL:6,TOO_BIG:7,MAX_ELEMS_REACHED:8,GET_ADS_FAILED:9,AD_SERVER_DOWN:10,PAGE_NOT_IN_CACHE:11,AD_TOO_SMALL:12,NO_CONTENT:13,ALREADY_USED:14,GET_ADS_MAX_RETRY:15,PAGE_CLOSED:16,NO_MORE_ADS:17,SELECTOR_NOT_FOUND:18,SELECTOR_TOO_SMALL:19,SAME_ID_WIDGETS:21},Cbola.Enums.AdModes={REGULAR:1,PERFORMANCE:2,PREMIUM:3,HEADER_BIDDING:6},Cbola.Enums.ItemViewTypes={ON_HOVER:1,ON_NEXT_BTN:2,ON_PREV_BTN:3,VIEWABILITY:4,IN_IFRAME:5,UNVIEWABILITY:6,ENDING_SCREEN:7,AD:8,ON_NEXT_AUTOPLAY:9,SPONSORED_ENDING_SCREEN:10,SPONSORED_LINK_CLICK:11,ENDING_SCREEN_AUTOPLAY:12,NONE:255},Cbola.Enums.PageRequestTypes={ERROR:0,PAGE_VIEW:1,NOT_FOUND:2,PENDING:3,NO_ELEMS_FOUND:4,NO_CONTENT_FOUND:5,UNKNOWN_PUBLISHER:6,UNSUPPORTED_DOMAIN:7,MOBILE:8,AUTOMATION_FAILED:9,HOMEPAGE:10,REVISER:11,UNSUPPORTED_BROWSER:12,DIV_TOO_SMALL:13,CORRUPTED_JSON:14,BLOCKED_MOBILE:15,NO_SHOW_META:16,BLOCKED_DESKTOP:17,BLOCKED_TABLET:18,ADS_ONLY:19,INITIALIZE_FAILED:21,GET_ELEMENTS_ERROR:255},Cbola.Enums.teaserTriggerTypes={TIMEOUT:1,VIEWABILITY:2},Cbola.Enums.isServerCallTypes={FROM_CDN:0,FROM_SERVER:1},Cbola.Config.Language={deafault:"en",english:"en",spanish:"es",portuguese:"pt",russian:"ru",french:"fr"},Cbola.Config.init=function(){var e=Cbola.Config;e.Elements=[];var t={qa_queryServer:"//qa.api.carambo.la/inimage/server/",qa_analyticsServer:"//qa.api.carambo.la/inimage/analytics/",qa_loggingServer:"//qa.api.carambo.la/inimage/logging/",prod_queryServer:"//content.carambo.la/",prod_analyticsServer:"//analytics.carambo.la/",prod_loggingServer:"//logging.carambo.la/",qa_CDN:"//qa.inimage.carambo.la/",prod_CDN:"//inimage.carambo.la/",qa_adServer:"//qa.adserver.carambo.la/",prod_adServer:"//xtr.carambo.la/",maxParentElementsCheckWidth:5,adTypeDisplay:0,adTypeVideo:1,abTestSkipContent:!1,errorAdAlreadySent:!1,containerExpandStaticAdTrivia120:320,ICdefaultAdHeight:250,ICdefaultAdWidth:300,extractTypeAds:0,hideLayerCount:0,getMoreContentRetry:0,checkPendingICscriptsTimeLength:25,urlsForAuto:[],widgetIdArray:[],uploadedLayers:[],writeCaptureAlreadySet:!1,getAdsCheckElementRetries:100,findICSelectorElementMaxRetries:80,LoadType:1,ZIndexLayers:0,sendToPostScribeAgain:0,MaxWidgets:999,inContentFallbackWidths:[440,300],currentElementsSum:0,dateTimeWhenScriptExecute:"cbolaDt",bitlyUrl:"",icDefaultMainTitle:"Did you know?",checkPlatformLocation:!0,errorMessage:"",proxyId:"carambola_proxy",adBelowSideBarMargin:1,brandRedirect_default:"http://carambo.la/",adTitleStructureTriviaHeight:14,adBelowInContentExtraMargin:3,platformSuccessId:[],tagExtraction:{APPEND:1,POSTSCRIBE:2,WRITECAPTURE:3,POSTSCRIBE_ONLY:4,SRCDOC_IFRAME:5,BILIMBI:6,WRITE_IFRAME:7},adTypes:{display:{name:"display",number:0},video:{name:"video",number:1}},adSizes:{w300h250:{name:"300_250",width:"300",height:"250"},w300h251:{name:"300_251",width:"300",height:"251"},w728h90:{name:"728_90",width:"728",height:"90"},w320h50:{name:"320_50",width:"320",height:"50"},w728h91:{name:"728_91",width:"728",height:"91"},w310h260:{name:"310_260",width:"310",height:"260"},w400h300:{name:"400_300",width:"400",height:"300"},w500h300:{name:"500_300",width:"500",height:"300"},w630h90:{name:"630_90",width:"630",height:"90"},w10h10:{name:"10_10",width:"10",height:"10"}},providerId:{openx:135,sovern:147,aol:161,indexExchange:171},headerBiddingRequestStatus:{success:1,timeout:2,fail:3},adAsideOfUnitExtraMargin:5,timeouts:{pendingBeforeSkippingHeaderBidding:5e3,pendingHeaderBiddingResponseBrake:200,pendingIndexExchangeBuffer:250},autoSlideFirst:!0,autoSlideFirst_openAfterSecs:3e3,autoSlideFirst_closeAfterSecs:6e3,layouts:{inContent:{all:[121,120,112,110,102,101,100],facts:[100,101,102,110,112],trivia:[120],triviaMulti:[121]},sideBars:{all:[130,131,132,133,134,135,140,150,151,152],facts:[130,131,132,133,152],diedOnThisDay:[134,150],diedOnThisWeek:[151],onThisDay:[135],trivia:[140],staticBanner:[130,131,133,134,135,140],teaserBanner:[132],slideShow:[150,151,152]},mobile:{all:[1e3,1100,1400],facts:[1e3,1100],trivia:[1400]}}};try{t.jsonRegEx={0:"[\\?&]utm_",110587:"#~[a-zA-Z0-9]{14}",110461:"\\?",110635:"#~[a-zA-Z0-9]{14}",110760:"[\\?&]wpvqas=",110735:"\\?gclid=|#|/ml/1/e/",110729:"\\?gclid=|#|/ml/1/e/",110663:"#|\\?_|\\?fb_",110733:"\\?fb_|\\?gclid=|#|/ml/1/e/",111799:"#axzz",111814:"\\?",110744:"\\?gclid=|#|/ml/1/e/",110695:"\\?gclid=|#|/ml/1/e/",110730:"\\?gclid=|#|/ml/1/e/",110746:"\\?gclid=|#|/ml/1/e/",110728:"\\?gclid=|#|/ml/1/e/",110726:"\\?gclid=|#|/ml/1/e/",110737:"\\?gclid=|#|/ml/1/e/",110694:"\\?gclid=|#|/ml/1/e/",110738:"\\?gclid=|#|/ml/1/e/",111843:"\\?gclid=|#|/ml/1/e/",110740:"\\?gclid=|#|/ml/1/e/",110732:"\\?gclid=|#|/ml/1/e/",112323:"userid=",112230:"\\?pctx=",112268:"gclid="}}catch(n){}try{t.srcUrlEnabledDids=[110006]}catch(n){}e=Cbola._.extend(e,t),e.getLayersDefaultSize=function(e){switch(e){case 100:case 101:case 102:case 110:case 112:return{height:250,width:100};case 120:case 121:return{height:250,width:650};case 130:case 131:return{height:350,width:300};case 132:return{height:600,width:300};case 133:case 134:case 135:case 140:return{height:350,width:300};case 150:case 151:case 152:return{height:250,width:300};case 1400:case 1100:case 1e3:return{height:"inherit",width:0};default:return{height:230,width:100}}},e.getLayersDefaultSizeForIframe=function(e){switch(e){case 100:case 101:case 102:case 110:return{height:270,width:450};case 120:return"pgtr56"===Cbola.Env.activePid?{height:250,width:500}:{height:265,width:500};case 130:case 131:case 133:case 134:case 135:return{height:350,width:300};case 140:return{height:350,width:300};case 1e3:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1100:return"lgcy81"===Cbola.Env.activePid||"lgcy42"===Cbola.Env.activePid?{height:455,width:-1}:{height:500,width:-1};case 1400:return{height:516,width:300};default:return{height:230,width:100}}},e.layouts.all=[];for(var i in e.layouts)e.layouts.hasOwnProperty(i)&&"undefined"!==e.layouts[i].all&&[].push.apply(e.layouts.all,e.layouts[i].all);e.triggersDictionary={1:{supportedLayers:e.layouts.inContent.trivia,translatedTo:1},2:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:2},3:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:3},4:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:4},5:{supportedLayers:Cbola.Config.layouts.inContent.triviaMulti,translatedTo:5},6:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:6},7:{supportedLayers:e.layouts.inContent.trivia.concat(Cbola.Config.layouts.inContent.triviaMulti),translatedTo:7},11:{supportedLayers:e.layouts.sideBars.slideShow,translatedTo:1},14:{supportedLayers:e.layouts.sideBars.staticBanner,translatedTo:4},15:{supportedLayers:e.layouts.sideBars.slideShow,translatedTo:20},20:{supportedLayers:e.layouts.sideBars.staticBanner.concat(e.layouts.sideBars.teaserBanner),translatedTo:20},18:{supportedLayers:e.layouts.sideBars.teaserBanner,translatedTo:8},19:{supportedLayers:e.layouts.sideBars.staticBanner,translatedTo:9},54:{supportedLayers:e.layouts.inContent.facts,translatedTo:4},56:{supportedLayers:e.layouts.inContent.facts,translatedTo:6},57:{supportedLayers:e.layouts.inContent.facts,translatedTo:7},58:{supportedLayers:e.layouts.inContent.facts,translatedTo:8},200:{supportedLayers:e.layouts.mobile.all,translatedTo:200},204:{supportedLayers:e.layouts.mobile.all,translatedTo:204},209:{supportedLayers:e.layouts.mobile.all,translatedTo:209},300:{supportedLayers:e.layouts.all,translatedTo:300}},e.Defaults={adServer_method:"GetAds",queryServer:e.prod_queryServer,analyticsServer:e.prod_analyticsServer,loggingServer:e.prod_loggingServer,CDN:e.prod_CDN,adServer:e.prod_adServer},e.Trivia={COLOR_SKIN:1},e.AdOpenBehaviors={timer:1,engagement:2,viewable:3,hoverOnUnit:4},e.AdCloseBehaviors={timer:1,engagement:2,viewable:3,hoverOnUnit:5},e.GamesType={facts:1,trivia:2,sideBarFacts:3},e.clickTrackerSource={endGame:1,brand:2};try{"1"===Cbola.Env.queryServer||"qa"===Cbola.Env.queryServer?(e.Defaults.CDN=e.qa_CDN,e.Defaults.queryServer=e.qa_queryServer,e.Defaults.adServer=e.qa_adServer,e.Defaults.analyticsServer=e.qa_analyticsServer,e.Defaults.loggingServer=e.qa_loggingServer,"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(e.Defaults.adServer="//xtr.carambo.la/",e.Defaults.adServer_method="GetExtraContent")):"2"===Cbola.Env.queryServer?e.Defaults.CDN="//inimage.carambo.la/":"3"===Cbola.Env.queryServer?(e.Defaults.CDN="//s3.amazonaws.com/qa.inimage.carambo.la/",e.Defaults.queryServer=e.qa_queryServer,e.Defaults.adServer=e.qa_adServer,e.Defaults.analyticsServer=e.qa_analyticsServer,e.Defaults.loggingServer=e.qa_loggingServer):"undefined"!=typeof Cbola.Env.activePid&&"cbolaDemo"===Cbola.Env.activePid&&(e.Defaults.adServer="//xtr.carambo.la/",e.Defaults.adServer_method="GetExtraContent")}catch(n){console.log("queryServer is not defined"),console.log(n)}"undefined"==typeof e.abTestId&&(e.abTestId=Cbola.Utils.getUrlParams().cbolaabtest,e.abTestId?e.abTestId=parseInt(e.abTestId):(cbolaConfig.abTestId=1,e.abTestId=cbolaConfig.abTestId)),e.abTestGroupId=Cbola.Utils.getUrlParams().cbolaabtestgroup,e.abTestGroupId||(e.abTestGroupId="1"),30===e.abTestId||31===e.abTestId?(e.Defaults.loggingServer="//logging.carambo.la/",31===e.abTestId&&(e.Defaults.queryServer="//content.carambo.la/")):32===e.abTestId&&(e.Defaults.queryServer="//content.carambo.la/",e.Defaults.loggingServer="//logging.carambo.la/",e.Defaults.adServer="//xtr.carambo.la/")},window.Cbola=window.Cbola||{},Cbola.Utils={isFacebookBrowser:!(!navigator.userAgent.match(/\[FB.*;(FBAV)\/(\d+)(?:\.(\d+)(?:\.(\d)+)?)?/g)&&!navigator.userAgent.match(/(facebookexternalhit)\/(\d+)\.(\d+)/g)),isIOS:!!navigator.userAgent.match(/iPad|iPhone|iPod/g),getRunTimeInSecs:function(){var e=Math.abs(((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime())/1e3);return e=Math.floor(100*e)/100},getRunTimeInMilis:function(){var e=Math.abs((new Date).getTime()-Cbola.Env.PageProperties.startTime.getTime());return e+"ms"},getViewId:function(e,t){var n=navigator.userAgent.toLowerCase();n.indexOf("google web preview")>-1&&(Math.cbolaSeedrandom(Cbola.Env.PageProperties.hostname),Cbola.Logger.getInstance().alwaysSend("googleWebPreview, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid));var i=Cbola._,o=i.partial(i.padStart,i,2,"0"),r=new Date;return o(r.getDate())+o(r.getMonth()+1)+o(r.getFullYear()%100)+o(r.getHours())+o(r.getMinutes())+o(r.getSeconds())+o(r.getMilliseconds()%100)+i.random(e,t)},replaceAll:function(e,t,n){return Cbola._.isEmpty(n)?n:n.replace(new RegExp(e,"g"),t)},b64_to_utf8:function(e){try{return decodeURIComponent(escape(window.atob(e)))}catch(t){return Cbola.Logger.getInstance().warn("b64_to_utf8 error"),Cbola.Logger.getInstance().info(t),""}},isMobile:Cbola._.memoize(function(){var e=!1,t=/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase());return t&&(e=!0),navigator.userAgent.search("PC")>-1&&(e=!1),e}),isTablet:Cbola._.memoize(function(){var e=!1,t=/ipad|Nexus 7|android 3.0|xoom|sch-i800|playbook|tablet|kindle|a1_07|a100|a1-810|a1-811|a1-830|a200|a210|a3-a10|a500|a501|a510|a700|alcatel one touch p310x|alcatel one touch p320x|alcatel onetouch p310a|archos 101 neon|archos 101g10|archos 80g9|aries_785|arnova 101 g4|asus transformer pad tf300t|asus transformer pad tf700t|at100|at10-a|at200|at300|at300se|b1-710|b1-711|b1-730hd|b1-a71|bn nookhd+|bntv400|bntv600|breeze 10.1 quad|cm_tenderloin|dell streak 7|dl1010q|e2281|e-tab ivory|gigaset qv830|gt-n5100|gt-n5110|gt-n8000|gt-n8010|gt-n8013|gt-n8020|gt-p1000|gt-p1000m|gt-p1000r|gt-p1010|gt-p3100|gt-p3110|gt-p3113|gt-p5100|gt-p5110|gt-p5113|gt-p5200|gt-p5210|gt-p5220|gt-p7300|gt-p7310|gt-p7500|gt-p7510|hpwos|huawei mediapad|hudl 2|hu-hgt-p3110|ideapada10|ideatab a2107a-h|ideatab a3000-h|ideatab s6000-f|ideatab s6000-h|ideataba2109a|k010|k012|k017|k01a|kfapwi|kfarwi|kfaswi|kfjwa|kfjwi|kfot|kfsawi|kfsowi|kfthwa|kfthwi|kftt|le pan tc802a|lenovo a3000-h|lenovo a3500-fl|lenovo a3500-h|lenovo a5500-f|lenovo a5500-h|lenovo a7600-f|lenovo a7600-h|lenovo b6000-f|lenovo b6000-h|lenovo b8000-f|lenovo b8000-h|lenovo b8080-f|lenovo b8080-h|lenovo s5000-f|lenovo s5000-h|lenovo s6000l-f|lenovo s920_row|lenovo yoga b6000-f|lenovo yoga b8000-f|lenovoa3300-h|lguk410|lg-v410|lg-v490|lg-v496|lg-v500|lifetab_s1034x|lifetab_s785x|lifetab_s9714|m532|me172v|me173x|me301t|me302c|me302kl|me371mg|mediapad 10 link|mediapad 7 lite|mediapad m1 8.0|mediapad t1 8.0|micromax_a101|mz601|mz604|nexus 10|nexus 7|nook bnrv200|nook bntv250|nook bntv250a|nx008hd8g|nx700qc|nx785qc8g|padfone|pmp5580c|pmp7280c3g|pmp7280c3g_quad|pmt3377_wi|pmt7077_3g|qmv7a|qmv7b|qtaqz3|rct6103w46|rct6203w46|rct6773w22|rct6773w22b|samsung gt-n8020|samsung gt-p5100|samsung gt-p5220|samsung sm-p600|samsung sm-p605|samsung sm-p605v|samsung sm-p900|samsung sm-p905|samsung sm-p905v|samsung sm-t230|samsung sm-t230nu|samsung sm-t315|samsung sm-t320|samsung sm-t330nu|samsung sm-t331|samsung sm-t350|samsung sm-t520|samsung sm-t530|samsung sm-t530nn|samsung sm-t530nu|samsung sm-t531|samsung sm-t535|samsung sm-t537r4 uscc|samsung sm-t550|samsung sm-t555|samsung sm-t705|samsung sm-t705y|samsung sm-t800|samsung sm-t805|samsung sm-t805y|samsung sm-t807p|samsung sm-t807t|samsung sm-t900|samsung-gt-p7500|samsung-sgh-i497|samsung-sgh-i777|samsung-sm-t217a|samsung-sm-t337a|samsung-sm-t537a|samsung-sm-t807a|sch-i705|sch-i705 4g|sch-i915|sgp312|sgp321|sgp511|sgp512|sgp521|sgpt12|sgpt13|shv-e210k|slider sl101|sm-p600|sm-p605|sm-p605v|sm-p900|sm-p905|sm-p905v|sm-t110|sm-t111|sm-t210|sm-t2105|sm-t210r|sm-t211|sm-t217s|sm-t217t|sm-t230|sm-t230nu|sm-t235|sm-t237p|sm-t310|sm-t311|sm-t315|sm-t315t|sm-t320|sm-t325|sm-t330nu|sm-t331|sm-t350|sm-t520|sm-t525|sm-t530|sm-t530nu|sm-t531|sm-t535|sm-t537v|sm-t550|sm-t700|sm-t705|sm-t705y|sm-t800|sm-t805|sm-t805y|sm-t807v|sm-t900|touchpad|transformer prime tf201|transformer tf101|venue 7 3730|venue 7 hspa+|venue 8 3830|venue 8 hspa+|vk810 4g|vodafone smart ii|vodafone smart tab 3g|xolo a700|xoom|xoom 2|zaffire 1010/i.test(navigator.userAgent.toLowerCase());
return t&&(e=!0),navigator.userAgent.search("PC")>-1&&(e=!1),t&&(Cbola.Env.PageProperties.isMobile=!1),e}),setGlobalRedirectTime:function(){var e=Cbola.Env.PageProperties,t=this.getLocalStorageVar(Cbola.Config.dateTimeWhenScriptExecute)||"";this.removeLocalStorageVar(Cbola.Config.dateTimeWhenScriptExecute);var n=t.split("&"),i=n.pop();e.publisherScriptExecutionTime=i?parseInt(i):null;var o=e.publisherScriptExecutionTime?e.startDateFileUploaded.getTime()-e.publisherScriptExecutionTime:0;return Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_BLUE,"Redirection server duration: "+o+"ms"),o},setGlobalElements:function(){try{"undefined"==typeof window.top.Cbola.Config.Elements&&(window.top.Cbola.Config.Elements=[])}catch(e){Cbola.Logger.getInstance().warnM("Utils.setGlobalElements","setGlobalElements ERR")}},checkIfWidgetIsOpen:function(){return null},getZIndexForElement:function(){var e=Cbola.Config.ZIndexLayer-Cbola.Config.ZIndexLayers;return Cbola.Config.ZIndexLayers++,1>e&&(e=0===Cbola.Config.ZIndexLayer?0:1),e},checkIfQueryStingExist:function(e,t){var n=Cbola.Config,i=Cbola.Env.PageProperties,o=e.ParentId,r=this.getUrlParams().cbolagameset,a=i.originalPathNameHost;if(t="undefined"!=typeof t?t:!1,parseInt(r)===o)return a;if(a=i.originalPathNameHost+(i.originalPathNameHost.indexOf("?")>-1?"&":"?")+"cbolaGameSet="+o,n.urlsForAuto.indexOf(a)>-1)return a;if(t){n.urlsForAuto.push(a);var s={PublisherId:Cbola.Env.activePid,UrlData:{Url:a,Hash_128_Bit:CryptoJSCbola.MD5(a).toString(),Hash_160_Bit:CryptoJSCbola.SHA1(a).toString()},AbTestId:n.abTestId,IsMobile:i.isMobile,IsTablet:i.isTablet,CategoryId:Cbola.Env.categoryId,Tags:Cbola.Env.tags,Title:Cbola.Env.title,Body:Cbola.Env.body},l=JSON.stringify(s);Cbola.Logger.getInstance().info("Cbola_getPageElements_forAutomation start. json: "+l),$cbola.ajax({type:"POST",url:n.Defaults.queryServer+"GetInContentInfo",data:l,contentType:"application/json; charset=utf-8",dataType:"json",success:function(e){},error:function(e){}})}return a},checkImageLoaded:function(e){var t=new Image;t.src=e,t.onload=function(){},t.onerror=function(){Cbola.Logger.getInstance().error("Image not loaded. src: "+e)}},checkUrlParamExist:function(e){var t=window.location.href.toLowerCase(),n=t.search(e);return n>-1},getLocationHref:function(){var e=this.isGoogleSyndication()&&document.referrer?document.referrer:window.location.href;return e},getLowerLocationHref:function(){return this.getLocationHref().toLowerCase()},gueryStringCut:function(){var e=this.getLowerLocationHref(),t=e.search("ignr"),n=e.search("Ignr");if(cbolaCanonicalWhiteList.getDomainStatus()&&$cbola('link[rel="canonical"]').length>0)return $cbola('link[rel="canonical"]')[0].attributes.href.value.toLowerCase();if(t>-1||n>-1){var i=e.split("?");return Cbola.Config.queryString=i[1],Cbola.Config.ignoreQueryString=!0,i[0]}return Cbola.Config.queryString="",Cbola.Config.ignoreQueryString=!1,e=this.checkUrlPageSaver(e)},checkUrlPageSaver:function(e){var t=e.search("dirty"),n=e.search("Dirty");return t>-1||n>-1?e:$cbola('meta[property="carambola"]').length>0?$cbola('meta[property="carambola"]')[0].attributes.content.value.toLowerCase():e},gueryStringCutRegex:function(){var e,t=Cbola.Env,n=t.PageProperties,i=Cbola.Config.jsonRegEx;try{if(null!==t.domainId&&t.domainId>0)for(var o in i)i.hasOwnProperty(o)&&(t.domainId.toString().match(new RegExp(o))||"0"===o)&&(e=n.hostname.search(new RegExp(i[o],"ig")),-1!==e&&(n.hostname=n.hostname.substring(0,e)))}catch(r){Cbola.Logger.getInstance().info(r)}},isInIframe:Cbola._.memoize(function(){try{return window.top!==window}catch(e){return!0}}),isFriendlyIframe:Cbola._.memoize(function(){if(this.isInIframe())try{if(window.frameElement)return!0;if("undefined"!=typeof inDapIF&&inDapIF)return!0}catch(e){return!1}return!1}),isWindowTopSupported:Cbola._.memoize(function(){if(this.isFriendlyIframe())try{if(window.top.document)return!0}catch(e){return!1}return!1}),isGoogleSyndication:function(){return window.location.href.toLowerCase().indexOf("tpc.googlesyndication.com")>-1},getCurrentAbTestId:function(){return Cbola.Config.abTestSkipContent?1:Cbola.Config.abTestId},checkNoShowLayer:function(){return $cbola('meta[property="cbolans"]').length>0?$cbola('meta[property="cbolans"]')[0].attributes.content.value.toLowerCase()===Cbola.Env.activePid+"_16241":!1},getLocalStorageVar:function(e){try{return localStorage.getItem(e)}catch(t){return"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t),!1}},removeLocalStorageVar:function(e){try{localStorage.removeItem(e)}catch(t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t)}},cumulativeOffset:function(e){var t=0,n=0;do t+=e.offsetTop||0,n+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:n}},CbolaSendLogsTimes:function(e){var t=Cbola._.result(Cbola.Env,"PageProperties.cbola_pageViewId",0);"undefined"!=typeof Cbola.Env.domainId&&null!=Cbola.Env.domainId&&Cbola.Logger.getInstance().notifyM(e,"Code reached method:"+e+". domainId: "+Cbola.Env.domainId+". PageViewId: "+t)},getPrevSibling:function(e){for(var t=e.previousSibling;t;){if(t.nodeType===Node.ELEMENT_NODE)return t;t=t.previousSibling}return null},fixPixelHeight:function(e){var t=this.getPrevSibling(e);try{"img"===t.tagName.toLowerCase()&&t.src.indexOf("pixel.watch")>-1&&(t.style.display="block")}catch(n){}},detectDeviceOrientation:function(){var e,t,n=document.getElementsByClassName("cbola-orientation-src");if(n.length>0)n=n[0],e=Math.max(n.clientWidth,0),t=Math.max(n.clientHeight,0);else{var i=window;window!==window.parent&&(i=window.parent);try{e=i.innerWidth||i.document.documentElement.clientWidth||i.document.body.clientWidth,t=i.innerHeight||i.document.documentElement.clientHeight||i.document.body.clientHeight}catch(o){i=window,e=i.innerWidth||i.document.documentElement.clientWidth||i.document.body.clientWidth,t=i.innerHeight||i.document.documentElement.clientHeight||i.document.body.clientHeight}}return e>t?(Cbola.Env.PageProperties.isPortrait=!1,"landscape"):(Cbola.Env.PageProperties.isPortrait=!0,"portrait")},injectMainStyle:function(e,t){var n=Cbola._.template(t);return t=n({clientPath:Cbola.Env.clientPath}),this.injectStyle(e,t)},injectStyle:function(e,t){var n=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(n),n.styleSheet)n.styleSheet.disabled||(n.styleSheet.cssText=t);else try{n.innerHTML=t}catch(i){n.textContent=t}return n},initPayload:function(){var e=Cbola.Env,t=this.getCurrentAbTestId(),n={PublisherId:e.activePid,UrlData:{Url:e.PageProperties.hostname,Hash_128_Bit:e.PageProperties.urlHashMD5,Hash_160_Bit:e.PageProperties.urlHashSHA1},AbTestId:t,ScriptDomainId:Cbola.Env.domainId,IsMobile:e.PageProperties.isMobile,IsTablet:e.PageProperties.isTablet};return n},isGoogleWebLightAgent:function(){return/^.*?\bAndroid\b.*?\bgoogleweblight\b.*?$/.test(window.navigator.userAgent)},updateEnv:function(e){Cbola.Env=Cbola._.extend(Cbola.Env,e);var t={PageId:0,Category:0,Domain:0};Cbola._.defaults(Cbola.Env,t),Cbola._.extendWith(Cbola.Config,e.DefaultSettings,function(e,t){return"undefined"==typeof t?e:t})},isFirefox:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1},isIE:function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");return t>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)||!!navigator.userAgent.match(/Edge\//)},toBool:function(e){return"undefined"!=typeof e?!("false"===e||"0"===e||0===e||e===!1):void 0},parseBool:function(e){return e===!0||"true"===e||"number"==typeof e&&0!==e},dataset:function(){var e=Array.prototype.slice.call(arguments);if(e.length<2)return null;var t=e[0],n=e[1];return e.length>2&&(t.dataset?t.dataset[Cbola._.camelCase(n)]=e[2]:t.setAttribute("data-"+Cbola._.kebabCase(n),e[2])),t.dataset?t.dataset[Cbola._.camelCase(n)]||null:t.getAttribute("data-"+Cbola._.kebabCase(n))},getUrlParams:function(){var e={};try{e=this.getParamsFromUrl(window.top.location.href)}catch(t){e=this.getParamsFromUrl(window.location.href)}return e},localStorageService:{setItem:function(e,t){try{localStorage.setItem(e,t)}catch(n){return"QuotaExceededError"!==n.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==n.name||Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,n.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(n),!1}},getItem:function(e){try{return localStorage.getItem(e)}catch(t){return"QuotaExceededError"!==t.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==t.name||Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t.name),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not aviailable in this device"),Cbola.Logger.getInstance().info(t),null}},removeItem:function(e){try{localStorage.removeItem(e)}catch(t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"localStorage is not available in this device"),Cbola.Logger.getInstance().info(t)}}},integrationTypeCheck:function(){var e=Cbola.Enums.IntegrationTypes;try{return this.isInIframe()?this.isFriendlyIframe()?e.DFP:this.isGoogleSyndication()?e.SAFE_FRAME:e.IFRAME:e.NORMAL}catch(t){return e.ERROR}},rgbToRgba:function(e,t){if("string"!=typeof e)return null;t=t||"1";var n=e.indexOf("("),i=e.indexOf(")");if(-1===n||-1===i)return null;var o=e.substring(n+1,i).split(",");return o.splice(3,o.length,t),"rgba("+o.join(",")+")"}},Cbola.Utils.getParamsFromUrl=Cbola._.memoize(function(e){var t="",n={};return Cbola._.isNil(e)?{}:(t=e.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(e,t,i){n[t.toLowerCase()]=i}),n)}),Cbola.Utils.isPassiveEventSupported=Cbola._.memoize(function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(n){}return e}),cbolaAdLogSystem={iframeError:function(e,t){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"ad iframe error: "),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Ad Id: "+t),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,e);try{Cbola.Config.errorAdAlreadySent&&"spdsh12"===Cbola.Env.activePid||(Cbola.Config.errorAdAlreadySent=!0,Cbola.Logger.getInstance().error("Iframe Error - TagId: "+t+" path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", ErrorMessage: "+errorMessage+"."))}catch(e){Cbola.Logger.getInstance().warn("send log was failed in ad iframe error.")}},postCribeOnError:function(e){var t=JSON.stringify(e);Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Post scribe error"),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,t);var n=0;if("undefined"!=typeof cbolaGlobalArrayPosc.root&&"undefined"!=typeof cbolaGlobalArrayPosc.scriptStack[0]){try{cbolaGlobalArrayPosc.root.attributes.length>0&&"undefined"!=typeof cbolaGlobalArrayPosc.root.attributes.adId&&(n=cbolaGlobalArrayPosc.root.attributes.adId.value)}catch(e){Cbola.Logger.getInstance().warn("try catch on tagId in postscribe error.")}Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"Ad Id: "+n);try{Cbola.Config.errorAdAlreadySent&&"spdsh12"===Cbola.Env.activePid||(Cbola.Config.errorAdAlreadySent=!0,Cbola.Logger.getInstance().error("PostScribe Error - TagId: "+n+" path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", ErrorMessage: "+t+"."))}catch(e){Cbola.Logger.getInstance().warn("send log was failed in postscribe error.")}if("pgtr56"===Cbola.Env.activePid){if(Cbola.Config.sendToPostScribeAgain<5){Cbola.Config.sendToPostScribeAgain++;try{Cbola.Logger.getInstance().info("elementId: 0, TagExtractionType: postscribe again")}catch(e){Cbola.Logger.getInstance().info("elementId: 0, TagExtractionType: postscribe again, failed")}}else Cbola.Logger.getInstance().warn("post scribe was failed: "+Cbola.Config.sendToPostScribeAgain);return!0}return Cbola.Config.extractTypeAds=Cbola.Config.tagExtraction.WRITECAPTURE,cbolaSetWriteCapture(),$cbola(cbolaGlobalArrayPosc.root).cbolaWriteCapture().append("<center>"+cbolaGlobalArrayPosc.scriptStack[0].text+"</center>"),!0}return Cbola.Config.extractTypeAds=Cbola.Config.tagExtraction.WRITECAPTURE,!0}},function(){for(var e=0,t=["ms","moz","webkit","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),o=Math.max(0,16-(i-e)),r=window.setTimeout(function(){t(i+o)},o);return e=i+o,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}(),"undefined"==typeof document.hidden)for(var vendors=["ms","moz","webkit","o"],x=0;x<vendors.length&&"undefined"==typeof document.hidden;++x)document.hidden=window[vendors[x]+"Hidden"];String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.indexOf(e,t)===t}),window.Cbola=window.Cbola||{},Cbola.TaskManager=function(){this.loopIteration=null,this.isRunning=!1,this.loopIterationsCounter=0,this.deferredTasksQueue=[]},Cbola.TaskManager.TIMEOUT_IN_MILISECONDS=250,Cbola.TaskManager.prototype.executeTask=function(e,t,n){"undefined"==typeof n&&(n=window),e.apply(n,t)},Cbola.TaskManager.prototype.taskExecutionLoop=function(){this.isRunning=!0,this.loopIteration=null,this.loopIterationsCounter++;var e=this.deferredTasksQueue.length;if("undefined"==typeof this.deferredTasksQueue)return Cbola.Logger.getInstance().warnOnceM("TaskManager.taskExecutionLoop","TaskManager::taskLoop -> deferredTasksQueue is undefined"),void(this.isRunning=!1);for(var t=0;e>t;t++){var n=this.deferredTasksQueue.shift();this.executeTask.apply(this,n)}this.deferredTasksQueue.length>0?this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),Cbola.TaskManager.TIMEOUT_IN_MILISECONDS):(this.loopIteration=null,this.isRunning=!1)},Cbola.TaskManager.prototype.addTask=function(e,t,n,i){var o=[e,t,n,i];this.deferredTasksQueue.push(o),this.isRunning||this.loopIteration||(this.loopIteration=setTimeout(this.taskExecutionLoop.bind(this),Cbola.TaskManager.TIMEOUT_IN_MILISECONDS))},Cbola.TaskManager.prototype.removeTask=function(e){Cbola._.remove(this.deferredTasksQueue,function(t){return"undefined"!=typeof t[3]&&this.getTaskName(t)===e}.bind(this))},Cbola.TaskManager.prototype.getTaskName=function(e){var t=e[3],n=e[0];return t?t:n?n.name?n.name:"function":""},window.Cbola=window.Cbola||{},Cbola.Logger=window.Cbola.Logger||function(){"use strict";function e(){var e=(new Date).getTime(),t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)});return t}function t(){function t(e){if(!(b.length<1||v))if(v=!0,"undefined"==typeof e&&(e=b.splice(0,Math.min(5,b.length)),e.retries=0),e.retries<Cbola.Logger.MAX_RETRIES_PER_LOG)if(0===e.retries)a(e);else{var n=Math.min(Math.pow(2,e.retries-1),16);setTimeout(a.bind(Cbola.Logger.getInstance()),1e3*n,e)}else s("Logger -> Sending log to server failed "+Cbola.Logger.MAX_RETRIES_PER_LOG+" times, discarding log entry: {"+e+"}",Cbola.Logger.Levels.WARNING),v=!1,t()}function o(){for(var e=0;e<h.length;e++){var n=h[e];r(n[0],n[1],n[2])}h=[],v||t()}function r(t,i,o){i+=Cbola.Logger.serverSuffix()+", uuid: "+e()+"]";var r={payload:{LogType:t===Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER?Cbola.Logger.Levels.ALERT:t,Message:i,MethodName:o||n.callingMethod,ClassName:"abtest_"+Cbola.Config.abTestId},level:t,retries:0};b.push(r)}function a(e){function n(){if(!o){o=!0,v=!1,e.retries++;var n=Math.min(Math.pow(2,e.retries-1),16);s("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+h.name+": "+h.message+"), retrying in "+n+" seconds...",Cbola.Logger.Levels.DEBUG),t(e)}}for(var o=!1,r=e.map(function(e){return e.payload}),a="",l=r.length-1;l>=0;l--){var c=r[l];1===e.retries?c.Message=c.Message.substring(0,c.Message.length-1)+", retries: "+e.retries+"]":e.retries>1&&(c.Message=c.Message.substring(0,c.Message.length-2)+e.retries+"]");for(var d in c)a+="Logs["+l+"]["+d+"]="+encodeURIComponent(c[d])+"&"}a=a.substr(0,a.length-1);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(4===u.readyState)if(200===u.status||204===u.status)s("Logger -> Log succesfully sent to server: { "+a+" }",Cbola.Logger.Levels.TRACE),v=!1,t();else if(!o){o=!0,e.retries++;var n=Math.min(Math.pow(2,e.retries-1),16);s("Logger -> Sending log to server failed ["+e.retries+"/"+Cbola.Logger.MAX_RETRIES_PER_LOG+"] ("+u.status+": "+u.statusText+"), retrying in "+n+" seconds...",Cbola.Logger.Levels.DEBUG),v=!1,t(e)}};try{var p=y||Cbola.Config.Defaults.loggingServer+"AddLogs";if(i.isEmpty(Cbola.Config.Defaults.loggingServer)&&i.isEmpty(y))return void n();u.open("POST",p,!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.onerror=n,u.send(a)}catch(h){n()}}function s(){var e="CBOLA::",t=Array.prototype.slice.call(arguments),n=t.length>1?t.pop():Cbola.Logger.DEFAULT_LEVEL;if(g>=n){if("[*]"===t[0]&&(e+=t[0],t.shift()),t[0]&&t[0].hasOwnProperty("LoggerColor")){e="%c"+e;var o=t.shift().style;t[0]=e+" "+t[0],t.splice(1,0,o)}else t.unshift(e);n<=Cbola.Logger.Levels.WARNING&&!i.isEmpty(Cbola.Logger.getInstance().callingMethod)&&(t.shift(),t.unshift(Cbola.Logger.getInstance().callingMethod+"(): "),t.unshift(e)),n===Cbola.Logger.Levels.WARNING?console.warn.apply(console,t):n===Cbola.Logger.Levels.ERROR?console.error.apply(console,t):console.log.apply(console,t)}}function l(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var n=Cbola.Logger.getInstance();try{n.callingMethod=arguments.callee.caller.name}catch(i){n.callingMethod=""}return n.log.apply(n,t),n}}}function c(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t){var n=t.shift();if(null!==n&&0!==t.length){var i=Cbola.Logger.getInstance();return i.callingMethod=n,t.push(e),i.log.apply(i,t),i}}}}function d(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t&&0!==t.length){t.push(e);var n=Cbola.Logger.getInstance();try{n.callingMethod=arguments.callee.caller.name}catch(i){n.callingMethod=""}var o=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return m.indexOf(o)>-1?n:(m.push(o),n.log.apply(n,t),n)}}}function u(e){return function(){var t=Array.prototype.slice.call(arguments);if(null!==t){var n=t.shift();if(null!==n&&0!==t.length){var i=Cbola.Logger.getInstance();t.push(e),i.callingMethod=n;var o=t.reduce(function(e,t){return e+" "+JSON.stringify(t)});return m.indexOf(o)>-1?i:(m.push(o),i.log.apply(i,t),i)}}}}var p=!1,h=[],m=[],g=Cbola.Env&&Cbola.Env.DEBUG?Cbola.Logger.Levels.DEBUG:Cbola.Logger.Levels.OFF,f=Cbola.Logger.Levels.ERROR,b=[],y=null,v=!1;return{log:function(){var e=Array.prototype.slice.call(arguments);if(null!==e&&0!==e.length){1===e.length&&e.push(Cbola.Logger.DEFAULT_LEVEL);var i=e[e.length-1],o=f>=i;if(o&&e.unshift("[*]"),s.apply(n,e),o){e.shift(),e.pop(),e[0].hasOwnProperty("LoggerColor")&&e.shift();var a=e.reduce(function(e,t){return e+" "+JSON.stringify(t)});p?(r(i,a),v||t()):h.push([i,a,n.callingMethod])}return n}},alwaysSend:l(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),critical:l(Cbola.Logger.Levels.CRITICAL),error:l(Cbola.Logger.Levels.ERROR),warn:l(Cbola.Logger.Levels.WARNING),notify:l(Cbola.Logger.Levels.NOTICE),info:l(Cbola.Logger.Levels.INFO),debug:l(Cbola.Logger.Levels.DEBUG),trace:l(Cbola.Logger.Levels.TRACE),alwaysSendOnce:d(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnce:d(Cbola.Logger.Levels.ERROR),warnOnce:d(Cbola.Logger.Levels.WARNING),notifyOnce:d(Cbola.Logger.Levels.NOTICE),infoOnce:d(Cbola.Logger.Levels.INFO),debugOnce:d(Cbola.Logger.Levels.DEBUG),traceOnce:d(Cbola.Logger.Levels.TRACE),alwaysSendM:c(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),criticalM:c(Cbola.Logger.Levels.CRITICAL),errorM:c(Cbola.Logger.Levels.ERROR),warnM:c(Cbola.Logger.Levels.WARNING),notifyM:c(Cbola.Logger.Levels.NOTICE),alwaysSendOnceM:u(Cbola.Logger.Levels.ALWAYS_SEND_TO_SERVER),errorOnceM:u(Cbola.Logger.Levels.ERROR),warnOnceM:u(Cbola.Logger.Levels.WARNING),notifyOnceM:u(Cbola.Logger.Levels.NOTICE),enableServer:function(){p=!0,o()},set level(e){g=e},get level(){return g},set serverLevel(e){f=e},get serverLevel(){return f},get queue(){return b},set serverUrl(e){y=e},get serverUrl(){return serverUrl}}}var n,i=Cbola._;return{getInstance:function(){return n||(n=t()),n}}}(),Cbola.Logger.MAX_RETRIES_PER_LOG=10,Cbola.Logger.Levels={ALWAYS_SEND_TO_SERVER:-999,ALERT:1,CRITICAL:2,ERROR:3,WARNING:4,NOTICE:5,INFO:6,DEBUG:7,TRACE:8,NONE:999},Cbola.Logger.DEFAULT_LEVEL=Cbola.Logger.Levels.INFO,Cbola.Logger.Colors={YELLOW:{LoggerColor:"yellow",style:"background: rgba(245, 210, 6, 1); color: black;font-size:13px"},RED:{LoggerColor:"red",style:"background: #8C0000; color: white;font-size:13px"},PALE_RED:{LoggerColor:"pale_red",style:"background: #FE4444; color: black;font-size:13px"},PALE_YELLOW:{LoggerColor:"pale_yellow",style:"background: rgb(250, 255, 202); color: black;font-size:13px"},PALE_GREEN:{LoggerColor:"pale_green",style:"background: rgb(229, 255, 215); color: black;font-size:13px"},PALE_BLUE:{LoggerColor:"pale_blue",style:"background: #98BDF1; color: black;font-size:13px"},PALE_PURPLE:{LoggerColor:"pale_purple",style:"color: #ce93d8;"},BLUE:{LoggerColor:"blue",style:"color: #2196f3;"},ORANGE:{LoggerColor:"orange",style:"color: rgb(255,140,0);"}},Cbola.Env=Cbola.Env||{},Cbola.Env.domainId=Cbola.Env.domainId||0,Cbola.Env.activePid=Cbola.Env.activePid||0,Cbola.Env.wid=Cbola.Env.wid||0,Cbola.Logger.serverSuffix=function(){return" [did: "+Cbola.Env.domainId+", pid: "+Cbola.Env.activePid+", wid: "+Cbola.Env.wid+", pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+", abtestid: "+Cbola.Config.abTestId},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.TimelineService=function(){var e=.05,t=Cbola._,n=Cbola.Logger.getInstance(),i=!t.isEmpty(Cbola.Utils.localStorageService.getItem("cbola_timeline")),o=!t.isUndefined(window.performance&&window.performance.now),r=function(){this.setEnabled(t.random(1,!0)<=e||i),this.isEnabled&&n.info(Cbola.Logger.Colors.BLUE,"TimelineService is active")};return r.prototype.mark=function(e,i){if(this.isEnabled){var o=performance.now();o=t.round(o,2);var r='timeline - "'+e+'" marked on: '+o+" ms";n.alwaysSend(Cbola.Logger.Colors.BLUE,r),t.isUndefined(performance.mark)||performance.mark(e),i&&this.lastMark&&performance.measure&&performance.measure("cbola - "+e,this.lastMark,e),this.lastMark=e}},r.prototype.markStart=function(e){this.isEnabled&&this.mark(e+" started")},r.prototype.markEnd=function(e){if(this.isEnabled){this.mark(e+" completed");try{performance.measure&&performance.measure("cbola - "+e,e+" started",e+" completed")}catch(t){}}},r.prototype.record=function(e,t){return function(){Cbola.Common.TimelineService.markStart(t),e.apply(this,Array.prototype.slice.call(arguments)),Cbola.Common.TimelineService.markEnd(t)}},r.prototype.setEnabled=function(e){this.isEnabled=o&&e},new r}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.CDN=function(){},Cbola.Common.CDN.prototype._getPageElements=function(e,t,n,i,o){function r(){var e=a.domainId;0===a.domainId&&(e="all");var t=c.getCurrentAbTestId(),r=l.Defaults.CDN+t+"/"+a.activePid+"/"+e+"/"+p.UrlData.Hash_128_Bit+"_"+p.UrlData.Hash_160_Bit;return n===d.IN_CONTENT?(r+="_incontent_unified",s.isTablet?r+="_tablet":s.isMobile&&(r+="_mobile"),r+=0===parseInt(i)?"":"_"+i,r+=o?"_fallback_"+o:"",r+=".json"):r+="_elements.json",r}var a=Cbola.Env,s=a.PageProperties,l=Cbola.Config,c=Cbola.Utils,d=Cbola.Enums.ProductTypes,u=Cbola.Logger.getInstance(),p=c.initPayload();p=Cbola._.extend(p,{WidgetId:i,CategoryId:a.categoryId,FallbackMinimalWidth:o||0,Tags:a.tags,Title:a.title,Body:a.body});var h=JSON.stringify(p);u.info(Cbola.Logger.Colors.PALE_GREEN,"Start GPE for PT "+n+": "+Cbola.Utils.getRunTimeInMilis());var m=r();c.isFacebookBrowser&&c.isIOS&&u.alwaysSendM("CDN._getPageElements","Facebook browser from url: "+a.PageProperties.hostname+", Hash_128_Bit: "+a.PageProperties.urlHashMD5+", Hash_160_Bit: "+a.PageProperties.urlHashSHA1+", called CDN URL: "+m);var g=new XMLHttpRequest;g.onload=function(){if(200==g.status){var o=JSON.parse(g.response),r=Cbola._.result(o,"Status");1===r?(o.widgetId=i,c.updateEnv(o),"undefined"!=typeof o.PageId&&u.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+o.PageId),Cbola.Env.PageProperties.IsServerCall=o.IsServerCall=Cbola.Enums.isServerCallTypes.FROM_CDN,t(o,n)):r?Cbola.Common.AnalyticsService.SetPageRequest(o.Status,Cbola.Enums.isServerCallTypes.FROM_CDN):(u.warnM("CDN._getPageElements","CDN._getPageElements returned bad response. Calling getPageElements form server."),e(h,0,n,i))}else try{e&&e(h,0,n,i)}catch(l){u.criticalM("CDN._getPageElements","Cbola_getPageElements Failed in onload. path: "+s.hostname+", pid: "+a.activePid+", Pvid: "+s.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText)}},g.open("GET",m,!0),g.onerror=function(){u.errorM("CDN._getPageElements","Request to CDN failed. path: "+s.hostname+", pid: "+a.activePid+", Pvid: "+s.cbola_pageViewId+", XHR Status: "+this.status+", XHR status text: "+this.statusText+(navigator&&navigator.userAgent?", User Agent: "+navigator.userAgent:""));try{e&&e(h,0,n,i)}catch(t){u.criticalM("CDN._getPageElements","Cbola_getPageElements Failed in onerror. path: "+s.hostname+", pid: "+a.activePid+", Pvid: "+s.cbola_pageViewId)}},g.send()},window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.RequestHandler=function(){var Logger=Cbola.Logger.getInstance(),Utils=Cbola.Utils,LoadStatusTypes=Cbola.Enums.LoadStatusTypes,_=Cbola._,RequestHandler=function(){this.cdn=new Cbola.Common.CDN};return RequestHandler.MAX_RETRIES=10,RequestHandler.prototype.dispatch=function(){function e(e,t){return function(){Cbola.Common.TimelineService.markEnd(t),e&&e.apply(this,Array.prototype.slice.call(arguments))}}function t(t,n,o){return function(){Logger.info("cdn call failed, retrying with direct request");var r="RequestHandler."+i;Cbola.Common.TimelineService.markStart(r),n.unshift(t),n[1]=e(n[1],r),o.callWithRetry.apply(o,["Cbola.Common.RequestHandler."+i,o[i],n])}}var n=Array.prototype.slice.call(arguments),i=n.shift();if(Cbola.Common.CDN.prototype[i]){var o="CDN."+i;Cbola.Common.TimelineService.markStart(o);var r=n.shift(),a=n.shift(),s=e(a,o);n.unshift(s);var l=_.cloneDeep(n),c=t(r,n,this);l.unshift(c),this.cdn[i].apply(this.cdn,l)}else{if(n.length>1){var d="RequestHandler."+i;Cbola.Common.TimelineService.markStart(d),n[1]=e(n[1],d)}Logger.info("no cdn call available, dispatching direct request to server"),this.callWithRetry.apply(this,["Cbola.Common.RequestHandler."+i,this[i],n])}},RequestHandler.prototype.callWithRetry=function(e,t,n){var i=n.shift(),o=0;n.push(o);var r=function(r){if(o>=RequestHandler.MAX_RETRIES){if("undefined"!=typeof r&&r.callback){Logger.errorM("RequestHandler.callWithRetry"+e,"RequestHandler.callWithRetry failed firing "+e+"() after "+RequestHandler.MAX_RETRIES+" errors, calling onerror callback.");var a=r.context||window,s=r.args||[];r.callback.apply(a,s)}else Logger.warnM("RequestHandler.callWithRetry"+e,e+"() failed after "+RequestHandler.MAX_RETRIES+" errors, calling onerror callback...");i&&i(e+"() request failed (retries: "+o+")")}else{var l=Math.min(Math.pow(2,o),16);o++,n.length>0&&(n[n.length-1]=o),l=1===l?250:1e3*l,Logger.warnM("RequestHandler.callWithRetry"+e,e+"() failed, retrying in "+l/1e3+" seconds... ("+o+"/"+RequestHandler.MAX_RETRIES+")"),setTimeout(function(){t.apply(this,n)}.bind(this),l,t,n)}};n.unshift(r),t.apply(this,n)},RequestHandler.prototype.getPageElements=function(e,t,n,i,o){this.dispatch("_getPageElements",e,t,n,i,o)},RequestHandler.prototype.getMoreContent=function(e,t,n){this.dispatch("_getMoreContent",e,t,n)},RequestHandler.prototype.getAds=function(e,t,n,i,o){this.dispatch("_getAds",e,t,n,i,o)},RequestHandler.prototype.getSponsoredLinks=function(e,t){this.dispatch("_getSponsoredLinks",e,t)},RequestHandler.prototype.getLayerScript=function(e,t,n){this.dispatch("_getLayerScript",e,t,n)},RequestHandler.prototype._getPageElements=function(e,t,n,i,o,r){var a=Cbola.Env,s=Cbola.Utils,l=Cbola.Config,c=Cbola.Env.PageProperties,d=Cbola.Common.AnalyticsService,u=s.initPayload();u=_.extend(u,{WidgetId:parseInt(i),CategoryId:a.categoryId,FallbackMinimalWidth:o||0,Tags:a.tags,Title:a.title,Body:a.body}),_.isEmpty(a.PageProperties.SrcUrl)||(u.SrcUrl=a.PageProperties.SrcUrl);var p=JSON.stringify(u);Logger.info("getPageElements start. json: "+p);var h=l.Defaults.queryServer+"GetInContentInfo";$cbola.ajax({type:"POST",url:h,data:p,contentType:"application/json; charset=utf-8",dataType:"json",success:function(o){o.widgetId=i,s.updateEnv(o),c.IsServerCall=1,1===o.Status?("undefined"!=typeof o.PageId&&Logger.info(Cbola.Logger.Colors.PALE_YELLOW,"Page Id: "+o.PageId),r>0&&Logger.alwaysSendM("RequestHandler._getPageElements","RequestHandler._getPageElements succeeded on "+r+" attempts. url: "+c.originalPathNameHost+", pageviewid: "+c.cbola_pageViewId),Cbola.Env.PageProperties.IsServerCall=o.IsServerCall=Cbola.Enums.isServerCallTypes.FROM_SERVER,t&&t(o,n)):2===o.Status||3===o.Status?(l.errorMessage="In automation",e&&e({context:d,callback:d.SetPageRequest,args:[o.Status,Cbola.Enums.isServerCallTypes.FROM_SERVER]})):(Logger.errorM("RequestHandler._getPageElements","RequestHandler._getPageElements failed due to content server bad status: "+o.Status+". URL: "+c.originalPathNameHost+", pid: "+a.activePid),d.SetPageRequest(o.Status,Cbola.Enums.isServerCallTypes.FROM_SERVER))},error:function(){e({context:d,callback:d.SetPageRequest,args:[Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,Cbola.Enums.isServerCallTypes.FROM_SERVER]})}})},RequestHandler.prototype._getMoreContent=function(e,t,n,i,o){i||(i=0);var r=Cbola.Common.UserService,a=Cbola.Config.Defaults.queryServer+"GetMoreContent";Cbola.Logger.getInstance().info("GetMoreContent for elementId: "+n.ElementId),Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_GREEN,"Start to GetMoreContent for elementId"+n.ElementId+": "+Utils.getRunTimeInMilis());var s={UserId:r.getUserId(),UserHistory:r.getItemsHistory()};n=_.extend(n,s);var l=Cbola.Utils.initPayload();n&&("undefined"!=typeof n.CurrentSession&&0===n.CurrentSession.length&&(n.CurrentSession=[0]),l=_.extend(l,n)),$cbola.ajax({type:"POST",url:a,data:l,success:function(o){if(o=JSON.parse(o),o.length>=3){Logger.info(Cbola.Logger.Colors.PALE_GREEN,"End to GetMoreContent for elementId"+n.ElementId+": "+Utils.getRunTimeInMilis());var a=_.map(o,function(e){return new Cbola.InContent.Layers.Item(e)});t(a)}else 5>i?(i++,Logger.debug("RequestHandler::getMoreContent() -> less than 3 items received from server, reseting history and session and trying again... ["+i+"/5]"),0===o.length&&5>i&&(i=4),r.clearItemsHistory(),n.CurrentSession=[0],this._getMoreContent(e,t,n,i++)):0===o.length&&t([])}.bind(this),error:function(){e()}})},RequestHandler.prototype._getAds=function(e,t,n,i,o,r){var a=Cbola.Env,s=Cbola.Config,l=Cbola.Env.PageProperties,c=Cbola.Common.AnalyticsService,d={PageId:a.PageId,PublisherPublicKey:a.activePid,UrlData_Url:l.hostname,UrlData_Hash_128_Bit:a.PageProperties.urlHashMD5,UrlData_Hash_160_Bit:a.PageProperties.urlHashSHA1,AbTestId:s.abTestId,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,WidgetId:n,LayoutTypes:[o],IsMobile:a.PageProperties.isMobile,IsTablet:a.PageProperties.isTablet,DomainId:a.Domain,CategoryId:a.Category,IsSsl:"https:"===document.location.protocol};Logger.info("getAds. json: ",d),$cbola.ajax({type:"POST",url:s.Defaults.adServer+s.Defaults.adServer_method,
contentType:"application/x-www-form-urlencoded; charset=utf-8",data:d,timeout:1e3*Cbola.Config.getAdsCheckElementRetries,success:function(e){var n=JSON.parse(e);1===n.Status?(r>0&&Logger.alwaysSendM("RequestHandler._getAds","RequestHandler._getAds succeeded on "+r+" attempts. url: "+l.originalPathNameHost+", pageviewid: "+l.cbola_pageViewId),t&&t(n),Cbola.EventBus.fire("GetAds"+i,n)):Logger.errorM("RequestHandler._getAds","RequestHandler._getAds failed due to ad server bad status: "+n.Status+". url: "+l.originalPathNameHost+", pageviewid: "+l.cbola_pageViewId)},error:function(t,n){500===t.status?e({context:c,callback:c.SetPageElementRequest,args:[{elementId:i,loadStatus:LoadStatusTypes.AD_SERVER_DOWN}]}):"timeout"===n?e({context:c,callback:c.SetPageElementRequest,args:[{elementId:i,loadStatus:LoadStatusTypes.GET_ADS_MAX_RETRY}]}):0===t.status&&e({context:c,callback:c.SetPageElementRequest,args:[{elementId:i,loadStatus:LoadStatusTypes.GET_ADS_FAILED}]})}})},RequestHandler.prototype._getSponsoredLinks=function(e,t,n){var i=Cbola.Config,o=Cbola.Utils.initPayload();Logger.info("getSponsoredLinks. json: ",o),$cbola.ajax({type:"POST",url:i.Defaults.queryServer+"GetSponsoredLinks",contentType:"application/x-www-form-urlencoded; charset=utf-8",data:o,success:function(e){var n=JSON.parse(e);n&&t&&t(n)},error:function(){e()}})},RequestHandler.prototype._getLayerScript=function(onerror,onsuccess,layerType){var url=Cbola.Env.clientPath+"container/layer_"+layerType+"/cbola_layer_"+layerType+"."+Cbola.Env.clientPathType+"js",xhttp=new XMLHttpRequest;xhttp.onload=function(){200==xhttp.status&&xhttp.response?(eval(xhttp.response),onsuccess()):onerror?onerror():Logger.criticalM("RequestHandler._getLayerScript","RequestHandler._getLayerScript failed due to unknown status")},xhttp.open("GET",url,!0),xhttp.onerror=function(e){onerror&&onerror()},xhttp.send()},new RequestHandler}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.UserService=function(){"use strict";var e=0,t=null,n="en",i="en",o="cbola_userId",r="cbola_itemsArrayHistoryUser",a=Cbola.Utils.localStorageService,s=Cbola.Logger.getInstance(),l=Cbola._,c={};c[Cbola.Config.Language.english]={question:"Question",yourScore:"Your score",score:"Score",nextQuiz:"Next quiz",trueButton:"True",falseButton:"False",challenge:"Challenge",yourFriends:"your friends",advertisement:"Advertisement",youScoredaPerfect:"You Scored a Perfect",YouScoredanAwesome:"You Scored an Awesome",YouScoredaMighty:"You Scored a Mighty",YouScoredaFair:"You Scored a Fair",YouScoredaLame:"You Scored a Lame",YouScoredaRidiculous:"You Scored a Ridiculous",start:"Start",iScored:"I scored",playingIn:"playing in",canYouBeatThat:"Can you beat that?",trueOrFalse:"True or False?",wrong:"Wrong",correct:"Correct",skipAd:"Skip ad",add:"add",toYourSite:"to your site",addThisWidgetToYourSite:"add this widget to your site",whatsNext:"Whats Next ?"},c[Cbola.Config.Language.spanish]={question:"Pregunta",yourScore:"Tu Puntaje",score:"Puntaje",nextQuiz:"Próximo Juego",trueButton:"Verdadero",falseButton:"Falso",challenge:"Desafía",yourFriends:"a tus amigos",advertisement:"Publicidad",youScoredaPerfect:"Tu Puntaje Final es",YouScoredanAwesome:"Tu Puntaje Final es",YouScoredaMighty:"Tu Puntaje Final es",YouScoredaFair:"Tu Puntaje Final es",YouScoredaLame:"Tu Puntaje Final es",YouScoredaRidiculous:"Tu Puntaje Final es",start:"Comenzar",iScored:"Obtuve un puntaje de",playingIn:"jugando",canYouBeatThat:"Puedes vencerme?",trueOrFalse:"Verdadero o Falso?",wrong:"Incorrecto",correct:"Correcto",skipAd:"Omitir Anuncio",add:"Añade",toYourSite:"a tu sitio",addThisWidgetToYourSite:"Añade este widget a tu sitio"},c[Cbola.Config.Language.portuguese]={question:"Pergunta",yourScore:"Sua Pontuação",score:"Pontuação",nextQuiz:"Próximo Jogo",trueButton:"Verdadeiro",falseButton:"Falso",challenge:"Desafie",yourFriends:"os seus amigos",advertisement:"Anúncio",youScoredaPerfect:"Sua Pontuação Final é",YouScoredanAwesome:"Sua Pontuação Final é",YouScoredaMighty:"Sua Pontuação Final é",YouScoredaFair:"Sua Pontuação Final é",YouScoredaLame:"Sua Pontuação Final é",YouScoredaRidiculous:"Sua Pontuação Final é",start:"Começar",iScored:"Obtive uma pontuação",playingIn:"jogando",canYouBeatThat:"Você pode me vencer?",trueOrFalse:"Verdadeiro ou Falso?",wrong:"Incorreto",correct:"Correto"},c[Cbola.Config.Language.russian]={question:"Вопрос",yourScore:"Ваш Результат",score:"Результат",nextQuiz:"Следующий конкурс",trueButton:"Верно",falseButton:"Неверно",challenge:"Озадачьте ",yourFriends:"своих друзей",advertisement:"Реклама",youScoredaPerfect:"Ваш Результат",YouScoredanAwesome:"Ваш Результат",YouScoredaMighty:"Ваш Результат",YouScoredaFair:"Ваш Результат",YouScoredaLame:"Ваш Результат",YouScoredaRidiculous:"Ваш Результат",start:"Старт",iScored:"Я набрал",playingIn:"очков, играя в",canYouBeatThat:"Можете ли вы лучше?",trueOrFalse:"Верно Или Неверно?",wrong:"Ошибка",correct:"Правильно"},c[Cbola.Config.Language.french]={question:"Question",yourScore:"Votre score",score:"Score",nextQuiz:"Prochain quiz",trueButton:"Vrai",falseButton:"Faux",challenge:"Défiez ",yourFriends:"Vos amis",advertisement:"Publicité",youScoredaPerfect:"Votre score est de",YouScoredanAwesome:"Votre score est de",YouScoredaMighty:"Votre score est de",YouScoredaFair:"Votre score est de",YouScoredaLame:"Votre score est de",YouScoredaRidiculous:"Votre score est de",start:"Début",iScored:"J`ai totalisé",playingIn:"en jouant au Quiz",canYouBeatThat:"Tu peux me battre?",trueOrFalse:"Vrai ou Faux",wrong:"Incorrect",correct:"Correct"};var d=function(){this._vocabulary=c[Cbola.Config.Language.deafault]};return d.prototype.getItemsHistory=function(){if(t)return t;var e=a.getItem(r);return e?(e=l.trimEnd(e,","),t=l.split(e,",")):[0]},d.prototype.addItemsToHistory=function(e){var n=this.getItemsHistory();n&&(e=l.union(n,e));var i=l.trimEnd(l.join(l.uniq(e),","),",");t=e,a.setItem(r,i)},d.prototype.clearItemsHistory=function(){t=null,a.removeItem(r)},d.prototype.getUserId=function(){return e?e:e=a.getItem(o)},d.prototype.setUserId=function(e){a.setItem(o,e)},d.prototype.getLanguage=function(){return n},d.prototype.setLanguage=function(e){n=e;try{this._vocabulary=c[e]}catch(t){s.warnM("UserService.setLanguage","UserService Failed to set language: "+e)}},d.prototype.vocabulary=function(){var e="",t=arguments;return 0===t.length?"":(l.forEach(t,function(n,i){e+=this.getWard(n),i!==t.length-1&&(e+=" ")}.bind(this)),e)},d.prototype.getWard=function(e){return this._vocabulary[e]||c[i][e]||""},d.prototype.wasItemAlreadyViewed=function(e){if(e.IgnoreUserHistory)return!1;var t=e.ParentId?e.ParentId:e.Id;return this.getItemsHistory().indexOf(t)>-1},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AnalyticsService=function(){var e=Cbola.Enums.SetClickTypes,t=Cbola.Common.UserService,n=Cbola.Logger.getInstance(),i=Cbola.Logger.Colors,o=Cbola.Utils,r=Cbola.Env,a=!1,s=Cbola._,l={WidgetId:0,PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},c={previousItemTimerStart:0,lastViewDuration:0,viewOrder:0,isWidgetOpen:!0,alreadySentSetPageElements:!1},d=function(){this.pendingForSetPageElementsRequest=[]};return d.prototype.SetPageRequest=function(e,o,s){if(n.info("AnalyticsService::SetPageRequest"),"undefined"==typeof s||!s.outsideIframe){Cbola.Env.PageStatus=e;var l=t.getUserId();if(a&&!l)return void Cbola.taskManager.addTask(this.SetPageRequest,[e,o,s],this);l?0===r.userId&&(r.userId=parseInt(l)):a=!0;var c=0;try{c=Math.floor(100*Math.abs(Cbola.Env.PageProperties.secondGlobal/1e3))/100}catch(d){}var u=0;try{0!==Cbola.Env.PageProperties.publisherScriptExecutionTime&&null!==Cbola.Env.PageProperties.publisherScriptExecutionTime&&(u=Math.floor(100*Math.abs((Cbola.Env.PageProperties.publisherScriptExecutionTime-window.performance.timing.connectStart)/1e3))/100)}catch(d){}var p={PageStatus:e,IsServerCall:o,SecondFromPageLoad:u,SecondGlobal:c,WidgetId:Cbola.Env.widgetId,ScriptDomainId:Cbola.Env.domainId,IntegrationType:Cbola.Env.IntegrationType||0,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};if(e===Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL&&s)p.ScreenHeight=s.height,p.ScreenWidth=s.width;else{p.ScreenWidth=$cbola(window).width();try{p.ScreenHeight=window.outerHeight}catch(d){p.ScreenHeight=$cbola(window).height()}}Cbola.Config.ignoreQueryString&&(p.QueryString=encodeURIComponent(Cbola.Config.queryString));var h=function(e){t.setUserId(e.UserId),Cbola.Env.PageProperties.countryId=e.CountryId,n.info(i.PALE_PURPLE,"SetPageRequest analytics success. UserId: "+r.userId+", CountryId: "+Cbola.Env.PageProperties.countryId)};this.fire("SetPageRequestGeo",p,null,h)}},d.prototype.SetAdsRequest=function(e,t,o,r){n.info(i.PALE_PURPLE,"AnalyticsService::SetAdsRequest");var a=Cbola.Env.icManager.getLayerByElementId(e),s={ElementId:e,Ads:[{TagId:t,ProviderId:"",TriggerType:o}],WidgetId:a.widgetId,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,LayoutType:a.type,ItemType:a.itemType};"undefined"!=typeof r&&(s.HbCpm=r),this.fire("SetAdsRequest",s)},d.prototype.SetPageElementRequest=function(e){n.info(i.PALE_PURPLE,"SetPageElementsRequest");var t,r,a,l,d,u,p,h=e.elementId;if(e.layer?(t=e.layer,h=t.elementId):h&&(t=Cbola.Env.icManager.getLayerByElementId(e.elementId)),!s.isNil(t)&&e.hasOwnProperty("loadStatus")){u=e.loadStatus,l=t.container?$cbola(t.container).width():0,d=t.container?$cbola(t.container).height():0,a=t.itemType||0,r=t.type||0,p="undefined"!=typeof s.result(t,"data.IsServerCall")?t.data.IsServerCall:e.isServerCall?e.isServerCall:Cbola.Env.PageProperties.IsServerCall,t.analyticsData=s.defaults(t.analyticsData,c),t.analyticsData.alreadySentSetPageElements=!0;var m={ElementId:h,LoadStatus:u,PageStatus:Cbola.Env.PageProperties.PageStatus,IsServerCall:p,Width:l,Height:d,WidgetId:t.widgetId,ItemType:a,LayoutType:r,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};t.isViewabilityTestable&&(m.PageHeight=t.getDocumentHeight(),m.PixelsFromTop=o.cumulativeOffset(t.elementForViewability).top),m=this.getParams(m),this.pendingForSetPageElementsRequest.push(m),this.sendSetPageElementsRequest()}},d.prototype.sendSetPageElementsRequest=function(){if(0!==this.pendingForSetPageElementsRequest.length){n.info(i.PALE_PURPLE,"Sending SetPageElementsRequest");var e={Elements:this.pendingForSetPageElementsRequest};this.pendingForSetPageElementsRequest=[],$cbola.ajax({type:"POST",url:Cbola.Config.Defaults.analyticsServer+"SetPageElementsRequestNew",data:e,success:function(){n.info("SetPageElementsRequestNew analytics success.")},error:function(e){n.errorM("AnalyticsService.sendSetPageElementsRequest","SetPageElementsRequestNew failed path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+Cbola.Env.PageProperties.cbola_pageViewId+" Request Status "+e.status)}})}},d.prototype.SetPageElementView=function(e,t,a,l){n.info(i.PALE_PURPLE,"SetPageElementView");var d=r.icManager.getLayerByElementId(e);if(!s.isNil(d)){d.analyticsData=s.defaults(d.analyticsData,c);var u={ElementId:d.elementId,ElementViewId:d.viewId,TeaserType:0,OpenType:t,CloseType:a,WidgetId:d.widgetId,LayoutType:d.type,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT,Duration:s.isUndefined(l)?d.isViewable()?0:d.getViewDuration():l},p=o.checkIfWidgetIsOpen();if(d.analyticsData.isWidgetOpen===p)if(p)d.analyticsData.openedAt=Cbola.Utils.getRunTimeInSecs(),u.Duration=0,d.analyticsData.isWidgetOpen=!1;else if(!p){var h=Cbola.Utils.getRunTimeInSecs(),m=parseFloat(h)-parseFloat(d.analyticsData.openedAt);m=Math.floor(100*m)/100,u.Duration=m,d.analyticsData.isWidgetOpen=!0}this.fire("SetPageElementView",u)}},d.prototype.SetClick=function(t,a,s){if(n.info(i.PALE_PURPLE,"SetClick"),o.isGoogleWebLightAgent())return void n.info("SetClick analytics aborted due to googleweblight userAgent.");var l=r.icManager.getLayerByElementId(t),c=0;s&&(c=s.Id,l.isMobile()||a===e.SHARE_BEFORE_FACEBOOK||a===e.SHARE_BEFORE_TWITTER?c=s.Id:a!==e.SHARE_AFTER_TWITTER&&a!==e.SHARE_AFTER_FACEBOOK||(c=s.ParentId));var d={ElementId:t,ElementViewId:l.viewId,ClickType:a,ItemId:c,WidgetId:l.widgetId,LayoutType:l.type,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};this.fire("SetClick",d,function(e){n.errorOnceM("AnalyticsService.SetClick","SetClick failed. Path: "+Cbola.Env.PageProperties.hostname+", Request Status: "+e.status+", Layout: "+d.LayoutType+", Widget ID: "+d.WidgetId+", Click type: "+d.ClickType+", Item Id: "+d.ItemId+", Time: "+d.Second+", User agent: "+window.navigator.userAgent)})},d.prototype.SetClientError=function(e){n.info(i.PALE_PURPLE,"AnalyticsService::SetClientError");var t={PageId:0,PageViewId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},o={Url:window.location.href.toLowerCase(),FileName:e.filename,Line:e.lineno,Col:e.colno,ErrorMessage:e.message,Type:e.type};s.defaults(o,t),fire("SetClientError",o)},d.prototype.SetPageClose=function(){var e={PageId:0,PublisherId:0,UserId:0,categoryId:0,domainId:0},o={PageId:r.PageId,PublisherId:r.activePid,UserId:t.getUserId(),categoryId:r.Category,domainId:r.Domain};s.defaults(o,e),n.info(i.PALE_PURPLE,"AnalyticsService::SetPageClose");try{this.fire("SetPageClose",o)}catch(a){n.warnM("AnalyticsService.SetPageClose","AnalyticsService::SetPageClose failed")}},d.prototype.SetItemsView=function(e,t){n.info(i.PALE_PURPLE,"AnalyticsService::SetItemsView");var o=Cbola.Env.icManager.getLayerByElementId(e);if(!s.isNil(o)){o.analyticsData=s.defaults(o.analyticsData,c);var r={ElementId:e,ElementViewId:o.viewId,Items:[],WidgetId:o.widgetId,LayoutType:o.type};r.Items=s.map(t,function(e){return e.openType!==Cbola.Enums.ItemViewTypes.NONE&&o.analyticsData.viewOrder++,{Id:e.Id||0,OpenType:e.openType,CloseType:e.closeType,DisplayOrder:e.displayOrder,ViewOrder:e.viewOrder,Duration:e.isViewable?0:e.getViewableDuration(),AnswerId:e.userAnswerId}}),this.fire("SetItemsView",r)}},d.prototype.SetClickTracker=function(e){n.info(i.PALE_PURPLE,"AnalyticsService::SetClickTracker"),e?$cbola.get(e,function(){n.info("AnalyticsService::SetClickTracker succeeded for url:"+e)}):n.warnM("AnalyticsService.SetClickTracker","AnalyticsService::SetClickTracker -> couldn`t set URL for click tracker")},d.prototype.SetImageTeaserMovement=function(e){var t={EffectType:e,ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};this.fire("SetImageTeaserMovement",t)},d.prototype.SetImageTeaserLinkClick=function(){var e={ProductType:Cbola.Enums.ProductTypes.IN_CONTENT};this.fire("SetImageTeaserLinkClick",e)},d.prototype.getParams=function(e){var n={ClientVersion:Cbola.Env.clientVersion,PageViewId:r.PageProperties.cbola_pageViewId,PageId:r.PageId,UserId:t.getUserId(),PublisherId:r.activePid,Second:o.getRunTimeInSecs(),categoryId:r.Category,domainId:r.Domain,IsMobile:r.PageProperties.isMobile,IsTablet:r.PageProperties.isTablet,isPortrait:r.PageProperties.isPortrait,AbTestId:Cbola.Config.abTestId};return e&&(n=s.extend(n,e)),s.defaults(n,l),n},d.prototype.fire=function(e,t,o,a){var s=this.getParams(t);$cbola.ajax({type:"POST",url:Cbola.Config.Defaults.analyticsServer+e,data:s,success:function(t){n.info(i.PALE_PURPLE,"fired "+e+" analytics to server.",s),Cbola.Env.DEBUG&&console.table&&s.Items&&console.table(s.Items),a&&a(t)},error:o||function(t){n.errorM("AnalyticsService.fire"+e,e+" failed. path: "+r.PageProperties.hostname+", pid: "+r.activePid+", Pvid: "+r.PageProperties.cbola_pageViewId+" Request Status "+t.status)}})},new d}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.IframeBuster=function(e,t,n){var i=e.DefaultSettings,o="undefined"!=typeof i.iFrameAdjust?i.iFrameAdjust:!1;"undefined"!=typeof i.iFrameAdjustForTablet&&Cbola.Env.PageProperties.isTablet&&(o=!0),this.options={LocationSelector:i.LocationSelector,iFrameAdjust:o,mobileiFrameAdjust:"undefined"!=typeof i.mobileiFrameAdjust?i.mobileiFrameAdjust:!1,iFrameBusterWidth:i.iFrameBusterWidth,outsideIframe:e.outsideIframe},this.layerType=n,this.widgetId=t},Cbola.Common.IframeBuster.prototype.init=function(){this.checkIframeDimension(),this.options.outsideIframe&&this.pushScriptAboveIframe()},Cbola.Common.IframeBuster.prototype.checkIframeDimension=function(e,t){var n=this.options,i=Cbola.Logger.getInstance(),o=Cbola.Env.PageProperties.isMobile;if(n.LocationSelector||!n.iFrameAdjust&&!o||!n.mobileiFrameAdjust&&o)return!0;var r=n.iFrameBusterWidth||0;e=e||0,t=t||!1;var a=this.getCurrentIframe();if(!a)return!1;var s=a.getBoundingClientRect();try{if(n.iFrameAdjust||n.mobileiFrameAdjust){var l=Cbola.Config.getLayersDefaultSizeForIframe(this.layerType);(l.height+e>s.height||t)&&(i.info("Iframe's height was change from: "+s.height+" to "+l.height+e),a.style.height=l.height+e+"px"),0!==r?a.style.width=r+"px":-1===l.width?(i.info("Iframe's width was change from: "+s.width+" to 100%"),a.style.width="100%"):l.width>s.width&&(i.info("Iframe's width was change from: "+s.width+" to "+l.width),a.style.width=l.width+"px")}}catch(c){i.error("IframeBuster.checkIframeDimension, catch2, Path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid)}},Cbola.Common.IframeBuster.prototype.pushScriptAboveIframe=function(){var e=parent.document.getElementsByTagName("body")[0];e.insertAdjacentHTML("beforeend",'<script class="carambola_InContent" manualBuild="true"></script>');var t=document.createElement("script");t.src="//route.carambo.la/inimage/getlayer?pid="+Cbola.Env.activePid+"&did="+Cbola.Env.domainId,t.id="carambola_proxy",t.setAttribute("mediatype","InContent");var n=parent.document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)},Cbola.Common.IframeBuster.prototype.setIframeSize=function(e,t){var n=Cbola.Env.PageProperties.isMobile;if(!(this.options.LocationSelector||!this.options.iFrameAdjust&&!n||!this.options.mobileiFrameAdjust&&n)){var i=this.getCurrentIframe();if(i){var o="undefined"!=typeof e?e:window.parent.innerWidth,r="undefined"!=typeof t?t:0;i.style.width=o+"px",0!==r&&(i.style.height=r+"px")}}},Cbola.Common.IframeBuster.prototype.getCurrentIframe=function(){try{if("undefined"!=typeof window.frameElement&&null!==window.frameElement)return window.frameElement;Cbola.Logger.getInstance().errorOnceM("IframeBuster.getCurrentIframe","iframeBuster::getCurrentIframe couldnt get iframe element (undefined or null). wid: "+this.widgetId)}catch(e){Cbola.Logger.getInstance().errorOnceM("IframeBuster.getCurrentIframe","iframeBuster::getCurrentIframe couldnt get iframe element (exception) wid: "+this.widgetId+" e:",e)}},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Item=function(){var e=Cbola.Utils,t=Cbola._,n=function(e){t.extend(this,e),this.becameViewableAt=0,this.lastViewableDuration=0,this.viewOrder=1,this.displayOrder=1,this.isViewable=!1,this.userAnswerId=0};return n.prototype.setOpenType=function(e){this.openType=e},n.prototype.setCloseType=function(e){this.closeType=e},n.prototype.setDisplayOrder=function(e){this.displayOrder=e},n.prototype.setViewOrder=function(e){this.viewOrder=e},n.prototype.setUserAnswerId=function(e){this.userAnswerId=e||0},n.prototype.setViewable=function(t){if(this.isViewable=t,t)this.becameViewableAt=e.getRunTimeInSecs();else{var n=e.getRunTimeInSecs()-this.becameViewableAt;this.lastViewableDuration=Math.round(100*n)/100}},n.prototype.getViewableDuration=function(){return this.isViewable?e.getRunTimeInSecs()-this.becameViewableAt:this.lastViewableDuration},n.prototype.isAd=function(){return this.type===n.Types.AD},n.Types={FACT:1,TIP:2,QUOTE:3,ON_THIS_DAY:4,TRIVIA:5,DIED_THIS_DAY:6,TRIVIA_MULTI:7,TRIVIA_MULTI_PAIRS:8,GAME_SET:254,CHART:255,AD:-1e3,SPONSORED_LINKS:-2e3},n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.BasicService=function(){var e={},t=[],n=Cbola.Common.RequestHandler,i=Cbola.Common.UserService,o=Cbola.Logger.getInstance(),r=Cbola._,a=function(){this.pendingItems=[]};return a.prototype.getMoreItems=function(t,i,a,s,l){var c=[];l=l?l:0,"undefined"==typeof s&&(s=5);var d=this.getOrCreateSession(t);if(this.pendingItems.length>=s){c=r.take(this.pendingItems,5),r.pullAll(this.pendingItems,c);var u=r.differenceBy(c,d,"Id");e[t]=r.unionBy(d,u,"Id"),a(u)}else{if(o.debug(this.name+"::getMoreItems -> quering server for more items..."),l++,l>2&&(s--,l=0,2>s))return;var p={WidgetId:i,ElementId:t,CurrentSession:r.map(d,function(e){return e.Id})};p=this.extendParams(p),n.getMoreContent(function(){a([])},function(e){return o.debug(this.name+"::getMoreItems -> got more items from server"),0===e.length?void a([]):(e=this.transformServerResponse(e),this.pendingItems=r.unionBy(this.pendingItems,e,"Id"),void this.getMoreItems(t,i,a,s,l))}.bind(this),p)}},a.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=t[e.ElementId]||Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(n){e.FallbackMinimalWidth=0}return e},a.prototype.transformServerResponse=function(e){return e},a.prototype.clearSession=function(t){return e[t]=[],this},a.prototype.getOrCreateSession=function(t){var n=null;return"undefined"==typeof e[t]?(n=[],e[t]=n):n=e[t],n},a.prototype.addItem=function(e){e&&!i.wasItemAlreadyViewed(e)&&this.pendingItems.push(e)},a.prototype.getAll=function(e){return this.pendingItems},a}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.FactsService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,n=function(){e.call(this),this.name="FactsService"};return t.extend(n.prototype,e.prototype),n.prototype.extendParams=function(t){return e.prototype.extendParams.call(this,t),t},new n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.OnThisDayService=function(){function e(e){var t=Date.parse(e.OnThisDayDate);isNaN(t)||(o=new Date(t),r=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate())}function t(e){return a?!0:e&&e.OnThisDayDate?n(o,new Date(e.OnThisDayDate)):!1}function n(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var i=Cbola._,o=new Date,r=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),a=!1,s=Cbola.InContent.Layers.Services.BasicService,l={es:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubure","Noviembre","Diciembre"],fr:["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"],ru:["–Ø–Ω–≤–∞—Ä—å","–§–µ–≤—Ä–∞–ª—å","–ú–∞—Ä—Ç","–ê–ø—Ä–µ–ª—å","–ú–∞–π","–ò—é–Ω—å","–ò—é–ª—å","–ê–≤–≥—É—Å—Ç","–°–µ–Ω—Ç—è–±—Ä—å","–û–∫—Ç—è–±—Ä—å","–ù–æ—è–±—Ä—å","–î–µ–∫–∞–±—Ä—å"],pt:["Janeiro","Fevereiro","Mar√ßo","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],en:["January","February","March","April","May","June","July","August","September","October","November","December"]},c=function(){s.call(this),this.name="OnThisDayService"};return i.extend(c.prototype,s.prototype),c.prototype.extendParams=function(e){return s.prototype.extendParams.call(this,e),e.ClientDate=r,e},c.prototype.transformServerResponse=function(e){var n=i.filter(e,t);return n.sort(),n},c.prototype.addItem=function(e){t(e)&&s.prototype.addItem.call(this,e)},c.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},c.prototype.setTotalItemsForToday=function(e){var t=0;for(var i in e){var r=e[i],a=new Date(r.Day);n(o,a)&&(t=r.ItemCount)}this.totalItemsAvailableOnServer=t},c.prototype.getDateDay=function(){return o.getDate()},c.prototype.getMonthName=function(e){return e=l.hasOwnProperty(e)?e:"en",l[e][o.getMonth()]},c.prototype.setIgnoreClientDate=function(t,n){a=Cbola.Utils.toBool(t),"undefined"!=typeof n&&e(n)},new c}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisDayService=function(){function e(e){return e&&e.OnThisDayDate?t(n,new Date(e.OnThisDayDate)):!1}function t(e,t){return e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}var n=new Date,i=Cbola._,o=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),r=Cbola.InContent.Layers.Services.BasicService,a=function(){r.call(this),this.name="DiedThisDayService"};return i.extend(a.prototype,r.prototype),a.prototype.extendParams=function(e){return r.prototype.extendParams.call(this,e),e.ClientDate=o,e},a.prototype.transformServerResponse=function(t){var n=i.filter(t,e);return n.sort(),n},a.prototype.addItem=function(t){e(t)&&r.prototype.addItem.call(this,t)},a.prototype.getTotalOfItemsAvailableForToday=function(){return this.totalItemsAvailableOnServer},a.prototype.setTotalItemsForToday=function(e){var i=0;for(var o in e){var r=e[o],a=new Date(r.Day);t(n,a)&&(i=r.ItemCount)}this.totalItemsAvailableOnServer=i},a.prototype.getDateDay=function(){return n.getDate()},new a}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.DiedThisWeekService=function(){var e=Cbola.InContent.Layers.Services.BasicService,t=Cbola._,n=function(){e.call(this),this.name="DiedThisWeekService",this.totalItemsAvailableOnServer=0};return t.extend(n.prototype,e.prototype),n.prototype.getTotalItemsAvailableForThisWeek=function(){return this.totalItemsAvailableOnServer},n.prototype.setTotalItemsForThisWeek=function(e){for(var n=0,i=0;i<e.length;i++){var o=e[i];n+=t.result(o,"ItemCount",0)}this.totalItemsAvailableOnServer=n},new n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Services=Cbola.InContent.Layers.Services||{},Cbola.InContent.Layers.Services.TriviaService=function(){var e=1,t=[],n=Cbola.Common.UserService,i=Cbola.Logger.getInstance(),o={},r=Cbola.InContent.Layers.Item.Types,a={TRUE_FALSE:[r.TRIVIA],MULTI_ANSWER:[r.TRIVIA_MULTI,r.TRIVIA_MULTI_PAIRS]},s={},l={},c=0,d=Cbola._,u=Cbola.Common.RequestHandler,p=function(){this.triviaTypes={};for(var e in a)a.hasOwnProperty(e)&&(this.triviaTypes[e]=e)};p.prototype.setFirstItemId=function(e){c=e},p.prototype.getNewGame=function(t,n,o,r,a){if("undefined"==typeof a&&(a=0),a>e)return void r(null);a++;var d=this.getPendingGamesByTriviaType(o),u=this.getOrCreateSession(t);if(d.length>0&&!c){var p=d.shift();delete s[p.id],p.widgetId=n,p.elementId=t,u.push(p),l[t]=u,r(p)}else i.debug("TriviaService::getNewGame -> quering server for more items..."),this.getMoreFromServer(t,n,o,function(){this.getNewGame(t,n,o,r,a)}.bind(this))},p.prototype.prepareNewGame=function(e,t,n){var i=this.translateItemToTriviaType(n);this.getPendingGamesByTriviaType(i).length>0||this.getMoreFromServer(e,t,i)},p.prototype.getMoreFromServer=function(e,t,o,r){var a=this.getOrCreateSession(e);i.debug("TriviaService::getNewGame -> quering server for more items...");var l={WidgetId:t,ElementId:e,CurrentSession:d.map(a,function(e){return e.id}),UserHistory:n.getItemsHistory(),FirstItemId:c};l=this.extendParams(l),u.getMoreContent(function(e){r&&r([])},function(e){var t,n,a,l=this.getPendingGamesByTriviaType(o);i.debug("TriviaService::getMoreFromServer -> got more items from server"),a=d.groupBy(e,"ParentId");for(var u in a)n=a[u],t=s[u],t&&!t.hasAllItems()?t.items=d.unionBy(t.items,n,"Id"):t||(t=new h(n)),c?(c=0,l.unshift(t)):l.push(t),s[u]=t;r&&r(e)}.bind(this),l)},p.prototype.extendParams=function(e){try{e.FallbackMinimalWidth=t[e.ElementId]||Cbola.InContent.Manager.getLayerByElementId(e.ElementId).fallbackMinimalWidth||0}catch(n){e.FallbackMinimalWidth=0}return e},p.prototype.clearSession=function(e){l[e]=[]},p.prototype.getOrCreateSession=function(e){var t=null;return"undefined"==typeof l[e]?(t=[],l[e]=t):t=l[e],t},p.prototype.addItem=function(e){var t=e.ParentId,n=e.Type,i=s[t];if(i)i.hasAllItems()||(i.items=d.unionBy(i.items,[e],"Id"));else{var o=new h([e]),r=this.getPendingGamesByTriviaType(this.translateItemToTriviaType(n));r.push(o),s[t]=o}},p.prototype.getAll=function(){return o},p.prototype.getPendingGamesByTriviaType=function(e){return o.hasOwnProperty(e)||(o[e]=[]),o[e]},p.prototype.translateItemToTriviaType=function(e){for(var t in a)if(a.hasOwnProperty(t)&&a[t].indexOf(e)>-1)break;return t};var h=function(e){this.id=e[0].ParentId,this.gameType=e[0].Type,this.title=this._extractGameTitleFromItems(e),this.shortTitle=this._extractShortGameTitleFromItems(e),this.items=e,this.currItemIdx=0,this.score=0,this.firstItem=e[0].Id,this.isCompleted=!1};return d.extend(h.prototype,Cbola.InContent.Layers.Item.prototype),h.prototype.getQuestionItem=function(e){return this.items[e]},h.prototype.getCurrentQuestionItem=function(){return this.items[this.currItemIdx]},h.prototype.getNextQuestionItem=function(){return this.items[this.currItemIdx+1]},h.prototype.getCurrentQuestionNumber=function(){return this.currItemIdx+1},h.prototype.hasEnded=function(){return this.isCompleted},h.prototype.answerCurrentQuestion=function(e){if(this.isCompleted)return null;for(var t=this.items[this.currItemIdx],i=!1,o=0;o<t.Answers.length;o++){var r=t.Answers[o];if(e==r.Id){1===r.Type&&(this.score++,i=!0);break}}return this.currItemIdx++,this.isAboutToEnd()&&Cbola.InContent.Layers.Services.TriviaService.prepareNewGame(this.elementId,this.widgetId,this.gameType),this.currItemIdx===this.items.length&&(this.isCompleted=!0,n.addItemsToHistory([this.id])),i},h.prototype.currentQuestionCorrectAnswerIdx=function(){if(this.isCompleted)return null;for(var e=this.items[this.currItemIdx],t=0;t<e.Answers.length;t++)if(1===e.Answers[t].Type)return t},h.prototype.restart=function(){this.score=0,this.currItemIdx=0,this.isCompleted=!1},h.prototype.hasAllItems=function(){return this.gameType===Cbola.InContent.Layers.Item.Types.TRIVIA?10===this.items.length:!1},h.prototype._extractGameTitleFromItems=function(e){for(var t="",n=0;n<e.length;n++)if(!d.isEmpty(e[n].ChartTitle)){t=e[n].ChartTitle;break}return t},h.prototype._extractShortGameTitleFromItems=function(e){for(var t="",n=0;n<e.length;n++)if(!d.isEmpty(e[n].Title)){t=e[n].Title;break}return t},h.prototype.isAboutToEnd=function(){return this.currItemIdx+2===this.items.length},new p}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.FontsManager=function(){var e=null,t=[],n=Cbola._,i=function(){};return i.prototype.alreadyLoaded=function(e){return n.indexOf(e,t)>-1},i.prototype.getOpenSans=function(){var e="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,300,700,800";this.loadFont(e)},i.prototype.getOswald=function(){var e="//fonts.googleapis.com/css?family=Oswald:400,700,300";this.loadFont(e)},i.prototype.getNunito=function(){var e="//fonts.googleapis.com/css?family=Nunito:500,600,300,700,400";this.loadFont(e)},i.prototype.getRoboto=function(){var e="//fonts.googleapis.com/css?family=Roboto:500,300,700,400";this.loadFont(e)},i.prototype.getIonicons=function(){var e="//code.ionicframework.com/ionicons/2.0.1/fonts/";if(!this.alreadyLoaded(e)){t.push(e);var n=document.createElement("style");n.appendChild(document.createTextNode('@font-face { font-family: "Ionicons"; src: url("'+e+'ionicons.eot?v=2.0.0"); src: url("'+e+'ionicons.eot?v=2.0.0#iefix") format("embedded-opentype"), url("'+e+'ionicons.ttf?v=2.0.0") format("truetype"), url("'+e+'ionicons.woff?v=2.0.0") format("woff"), url("'+e+'ionicons.svg?v=2.0.0#Ionicons") format("svg"); font-weight: normal; font-style: normal; }')),document.head.appendChild(n)}},i.prototype.getFontsAwesome=function(){var e="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.eot";
if(!this.alreadyLoaded(e)){t.push(e);var n=document.createElement("style");n.appendChild(document.createTextNode("			@font-face {			font-family: 'FontAwesome';			src: url('"+e+"?v=4.3.0');			src: url('"+e+"?#iefix&v=4.3.0') format('embedded-opentype'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff2?v=4.3.0') format('woff2'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.woff?v=4.3.0') format('woff'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.ttf?v=4.3.0') format('truetype'), url('//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/fonts/fontawesome-webfont.svg?v=4.3.0#fontawesomeregular') format('svg');			font-weight: normal;			font-style: normal;			}			")),document.head.appendChild(n)}},i.prototype.loadFont=function(e){if(this.alreadyLoaded(e))Cbola.Logger.getInstance().debug("FontsManager -> ",e," was previously loaded, no need to load again.");else{t.push(e);var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(n)}},e=new i},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Manager=function(){"use strict";function e(){try{var e=window.frameElement;if(e){for(var t=e;t&&!t.classList.contains("gpt");)t=t.parentElement;t&&(t.classList.remove("hidden"),t.style.setProperty("max-height","initial","important"),t.style.setProperty("height","initial","important"),t.children[0].style.setProperty("width","initial","important"))}}catch(n){}}var t,n=Cbola._,i=Cbola.Common.AnalyticsService,o=Cbola.Utils,r=Cbola.Logger.getInstance(),a=Cbola.Logger.Colors,s=Cbola.Config,l=Cbola.Common.TimelineService,c=Cbola.Env,d=o.isWindowTopSupported()?window.top:window,u=Cbola.EventBus,p=function(e){switch(e){case 121:return 480;case 120:return 500;case 130:case 131:case 132:case 133:case 134:case 135:case 140:case 150:case 151:case 152:return 300;case 1e3:case 1100:case 1400:return 0;default:return 440}},h=function(){this.elementId=0};h.prototype.getGlobalElementId=function(){return this.elementId++,-1*this.elementId},h.prototype.getElementId=function(){return this.elementId};try{d.Cbola=d.Cbola||{},d.Cbola.Globals=d.Cbola.Globals||{},d.Cbola.Globals.elementIdGenerator=d.Cbola.Globals.elementIdGenerator||new h,t=d.Cbola.Globals.elementIdGenerator}catch(m){Cbola.Globals.elementIdGenerator=Cbola.Globals.elementIdGenerator||new h,t=Cbola.Globals.elementIdCounter}var g=function(){this.layerByElementId={},this.layerByWidgetId={},this.inProgressByWidgetIds={},this.bind()};return g.prototype.bind=function(){u.addEventListener(u.Events.LAYER_READY,function(e){var t=e.detail;this.onLayerReady(t)}.bind(this))},g.prototype.getLayerByElementId=function(e){return this.layerByElementId[e]},g.prototype.getLayerByWidgetId=function(e){return this.layerByWidgetId[e]},g.prototype.getActiveLayersCount=function(){var e,t=0;if(n.isEmpty(this.layerByWidgetId))return 0;for(var i in this.layerByWidgetId)this.layerByWidgetId.hasOwnProperty(i)&&(e=this.layerByWidgetId[i],(e.isAttached||e.view&&e.view.isAttached)&&t++);return t},g.prototype.isInImageData=function(e){for(var t=[e.Image,e.Title],n=0;n<t.length;n++)if("undefined"==typeof t[n]||null===t[n])return!1;return!0},g.prototype.getScriptElementByWidgetId=function(e){for(var t=document.querySelectorAll(".carambola_InContent"),n=0;n<t.length;n++){var i=t[n],o=i.getAttribute("cbola_wid");if(o==e||null===o)return Cbola.Utils.dataset(i,"activeId",n),i}return null},g.prototype.init=function(t){o.CbolaSendLogsTimes("cbola_initializeInContent->Start");var i={};i.data=t,this.DefaultSettings=t.DefaultSettings,i.DefaultSettings=t.DefaultSettings,n.result(t,"DefaultSettings.RemoveHiddenClass",!1)&&e(),this.deferredInit(i)},g.prototype.init=l.record(g.prototype.init,"InContentManager.init"),g.prototype.deferredInit=function(e){var s,l=null,d=this.getScriptElementByWidgetId(e.data.widgetId);if(null===d)return void r.info(a.PALE_RED,"script Wasn`t Found for widget id:"+s);c.widgetId=e.data.widgetId;var u="true"===d.getAttribute("manualBuild");if(u&&d.removeAttribute("status"),!d.getAttribute("status")){d.setAttribute("status","started"),r.info("InContent found"),s=isNaN(e.data.widgetId)?"0":e.data.widgetId,l=t.getGlobalElementId(),Cbola.Utils.dataset(d,"elementId",l);try{e.type=e.DefaultSettings.Layouts[0].LayoutType,e.itemType=e.DefaultSettings.Layouts[0].ItemType}catch(p){r.info("initialize InContent layer type error")}var h=u?!1:n.result(e.DefaultSettings,"outsideIframe",!1),m=new Cbola.Common.IframeBuster({outsideIframe:h,DefaultSettings:e.DefaultSettings},s,e.type);if(m.init(),"undefined"!=typeof e.DefaultSettings.LocationSelector){if(!this.isInImageData(e.data))return r.info("Cbola_JsonData of InContent failed"),i.SetPageRequest(Cbola.Enums.PageRequestTypes.CORRUPTED_JSON,e.data.IsServerCall),!0;r.info("Cbola_JsonData of InContent success"),i.SetPageRequest(Cbola.Enums.PageRequestTypes.PAGE_VIEW,e.data.IsServerCall,{outsideIframe:h})}n.extend(e,{activeId:Cbola.Utils.dataset(d,"activeId"),iframeBuster:m,element:null,elementId:l,widgetId:s}),(this.layerByElementId[e.elementId]||this.layerByWidgetId[e.widgetId])&&r.errorM("InContentManager.deferredInit",a.PALE_RED,"A layer with the same element id  or same widget id already exists, this should not happen!"),this.layerByElementId[e.elementId]=e,this.inProgressByWidgetIds[s]=e,h||(e.scriptElement=d,this.findElement(e))}o.CbolaSendLogsTimes("cbola_initializeInContent->End")},g.prototype.findElement=function(e){try{"undefined"!=typeof e.DefaultSettings.LocationSelector?this.attachElementToSelector(e):(r.info("There is no a selector element"),Cbola.Utils.fixPixelHeight(e.scriptElement),this.isCompatibleWidth(e))}catch(t){i.SetPageRequest(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),r.criticalM("InContentManager,findElement",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.findElement. url: "+c.PageProperties.hostname,t)}},g.prototype.detachAllLayers=function(){Cbola.taskManager.removeTask("checkForPendingScripts");for(var e in this.layerByWidgetId)if(this.layerByWidgetId.hasOwnProperty(e)&&this.layerByWidgetId[e]){var t=this.layerByWidgetId[e];t.scriptElement&&(t.scriptElement.dataset?delete t.scriptElement.dataset.queued:t.scriptElement.removeAttribute("data-queued")),t.options.ResetOnReAttach=!0,this.detachLayerByWidgetId(e)}Cbola.taskManager.addTask(Cbola.bootstrapper.checkForPendingScripts,[],Cbola.bootstrapper,"checkForPendingScripts")},g.prototype.detachLayerByWidgetId=function(e){Cbola.taskManager.removeTask("checkForPendingScripts");var t=this.layerByWidgetId[e];t?(Cbola.Common.AdsService.unRegisterLayerManager(t.elementId),t.detach&&t.detach(),t.view&&t.view.detach&&t.view.detach(),n.result(t,"options.ResetOnReAttach",!1)&&delete this.layerByWidgetId[e]):this.inProgressByWidgetIds.hasOwnProperty(e)&&delete this.inProgressByWidgetIds[e]},g.prototype.attachLayerByWidgetId=function(e){var t=this.layerByWidgetId[e];if(t)if(t.isAttached||t.view&&t.view.isAttached)Cbola.Common.AnalyticsService.SetPageElementRequest({layer:t,loadStatus:Cbola.Enums.LoadStatusTypes.SAME_ID_WIDGETS}),r.info(a.PALE_RED,"There are scripts with the same wid: "+e+" already attached.");else{if(!document.body.contains(t.topContainer)){var n=this.getScriptElementByWidgetId(e);$cbola(n).after(t.topContainer)}t.scriptElement=n,this.isCompatibleWidth(t)}else Cbola.bootstrapper.isExistingWidgetId(e)&&!this.inProgressByWidgetIds.hasOwnProperty(e)?this.resetLayer(e):Cbola.bootstrapper.checkForPendingScripts()},g.prototype.reattachLayer=function(e){this.adsProcessInit(e),e.attach&&e.attach(),e.view&&e.view.attach&&e.view.attach(e.container),u.fire(u.Events.LAYER_READY,e),e.onAfterLoad()},g.prototype.resetLayer=function(e){Cbola.Common.RequestHandler.getPageElements(function(){},function(e){Cbola.bootstrapper.initializeServices({detail:e}),this.init(e)}.bind(this),Cbola.Enums.ProductTypes.IN_CONTENT,e)},g.prototype.attachElementToSelector=function(e,t){var n=e.scriptElement,i=t||0;if(i++,i>=s.findICSelectorElementMaxRetries)return r.info("findICSelectorElement was failed. elementId:"+e.elementId),void u.fire(u.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:Cbola.Enums.LoadStatusTypes.SELECTOR_NOT_FOUND});r.info("retry of SelectorElement for elementId:"+e.elementId+", cbola_findICSelectorElement function, retries: "+i);for(var o=0;o<e.DefaultSettings.LocationSelector.length;o++){var a=e.DefaultSettings.LocationSelector[o],l=a.SelectorValue,c=document.querySelectorAll(l);if(c.length>0){r.info("found a selector element");var d=Math.min(a.AppearancePosition,c.length-1);return r.info(c[d]),1===a.LocationType?$cbola(c[d]).prepend(n):$cbola(c[d]).append(n),void this.isCompatibleWidth(e)}}r.warnM("InContentManager.attachElementToSelector","Selector element was not found"),Cbola.taskManager.addTask(this.attachElementToSelector.bind(this),[e,i])},g.prototype.isCompatibleWidth=function(e){var t=e.scriptElement,n=this,o=Cbola.Templates.createElement("width_check.html"),l=[],d=[15,500,1e3,2500,5e3];t.parentNode.insertBefore(o,t.nextSibling),function u(t){try{t=t||1;for(var p=o.clientWidth,h=o,m=0;0===p&&m<=s.maxParentElementsCheckWidth&&h;)m++,l.length>=m?h=l[m-1]:(h=h.parentElement,l.push(h)),h&&(p=h.clientWidth);if(p>0)$cbola(o).remove(),t>1&&r.alwaysSendM("InContentManager.isCompatibleWidth","IC width 0 check - succeeded after attempt "+t+". url: "+c.PageProperties.hostname+", pageviewid: "+c.PageProperties.cbola_pageViewId),n.checkMinWidth(e,p);else if(d.length)window.setTimeout(u,d.shift(),++t);else{var g=o.offsetParent,f="Root Parent Exists: "+!!g+(g?", Parent Offset Width: "+g.clientWidth:"")+", Is Inside Iframe: "+!(window===window.top);r.errorM("InContentManager.isCompatibleWidth","IC too small - div width is 0. Parent Iterations: "+m+", "+f+", url: "+c.PageProperties.hostname+", pageviewid"+c.PageProperties.cbola_pageViewId);var b={width:0,height:o.parentElement?o.parentElement.clientHeight:0};$cbola(o).remove(),i.SetPageRequest(Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL,e.data.IsServerCall,b)}}catch(y){i.SetPageRequest(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),r.criticalM("InContentManager.isCompatibleWidth",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.isCompatibleWidth. url: "+c.PageProperties.hostname,y)}}(1)},g.prototype.checkMinWidth=function(e,t){try{var o=p(e.type),l=n.result(e,"DefaultSettings.MaxWidthCompensation",0);if(o>t&&(t+=l,o>t)){try{t=e.scriptElement.parentElement.clientWidth}catch(d){}if(o>t){for(var h=n.clone(s.inContentFallbackWidths);h.length>0;){if(t>=h[0])return e.fallbackMinimalWidth=h[0],void Cbola.Common.RequestHandler.getPageElements(function(){},function(t){this.fallbackLayerReset(e,t)}.bind(this),Cbola.Enums.ProductTypes.IN_CONTENT,e.widgetId,h[0]);h.shift()}if(r.info(a.PALE_RED,"parent of InContent-container is too small: "+t),c.PageProperties.checkInContentLocation&&c.DEBUG&&$cbola(e.scriptElement).after('<div style="width:400px;height:400px;background-color:#ff000f">Carambola:parent of InContent-container is too small</div>'),"undefined"!=typeof e.DefaultSettings.LocationSelector)r.info("findICSelectorElement was failed. elementId:"+e.elementId),u.fire(u.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:Cbola.Enums.LoadStatusTypes.SELECTOR_TOO_SMALL});else{r.errorM("InContentManager.checkMinWidth","ICsmall, width too small for IC. Width: "+t+", url: "+c.PageProperties.hostname+", pageviewid"+c.PageProperties.cbola_pageViewId);var m={width:t,height:e.scriptElement.parentElement?e.scriptElement.parentElement.clientHeight:0};i.SetPageRequest(Cbola.Enums.PageRequestTypes.DIV_TOO_SMALL,e.data.IsServerCall,m)}return}}"undefined"==typeof e.topContainer?this.buildStructure(e):this.reattachLayer(e)}catch(d){i.SetPageRequest(Cbola.Enums.PageRequestTypes.INITIALIZE_FAILED,e.data.IsServerCall),r.criticalM("InContentManager.checkMinWidth",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.checkMinWidth. url: "+c.PageProperties.hostname,d)}},g.prototype.fallbackLayerReset=function(e,t){if(e){Cbola.bootstrapper.initializeServices({detail:t}),e.data=t,e.DefaultSettings=t.DefaultSettings;try{e.type=e.iframeBuster.layerType=e.DefaultSettings.Layouts[0].LayoutType,e.itemType=e.DefaultSettings.Layouts[0].ItemType}catch(n){r.info("initialize InContent layer type error")}this.buildStructure(e)}else r.errorM("InContentManager.fallbackLayerReset","InContentManager.fallbackLayerReset failed to reset layer")},g.prototype.buildStructure=function(e){if("undefined"==typeof e.DefaultSettings.LocationSelector){if(!this.isInImageData(e.data))return r.info("Cbola_JsonData of InContent failed"),void i.SetPageRequest(Cbola.Enums.PageRequestTypes.CORRUPTED_JSON,e.data.IsServerCall);r.info("Cbola_JsonData of InContent success"),i.SetPageRequest(Cbola.Enums.PageRequestTypes.PAGE_VIEW,e.data.IsServerCall)}try{120===e.type||121===e.type?(e.topContainer=Cbola.Templates.createElement("desktop_trivia_container.html"),e.container=e.topContainer.querySelector(".in-content-container-coverage")):130===e.type||131===e.type||132===e.type||133===e.type||134===e.type||135===e.type||140===e.type||150===e.type||151===e.type||152===e.type?(e.topContainer=Cbola.Templates.createElement("sidebar_container.html"),e.container=e.topContainer.querySelector(".in-content-container-coverage")):1e3===e.type||1400===e.type||1100===e.type?(e.topContainer=Cbola.Templates.createElement("mobile_container.html"),e.container=e.topContainer.querySelector(".inContent-container-coverage")):(e.topContainer=Cbola.Templates.createElement("desktop_container.html"),e.container=e.topContainer.querySelector(".in-content-container-coverage"),Cbola.Utils.checkImageLoaded(e.data.Image)),e.topContainer.setAttribute("layerType",e.type.toString()),e.topContainer.classList.add("cbola-wid-"+e.widgetId),e.topContainer.classList.add("cbola-elem-id-"+e.elementId),Cbola.Utils.isFirefox()?e.topContainer.classList.add("cbola-ua-ff"):Cbola.Utils.isIE()&&e.topContainer.classList.add("cbola-ua-ie"),$cbola(e.scriptElement).after(e.topContainer),e.topContainer.style["z-index"]=Cbola.Utils.getZIndexForElement(),e.topContainer.style.clear="both",o.CbolaSendLogsTimes("end of this.buildStructure"),this.checkMaxElements(e)}catch(t){throw r.criticalM("InContentManager.buildStructure",a.PALE_RED,"failed: initialize of IC was failed at InContentManager.buildStructure. url: "+c.PageProperties.hostname,t),t}},g.prototype.checkMaxElements=function(e){o.CbolaSendLogsTimes("cbola_checkMaxElements");var t=e.activeId;return 0===s.MaxWidgets?(r.info("elementId: "+e.elementId+", fail because maxOfElements in page"),u.fire(u.Events.ELEMENT_FAILED,{elementId:e.elementId,loadStatus:Cbola.Enums.LoadStatusTypes.MAX_ELEMS_REACHED}),!0):void((t<=s.MaxWidgets||0===t||s.currentElementsSum<s.MaxWidgets)&&(s.currentElementsSum++,this.fetchLayerScript(e)))},g.prototype.fetchLayerScript=function(e){function t(t){e=n.extend(t,e),this.onLayerScriptFetched(e)}c.adsDisabled||this.adsProcessInit(e),Cbola.InContent.Layers.Factory.createAsync(e.type,t.bind(this))},g.prototype.onLayerScriptFetched=function(e){e?(r.info(a.PALE_GREEN,"End to upload layer "+e.type+": "+o.getRunTimeInMilis()),this.layerByElementId[e.elementId]=e,delete this.inProgressByWidgetIds[e.widgetId],this.layerByWidgetId[e.widgetId]=e,e.setOptions(Cbola.InContent.Layers.Options.Factory.create(e)),l.markStart("layer "+e.type+" -> init"),e.init(),l.markEnd("layer "+e.type+" -> init"),l.markStart("layer "+e.type+" -> onBeforeLoad"),e.onBeforeLoad(),l.markEnd("layer "+e.type+" -> onBeforeLoad"),l.markStart("layer "+e.type+" -> onLoad"),e.onLoad(),l.markEnd("layer "+e.type+" -> onLoad")):r.errorM("InContentManager.onLayerScriptFetched","onLayerScriptFetched "+e.type+"has not known prototype")},g.prototype.onLayerReady=function(e){o.CbolaSendLogsTimes("setVisibleLayout"),r.info(a.YELLOW,"WidgetLoad: "+Cbola.Utils.getRunTimeInSecs()+"; for elementId: "+e.elementId,e.container),e.container.classList.add("cbolaDisableTransitionOnLoad"),setTimeout(function(){e.container.classList.remove("cbolaDisableTransitionOnLoad"),e.container.style.opacity="1"},30),c.PageProperties.PageStatus=1,i.SetPageElementRequest({layer:e,loadStatus:Cbola.Enums.LoadStatusTypes.SUCCESS}),l.markStart("layer "+e.type+" -> onAfterLoad"),e.onAfterLoad(),l.markEnd("layer "+e.type+" -> onAfterLoad")},g.prototype.adsProcessInit=function(e){Cbola.Common.AdsService.addSovrnBeacon?Cbola.Common.AdsService.addSovrnBeacon(e.data.DefaultSettings):r.errorM("InContentManager.adsProcessInit","Failed injecting sovrn beacon at InContentManager.adsProcessInit.");var t=new Cbola.Common.SponsoredLinks.Manager(e.elementId,e.widgetId,e.type),i=new Cbola.Common.AdTriggersManager({elementId:e.elementId,widgetId:e.widgetId,layerType:e.type,footerBackground:n.result(e.data,"DefaultSettings.FooterFixedAdBackground")}),o=new Cbola.Common.AdsPoolManager(e.elementId,e.widgetId,e.type);Cbola.Common.AdsService.registerLayerManager(i,o,t,e.elementId)},new g}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.HasViewability=function(){var e=Cbola.Utils,t=Cbola.EventBus,n=!0,i=function(e){this.init(e)};return i.MIN_COUNT=8,i.prototype.init=function(e){this.viewabilityCheckCounter=0,this.unviewabilityCheckCounter=0,this.becameViewableAt=0,this.viewable=!1,this.element=e,this.viewId=null,this.viewableEvent=t.Events.LAYER_IS_VIEWABLE+this.elementId,this.addFocusEvents(),this.setElementForViewability()},i.prototype.setElementForViewability=function(){e.isFriendlyIframe()?(this.windowElemForViewability=window.parent,this.elementForViewability=window.frameElement):e.isInIframe()||(this.windowElemForViewability=window,this.elementForViewability=this.element),this.isViewabilityTestable=!(!this.windowElemForViewability||!this.elementForViewability)},i.prototype.addFocusEvents=function(){var t,i,o,r,a=window.addEventListener?"addEventListener":"attachEvent",s="onfocusin"in window?"focusin":"focus",l="onfocusout"in window?"focusout":"blur",c={hidden:"visibilitychange",webkitHidden:"webkitvisibilitychange",mozHidden:"mozvisibilitychange",msHidden:"msvisibilitychange"};for(o in c)if(c.hasOwnProperty(o)&&o in document){r=c[o];break}if(e.isWindowTopSupported()?t=window.top:e.isInIframe()||(t=window),t&&document.hasFocus&&o in document){i=function(e){e.type===s?setTimeout(function(){n=!document.visibilityAPIHidden&&t.document.hasFocus()},300):n=!document.visibilityAPIHidden&&t.document.hasFocus()};try{t[a](s,i),t[a](l,i),document[a](r,i)}catch(d){}}},i.prototype.updateViewability=function(){return n?this.isViewabilityTestable?(this.elementIsInViewport()?(this.viewabilityCheckCounter++,this.unviewabilityCheckCounter=0):(this.unviewabilityCheckCounter++,this.viewabilityCheckCounter=0),!this.viewable&&this.viewabilityCheckCounter>=Cbola.Common.HasViewability.MIN_COUNT?(this.viewId=e.getViewId(1e4,9e4),this.viewable=!0,this.onBecameViewable(Cbola.Enums.ItemViewTypes.VIEWABILITY)):this.viewable&&this.unviewabilityCheckCounter>=Cbola.Common.HasViewability.MIN_COUNT&&(this.viewId=e.getViewId(1e4,9e4),this.viewable=!1,this.onBecameUnviewable()),void Cbola.taskManager.addTask(this.updateViewability,[],this)):(this.viewable=!0,void this.onBecameViewable(Cbola.Enums.ItemViewTypes.IN_IFRAME)):(this.viewable&&(this.viewable=!1,this.onBecameUnviewable()),void Cbola.taskManager.addTask(this.updateViewability,[],this))},i.prototype.isViewable=function(){return this.viewable},i.prototype.getViewId=function(){return this.viewId},i.prototype.getViewDuration=function(){return this.viewable?e.getRunTimeInSecs()-this.becameViewableAt:this.viewableDuration},i.prototype.onBecameViewable=function(){Cbola.Logger.getInstance().info("element became viewable.",this),t.fire(this.viewableEvent),this.becameViewableAt=e.getRunTimeInSecs()},i.prototype.onBecameUnviewable=function(){Cbola.Logger.getInstance().info("element became unviewable.",this),this.viewableDuration=e.getRunTimeInSecs()-this.becameViewableAt},i.prototype.elementIsInViewport=function(){var t,n,i,o,r,a=this.windowElemForViewability,s=this.elementForViewability;if(!s||!a)return!1;try{return t=s.getBoundingClientRect(),n=a.scrollY?a.scrollY:a.pageYOffset,i=a.innerHeight,o=e.cumulativeOffset(s).top,r=t.height,Cbola.Env.PageProperties.isMobile?o+r/2>=n&&n+i>o+r/2:o+r/4>=n&&n+i>o+r/2}catch(l){return!1}},i.prototype.getDocumentHeight=function(){var e=this.windowElemForViewability.document.body,t=this.windowElemForViewability.document.documentElement;return Math.max(e.scrollHeight,t.scrollHeight,e.offsetHeight,t.offsetHeight,e.clientHeight,t.clientHeight)},i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Base=Cbola.InContent.Layers.Base||function(){var e=Cbola._,t=Cbola.Logger.getInstance(),n=function(){t.debug("Layers.Base::ctor"),this.formFactor=Cbola.InContent.Layers.FormFactors.DESKTOP};return e.extend(n.prototype,Cbola.Common.HasViewability.prototype),n.prototype.init=function(){var e=Cbola.Common.HasViewability.prototype;t.debug("Layers.Base::init"),e.init.call(this,this.container)},n.prototype.setOptions=function(e){t.debug("Layers.Base::setOptions"),this.elemProps=e,this.options=e||{}},n.prototype.applyOptions=function(){t.debug("Layers.Base::applyOptions"),e.assign(this.container.style,{"margin-top":this.options.MarginTopCover+"px","margin-bottom":this.options.MarginBottomCover+"px","padding-bottom":this.options.PaddingBottomCover+"px"})},n.prototype.onBeforeLoad=function(){t.debug("Layers.Base::onBeforeLoad")},n.prototype.onLoad=function(){t.debug("Layers.Base::onLoad")},n.prototype.onAfterLoad=function(){t.debug("Layers.Base::onAfterLoad",this),Cbola.taskManager.addTask(this.updateViewability,[],this)},n.prototype.bindEvents=function(){t.debug("Layers.Base::bindEvents")},n.prototype.unbindEvents=function(){t.debug("Layers.Base::bindEvents")},n.prototype.destoy=function(){t.debug("Layers.Base::destroy"),this.unbindEvents()},n.prototype.isMobile=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.MOBILE},n.prototype.isTablet=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.TABLET},n.prototype.isDesktop=function(){return this.formFactor===Cbola.InContent.Layers.FormFactors.DESKTOP},n.prototype.isSidebar=function(){return e.indexOf(Cbola.InContent.Layers.Types.SIDEBAR,this.type)>-1},n.prototype.isFacts=function(){return e.indexOf(Cbola.InContent.Layers.Types.FACTS,this.type)>-1},n.prototype.isTrivia=function(){return e.indexOf(Cbola.InContent.Layers.Types.TRIVIA,this.type)>-1},n.prototype.isOnThisDay=function(){return e.indexOf(Cbola.InContent.Layers.Types.ON_THIS_DAY,this.type)>-1},n}(),Cbola.InContent.Layers.Types={FACTS:[100,101,102,110,130,131,132,133,152,1e3],TRIVIA:[121,120,140,1400],ON_THIS_DAY:[110,1100],DIED_ON_THIS_DAY:[134,150],DIED_ON_THIS_WEEK:[151],SIDEBAR:[130,131,132,133,134,140]},Cbola.InContent.Layers.FormFactors={MOBILE:"mobile",TABLET:"tablet",DESKTOP:"desktop"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Factory={},Cbola.InContent.Layers.Factory=function(){var e=Cbola.InContent.Layers,t=Cbola.Common.RequestHandler,n=Cbola.Common.TimelineService,i=Cbola.Logger.getInstance(),o=function(){};return o.prototype.create=function(t){i.info("Layers.Factory.create -> creating layer ",t);var n=e.TYPES_TO_NAMES_MAP[t];return Cbola._.isEmpty(n)?(i.warnM("LayersFactory.create","No layer prototype found for layer "+t),null):new e[n]},o.prototype.shouldFetch=function(t){var n=e.TYPES_TO_NAMES_MAP[t];return Cbola._.isNil(e[n])},o.prototype.createAsync=function(e,o){if(n.markStart("Layers.Factory -> creating layer "+e),this.shouldFetch(e))if(152!==e||35!==Cbola.Config.abTestId&&36!==Cbola.Config.abTestId||(e=e+"_"+Cbola.Config.abTestId),i.info("Layers.Factory.createAsync -> fetching layer code from server..."),Cbola.Env.DEBUG){var r=document.createElement("script");r.onload=function(){o&&o(this.create(e))}.bind(this);var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a),r.src=Cbola.Env.clientPath+"container/layer_"+e+"/cbola_layer_"+e+".js"}else t.getLayerScript(function(){},function(){n.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))}.bind(this),e);else n.markEnd("Layers.Factory -> creating layer "+e),o&&o(this.create(e))},new o}(),Cbola.InContent.Layers.TYPES_TO_NAMES_MAP={100:"DesktopFactsLayer",101:"DesktopFactsLayer",102:"DesktopFactsCoverLayer",110:"DesktopOnThisDayLayer",112:"DesktopOnThisDayCoverLayer",120:"DesktopTriviaLayer",121:"DesktopTriviaMultiLayer",130:"SidebarFactsLayer",131:"SidebarFactsReadMoreLayer",132:"SidebarFactsWithSliderLayer",133:"SponsoredSidebarFactsLayer",134:"SidebarDiedOnThisDayLayer",135:"SidebarOnThisDayLayer",140:"SidebarTriviaLayer",150:"SlideshowDiedOnThisDayLayer",151:"SlideshowDiedOnThisWeekLayer",152:"SlideshowFactsLayer","152_35":"SlideshowFactsLayer","152_36":"SlideshowFactsLayer",1e3:"MobileFactsLayer",1100:"MobileOnThisDayLayer",1400:"MobileTriviaLayer"},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopFactsOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,WidgetTitleFontColor:null,InContentTitleFontColor:null,RemoveInContentHeader:null,InContentTimerBackgroundColor1:"rgb(178,42,80)",InContentTimerBackgroundColor2:"rgb(167,38,76)"},n=function(n,i){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,i),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaMultiOptions=function(){var e=Cbola._,t=Cbola.Utils,n={InContentThemeColorAlpha:null,DesktopMultiTriviaBorderColor:null,DesktopMultiTriviaDisplayAnswerLetters:!0,DesktopMultiTriviaAdvertisementTitle:!1,MaxInContentTriviaWidth:640,DesktopMultiTriviaInGameTimerDuration:15,DesktopMultiTriviaEndGameTimerDuration:15,DesktopMultiTriviaEndGameImg:null,DesktopMultiTriviaEndGameLink:null,DesktopMultiTriviaBackgroundColor:null,DesktopMultiTriviaFontColor:null},i=function(i,o){Cbola.InContent.Layers.Options.TriviaOptions.call(this,i,o),e.defaults(this,n),this.InContentThemeColor&&(this.InContentThemeColorAlpha=this.InContentThemeColor.indexOf("rgb")>-1?t.rgbToRgba(this.InContentThemeColor,"0.5"):this.InContentThemeColor),"undefined"!=typeof this.DesktopInContentMinWidth&&null!==this.DesktopInContentMinWidth||(this.DesktopInContentMinWidth=480),Cbola.Env.DEBUG};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.DesktopTriviaOptions=function(){var e=Cbola._,t={showTriviaButtonIcons:!0,TriviaColorSkin:null,inContentTriviaFloatType:null,MaxInContentTriviaWidth:650},n=function(n,i){Cbola.InContent.Layers.Options.TriviaOptions.call(this,n,i),e.defaults(this,t),"false"==this.showTriviaButtonIcons&&(this.showTriviaButtonIcons=!1),"undefined"!=typeof this.DesktopInContentMinWidth&&null!==this.DesktopInContentMinWidth||(this.DesktopInContentMinWidth=500)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileFactsOptions=function(){var e=Cbola._,t={mobileTitleImage:null,mobileTitleFontSize:null,mobileThemeColor:"#f36463"},n=function(n,i){Cbola.InContent.Layers.Options.MobileOptions.call(this,n,i),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileOptions=function(){var e=Cbola._,t={MobileFontSize:null,MobileClippedHeight:0,MobilePaddingBottomCover:null,mobileThemeColor:"#f36463",mobileTitleFontSize:null,mobileFullScreen:{mode:"portrait",outsideIframe:!1},MobileInContentColorSkin:null,mobileTranslateZ:null,mobileCompressedHeight:!0,mobileShareEnabled:!0,BrandImg:null,BrandRedirect:null,mobileItemCount:null,mobileResizeCount:4},n=function(n,i){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,i),e.defaults(this,t),this.mobileShareEnabled=Cbola.Utils.parseBool(this.mobileShareEnabled),this.mobileItemCount&&(this.mobileItemCount=parseInt(this.mobileItemCount))};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.MobileTriviaOptions=function(){var e=Cbola._,t={MobileTriviaColorSkin:null,mobileThemeColor:"#19C2CC"},n=function(n,i){Cbola.InContent.Layers.Options.TriviaOptions.call(this,n,i),e.defaults(this,t),Cbola.InContent.Layers.Options.MobileOptions.call(this,n,i)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.OptionsBase=function(){var e=Cbola._,t={MarginTopCover:0,MarginBottomCover:0,PaddingBottomCover:0,ShowAdAnimation:!0,DesktopInContentMinWidth:null,ResetOnReAttach:!1,SidebarTopContainerTextAlign:null},n=function(n,i){e.extend(this,n.DefaultSettings),e.defaults(this,t),0!=this.ShowAdAnimation&&"false"!=this.ShowAdAnimation||(this.ShowAdAnimation=!1),this.themeColor=e.result(n,"DefaultSettings.InContentThemeColor",null)||e.result(n,"DefaultSettings.ThemeColor","rgb(62,209,217)");var o=Cbola.Config.getLayersDefaultSize(i);this.layerHeight=o.height,this.layerWidth=o.width};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.Factory=function(){function e(e){if(n.isNil(e))return e;var i=t.getUrlParams();for(var o in e)e.hasOwnProperty(o)&&!n.isNil(i["cbola"+n.toLower(o)])&&(e[o]=i["cbola"+n.toLower(o)]);return e}var t=Cbola.Utils,n=Cbola._,i=function(){};return i.prototype.create=function(t){var n=Cbola.InContent.Layers.Options,i=null;switch(t.type){case 100:case 101:case 102:case 110:case 112:i=new n.DesktopFactsOptions(t.data,t.type);break;case 120:i=new n.DesktopTriviaOptions(t.data,t.type);break;case 121:i=new n.DesktopTriviaMultiOptions(t.data,t.type);break;case 130:case 131:case 132:case 133:case 134:i=new n.OptionsBase(t.data,t.type);break;case 135:i=new n.SidebarDiedOnOptions(t.data,t.type);break;case 140:i=new n.SidebarTriviaOptions(t.data,t.type);break;case 150:case 151:case 152:i=new n.SlideshowOptions(t.data,t.type);break;case 1e3:case 1100:i=new n.MobileFactsOptions(t.data,t.type);break;case 1400:i=new n.MobileTriviaOptions(t.data,t.type);break;default:Cbola.Logger.getInstance().warnM("OptionsFactory.create","No options prototype found for layer "+t.type),i=null}return i=e(i)},new i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarDiedOnOptions=function(){var e=Cbola._,t={InContentTitleBGColor:null,InContentTitleFontColor:null},n=function(n,i){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,i),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},
Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SidebarTriviaOptions=function(){var e=Cbola._,t={SbTriviaEndGameImgBottom:null,SbTriviaEndGameImgTop:null,SbTriviaScoreTextColor:null,SbTriviaEndGameImgLink:null,BrandClickTracker:null,SbTriviaEndGameClickTracker:null},n=function(n,i){Cbola.InContent.Layers.Options.TriviaOptions.call(this,n,i),e.defaults(this,t)};return n}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.SlideshowOptions=function(){var e=Cbola._,t=Cbola.Utils,n={ArrowTeaser:1,SlideshowAutoplayDuration:7,SlideShowHeaderThemeColor:null},i=function(i,o){Cbola.InContent.Layers.Options.OptionsBase.call(this,i,o),e.defaults(this,n),this.ArrowTeaser=Cbola.Utils.toBool(this.ArrowTeaser),this.slideshowHeaderThemeColor=t.rgbToRgba(this.SlideShowHeaderThemeColor,.75)};return i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.Options=Cbola.InContent.Layers.Options||{},Cbola.InContent.Layers.Options.TriviaOptions=function(){var e=Cbola._,t={HideSocialButtons:!1,BrandImg:null,BrandRedirect:null,InContentThemeColor:null,InContentThemeHoverColor:"rgb(56, 185, 193)"},n=function(n,i){Cbola.InContent.Layers.Options.OptionsBase.call(this,n,i),e.defaults(this,t),this.InContentThemeColor=this.InContentThemeColor||e.result(n,"DefaultSettings.ThemeColor",null)};return n}();var cbolaStartDateFileUploaded=new Date;window.Cbola=window.Cbola||{},Cbola.Globals=Cbola.Globals||{},window.Cbola.Bootstrapper=window.Cbola.Bootstrapper||function(){var e=Cbola.Utils,t=Cbola.Logger.getInstance(),n=Cbola.Config,i=Cbola.Globals,o=Cbola._,r=Cbola.Env||{},a=function(){Cbola.Env=r||{},o.defaults(Cbola.Env,{PageProperties:{optOutCookie:!1,countryId:-1,IsServerCall:Cbola.Enums.isServerCallTypes.FROM_CDN,PageStatus:0}}),this.firstLoad=!0,this.deferredLayerScriptTags=[]};return a.prototype.enableDebugIfNeeded=function(){var t=e.getUrlParams().cboladebug;if(!t){var n=Cbola.Globals.proxyElem.getAttribute("src");t=e.getParamsFromUrl(n).cbola_d,t||(t=!1)}if(t&&"0"!==t)t="1";else{try{t=localStorage.getItem("cbolaDebug")}catch(i){t="0"}t||(t="0")}Cbola.Env.DEBUG=1==t,Cbola.Env.DEBUG&&(Cbola.Logger.getInstance().level=Cbola.Logger.Levels.DEBUG)},a.prototype.initEnv=function(){var t=i.proxyElem.getAttribute("src");r.queryServer=e.getUrlParams().queryserver,r.queryServer=r.queryServer||e.getParamsFromUrl(t).queryserver||"0",r.activePid=e.getUrlParams().cbolapid,r.activePid=r.activePid||e.getParamsFromUrl(t).pid,r.wid=e.getUrlParams().wid,r.wid=r.wid||e.getParamsFromUrl(t).wid,r.clientPath=e.getUrlParams().clientpath,r.clientPath=r.clientPath||e.getParamsFromUrl(t).clientpath||"0";try{r.domainId=parseInt(e.getParamsFromUrl(t).did)||0}catch(n){r.domainId=0}switch(r.angularProxy=!!e.getParamsFromUrl(t).cbolang||!1,r.adsDisabled=e.getUrlParams().cbolanoads||!1,r.widgetLoadAlert=e.getUrlParams().cbolaalert||!1,r.categoryId=e.getParamsFromUrl(t).categoryid||"0",r.tags=e.getParamsFromUrl(t).tags||"",r.title=e.getParamsFromUrl(t).title||"",r.body=e.getParamsFromUrl(t).body||"",r.url=e.getParamsFromUrl(t).url||"",r.clientPathType="min.",r.clientPath){case"1":case"31":r.clientPath="//qa1.carambo.la/inimage/versions/";break;case"2":r.clientPath="//cdata.carambo.la/Layer/InImage/QA/cbola_platform/version_"+Cbola.Env.clientVersion+"/";break;case"3":r.clientPathType="",r.clientPath="//10.0.0.17/platform/";break;case"5":r.clientPathType="",r.clientPath="//localhost:9000/platform/";break;case"6":case"36":r.clientPathType="",r.clientPath="//localhost:9000/platform/";break;case"7":r.clientPathType="",r.clientPath="//qa1.carambo.la/inimage/versions/";break;case"12":case"11":r.clientPathType="",r.clientPath="//qa1.carambo.la/inimage/mobile/";break;case"100":r.clientPath="//qa1.carambo.la/inimage/margeversions/";break;case"110":r.clientPath="//localhost:9000/";break;case"120":r.clientPath="//10.0.0.170:9000/";break;default:r.clientPath="//cdata.carambo.la/Layer/InImage/Prod/cbola_platform/version_"+r.clientVersion+"/"}r.IntegrationType=e.integrationTypeCheck(),r.topWindow=e.isWindowTopSupported()?window.top:window,console.log("Working Path:",r.clientPath,", QueryServer:"+r.queryServer+", ClientVer: ",r.clientVersion,", Pid: ",r.activePid)},a.prototype.init=function(){if(i.proxyElem=document.getElementById("carambola_proxy"),"undefined"!=typeof i.proxyElem&&null!=i.proxyElem)if(!i.proxyElem.getAttribute("status")||document.querySelectorAll(".cbolaExtension").length>0){if(i.proxyElem.setAttribute("status","started"),navigator.userAgent.search("MSIE 9.0")>-1&&cbolaXdrCall(),r.clientVersion="2.7.7",r.proxyId="carambola_proxy",r.userId=0,this.enableDebugIfNeeded(),this.initEnv(),window.cbolaApprBrowser){window.cbolaApprBrowser=!0,n.init(),"undefined"==typeof r.PageProperties.cbola_pageViewId&&(r.PageProperties.cbola_pageViewId=e.getViewId(1e4,9e4));try{if("undefined"!=typeof parent&&"undefined"!=typeof parent.document&&"undefined"!=typeof parent.document.cbola_pageViewId)try{r.PageProperties.cbola_pageViewId=parent.document.cbola_pageViewId}catch(a){65===Math.floor(100*Math.random())&&t.errorM("Bootstrapper.init","failed: set environment variable of Env.PageProperties.cbola_pageViewId from outside document. url: "+r.PageProperties.hostname)}else try{parent.document.cbola_pageViewId=r.PageProperties.cbola_pageViewId}catch(a){t.errorM("Bootstrapper.init","failed: set global variable of cbola_pageViewId outside document. url: "+r.PageProperties.hostname)}}catch(a){t.errorM("Bootstrapper.init","failed: set global var of cbola_pageViewId outside document was failed. url: "+r.PageProperties.hostname)}var s="first log. pid: "+Cbola.Env.activePid+", did: "+Cbola.Env.domainId;s+=o.isEmpty(Cbola.Env.wid)?", wid: 0":", wid: "+Cbola.Env.wid,s+=", abTestId: "+Cbola.Config.abTestId,s+=", pageViewId: "+r.PageProperties.cbola_pageViewId,s+=", randomLogId: "+Math.floor(899*Math.random()+100),s+=", ClientVersion: "+r.clientVersion,t.alwaysSendM("Bootstrapper.init",s),t.enableServer(),r.PageProperties.startDateFileUploaded=cbolaStartDateFileUploaded,r.PageProperties.checkInContentLocation=e.checkUrlParamExist("icshow"),r.PageProperties.mobileAccessByUrlParam=e.checkUrlParamExist("cbolamobile"),r.PageProperties.activeDomain=document.domain,t.info("Domain: "+document.domain),r.PageProperties.galleryChangesWhiteList=cbolaGalleryChangesWhiteList.getDomainStatus(),r.PageProperties.originalPathNameHost=e.getLowerLocationHref(),o.isArray(Cbola.Config.srcUrlEnabledDids)&&-1!==Cbola.Config.srcUrlEnabledDids.indexOf(r.domainId)&&(r.PageProperties.SrcUrl=e.getLocationHref()),r.PageProperties.hostname=e.gueryStringCut(),e.gueryStringCutRegex(),r.PageProperties.noShowLayer=e.checkNoShowLayer(),r.PageProperties.secondGlobal=e.setGlobalRedirectTime(),r.url&&(r.PageProperties.hostname=(r.url+"?"+(r.categoryId?"&CategoryId="+encodeURIComponent(r.categoryId):"")+(r.tags?"&Tags="+encodeURIComponent(r.tags):"")+(r.title?"&Title="+encodeURIComponent(r.title):"")+(r.body?"&Body="+encodeURIComponent(r.body):"")).toLowerCase()),r.PageProperties.startTime=new Date,r.PageProperties.windowWidth=window.innerWidth,r.PageProperties.isMobile=e.isMobile(),r.PageProperties.isTablet=e.isTablet(),e.setGlobalElements(),e.detectDeviceOrientation(),r.PageProperties.urlHashMD5=CryptoJSCbola.MD5(r.PageProperties.hostname).toString(),r.PageProperties.urlHashSHA1=CryptoJSCbola.SHA1(r.PageProperties.hostname).toString(),t.info("hostname: "+r.PageProperties.hostname),t.info("MD5 hash: "+r.PageProperties.urlHashMD5+" SHA1 hash: "+r.PageProperties.urlHashSHA1+" pid: "+Cbola.Env.activePid),this.bindEvents(),e.CbolaSendLogsTimes("initialize->end"),this.checkForPendingScripts()}}else console.log("CbolaScriptAgain");else console.log("CbolaScriptIsMissing")},a.prototype.init=Cbola.Common.TimelineService.record(a.prototype.init,"Bootstrapper.init"),a.prototype.checkForPendingScripts=function(){var t=document.querySelectorAll(".carambola_InContent");t=o.filter(t,function(t){return null===e.dataset(t,"queued")&&"script"===t.tagName.toLowerCase()}),o.map(t,function(t){e.dataset(t,"queued",!0),this.deferredLayerScriptTags.push(t)}.bind(this)),this.deferredLayerScriptTags.length>0&&this.loadLayerFromScript(Cbola.Enums.ProductTypes.IN_CONTENT),(e.getRunTimeInSecs()<Cbola.Config.checkPendingICscriptsTimeLength||o.result(Cbola.Env,"PageProperties.CheckForPathChange",!1))&&Cbola.taskManager.addTask(this.checkForPendingScripts,[],this,"checkForPendingScripts")},a.prototype.loadLayerFromScript=function(e){function a(){var e=i.proxyElem.getAttribute("mt"),t=i.proxyElem.getAttribute("mediatype"),n=i.proxyElem.getAttribute("cbola");return"ic"===e||"InContent"===t||"ic"===n?c.IN_CONTENT:null}function s(e){var t=e.getAttribute("srcurl");return o.isEmpty(t)?null:decodeURIComponent(t)}Cbola.Common.TimelineService.markStart("Bootstrapper.loadLayerFromScript");var l,c=Cbola.Enums.ProductTypes,d=function(e,t){this.initializeServices({detail:e}),this.onPageElementsRecieved(e,t)}.bind(this);if(cbolaApprBrowser||"undefined"==typeof cbolaApprBrowser){if(e===c.IN_IMAGE_PENDING)e=c.IN_IMAGE;else{var u=a();u&&(e=u)}if(0===this.deferredLayerScriptTags.length)return;if(e===c.IN_CONTENT)for(;this.deferredLayerScriptTags.length>0;){var p=this.deferredLayerScriptTags.shift();l=p.getAttribute("cbola_wid"),("undefined"==typeof l||null===l||isNaN(l))&&(l=0,p.setAttribute("cbola_wid","0")),this.isExistingWidgetId(l)?r.icManager?r.icManager.attachLayerByWidgetId(l):(Cbola.Common.AnalyticsService.SetPageElementRequest({layer:{widgetId:l},loadStatus:Cbola.Enums.LoadStatusTypes.SAME_ID_WIDGETS}),t.info(Cbola.Logger.Colors.PALE_RED,"There are scripts with the same wid: "+l)):(n.widgetIdArray.push(l),o.isEmpty(r.PageProperties.SrcUrl)&&(r.PageProperties.SrcUrl=s(p)),Cbola.Common.RequestHandler.getPageElements(function(){},d,e,l))}else l=0,Cbola.Common.RequestHandler.getPageElements(function(){},d,e,l);Cbola.Common.TimelineService.markEnd("Bootstrapper.loadLayerFromScript")}},a.prototype.isExistingWidgetId=function(e){return-1!==n.widgetIdArray.indexOf(e)},a.prototype.bindEvents=function(){var e=Cbola.EventBus;e.addEventListener(e.Events.PAGE_ELEMENTS_DATA_RECEIVED,this.initializeServices.bind(this)),e.addEventListener(e.Events.ELEMENT_SUCCESS,this.onElementSuccess.bind(this)),e.addEventListener(e.Events.ELEMENT_FAILED,this.onElementFailed.bind(this)),window.addEventListener("error",this.clientErrorReporting.bind(this))},a.prototype.initializeServices=function(t){var n=Cbola.InContent.Layers.Services.FactsService,i=Cbola.InContent.Layers.Services.OnThisDayService,a=Cbola.InContent.Layers.Services.DiedThisDayService,s=Cbola.InContent.Layers.Services.DiedThisWeekService,l=Cbola.InContent.Layers.Services.TriviaService,c=Cbola.Common.UserService,d=Cbola.InContent.Layers.Item.Types,u=t.detail;if(u){if(u.Language&&c.setLanguage(u.Language),u.Items&&o.get(u,"DefaultSettings.OTDIgnoreClientDate")&&i.setIgnoreClientDate(!0,u.Items[0]),u.DailyItemsCount&&(i.setTotalItemsForToday(u.DailyItemsCount),a.setTotalItemsForToday(u.DailyItemsCount),s.setTotalItemsForThisWeek(u.DailyItemsCount)),u.Items){u.Items=o.map(u.Items,function(e){return new Cbola.InContent.Layers.Item(e)});for(var p=0;p<u.Items.length;p++){var h=u.Items[p];h.Type===d.FACT||h.Type===d.TIP?n.addItem(h):h.Type===d.ON_THIS_DAY?i.addItem(h):h.Type===d.DIED_THIS_DAY?(a.addItem(h),s.addItem(h)):h.Type!==d.TRIVIA&&h.Type!==d.TRIVIA_MULTI&&h.Type!==d.TRIVIA_MULTI_PAIRS||l.addItem(h)}}var m=e.getParamsFromUrl(r.PageProperties.originalPathNameHost).cbolagameset;l.setFirstItemId(m)}},a.prototype.initializeServices=Cbola.Common.TimelineService.record(a.prototype.initializeServices,"Bootstrapper.initializeServices"),a.prototype.clientErrorReporting=function(e){var t={};try{"undefined"!=typeof e&&(t.filename=e.filename||"",t.lineno=e.lineno||"",t.colno=e.colno||"",t.message=e.message||"",t.type=e.type||"",t.filename.toLowerCase().indexOf("carambo.la")>-1&&(Cbola.Logger.getInstance().info("ER of cbola was found"),Cbola.Common.AnalyticsService.SetClientError(t)))}catch(n){}},a.prototype.onPageElementsRecieved=function(t,n){Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_GREEN,"End GPE for PT "+n+": "+e.getRunTimeInMilis());var i=Cbola.Env,r=Cbola.Enums.ProductTypes,a=function(t){var n=e.getUrlParams().cbolaloadtype;return n&&(Cbola.Config.LoadType=parseInt(n)),Cbola.Config.LoadType=o.result(t,"DefaultSettings.LoadType")||Cbola.Config.LoadType,Cbola.Config.LoadType},s=function(){n===r.IN_CONTENT&&(i.icManager=i.icManager||Cbola.InContent.Manager,this.firstLoad&&(this.firstLoad=!1,this._initPlatform(t)),i.icManager.init(t))}.bind(this),l=a(t);switch(l){case 2:$cbola(s);break;default:s()}},a.prototype.onReady=Cbola.Common.TimelineService.record(a.prototype.onReady,"Bootstrapper.onPageElementsRecieved"),a.prototype._initPlatform=function(e){var t,n,i=Cbola.Env,o=Cbola._;i.PageProperties.Domain=o.result(e,"Domain",0),i.PageProperties.Category=o.result(e,"Category",0),i.PageProperties.PageId=o.result(e,"PageId",0),i.PageProperties.CheckForPathChange=Cbola._.result(e,"DefaultSettings.CheckForPathChange",!1)&&!i.angularProxy,Cbola.Templates&&Cbola.Templates["cbolaPlatform.css"]?Cbola.Utils.injectMainStyle(document,Cbola.Templates["cbolaPlatform.css"]):(t=document.createElement("link"),t.rel="stylesheet",t.href=i.clientPath+"css/cbolaPlatform.min.css",n=document.getElementsByTagName("head")[0],n&&n.appendChild(t)),this.initOnFirstGetElements(e),!i.url&&i.PageProperties.CheckForPathChange&&Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},a.prototype._initPlatform=Cbola.Common.TimelineService.record(a.prototype._initPlatform,"Bootstrapper._initPlatform"),a.prototype.initOnFirstGetElements=function(e){var t=Cbola.Config,n=Cbola.Globals;if(Cbola.Env.PageProperties.noShowLayer)Cbola.Common.AnalyticsService.SetPageRequest(Cbola.Enums.PageRequestTypes.NO_SHOW_META,e.IsServerCall),Cbola.Logger.getInstance().info("noShowLayer");else if(e.DefaultSettings=e.DefaultSettings||{},t.MaxWidgets=e.DefaultSettings.MaxWidgets?e.DefaultSettings.MaxWidgets:9999,t.ZIndexLayer=e.DefaultSettings.ZIndexLayer?e.DefaultSettings.ZIndexLayer:999999999,e.DefaultSettings.unitLoadTracking){var i=document.createElement("div");i.innerHTML=e.DefaultSettings.unitLoadTracking,n.proxyElem&&n.proxyElem.parentNode&&n.proxyElem.parentNode.insertBefore(i,n.proxyElem)}},a.prototype.initOnFirstGetElements=Cbola.Common.TimelineService.record(a.prototype.initOnFirstGetElements,"Bootstrapper.initOnFirstGetElements"),a.prototype.onElementFailed=function(e){var t=e.detail;Cbola.Logger.getInstance().info("Element fail: "+t.elementId),Cbola.Logger.getInstance().info(t);try{Cbola.Common.AnalyticsService.SetPageElementRequest({elementId:t.elementId,loadStatus:t.loadStatus}),$cbola(Cbola.InContent.Manager.getLayerByElementId(t.elementId)).remove()}catch(n){}},a.prototype.onElementSuccess=function(e){var t=e.detail;Cbola.Logger.getInstance().info("Element success: "+t),Cbola.Config.platformSuccessId.push(t),Cbola.Logger.getInstance().info(Cbola.Config.Elements)},a.prototype.checkForPathChanges=function(){var e=Cbola.Env;e.PageProperties.originalPathNameHost!==window.location.href.toLowerCase()&&(this.resetUrlProperties(),this.resetPageProperties(),e.icManager.detachAllLayers(),this.firstLoad=!0),Cbola.taskManager.addTask(this.checkForPathChanges.bind(this))},a.prototype.resetUrlProperties=function(){r.PageProperties.originalPathNameHost=window.location.href.toLowerCase(),r.PageProperties.hostname=e.gueryStringCut(),r.PageProperties.urlHashMD5=CryptoJSCbola.MD5(r.PageProperties.hostname).toString(),r.PageProperties.urlHashSHA1=CryptoJSCbola.SHA1(r.PageProperties.hostname).toString(),t.info("hostname: "+r.PageProperties.hostname),t.info("MD5 hash: "+r.PageProperties.urlHashMD5+" SHA1 hash: "+r.PageProperties.urlHashSHA1+" pid: "+Cbola.Env.activePid)},a.prototype.resetPageProperties=function(){r.PageProperties.startTime=new Date,r.PageProperties.cbola_pageViewId=e.getViewId(1e4,9e4),Cbola.Config.ZIndexLayers=0},a}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdPlaceHolder=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.Common.AnalyticsService,n=Cbola.Utils,i=Cbola._,o=function(e,t,n){this.banner=n,this.id=i.random(0,1e4),this.elemId=t,this.originalAdHeight=this.adHeight=e.TagSizeHeight,this.originalAdWidth=this.adWidth=e.TagSizeWidth,this.currentAd={},this.nextAd={},this.stopAllRefreshes=!1,this.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.APPERANCE};return o.prototype.injectAd=function(){var o,r,a,s,l,c,d="";if(i.isEmpty(this.nextAd))return this;o=this.currentAd=this.nextAd,r=this.editAdTag();try{this.banner.innerHTML="",l=document.createElement("div"),l.className="cbolaBannerTag cbolaBannerTag"+this.elemId,this.banner.appendChild(l),this.bannerTag=l,l.style.height=o.AdHeight+"px",l.style.width=o.AdWidth+"px",c=$cbola(this.bannerTag)}catch(u){e.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, failed banner initialization"),e.info(u),this.stopAllRefreshes=!0}if(this.stopAllRefreshes)return this;try{"undefined"==typeof o.TagExtractionType||o.TagExtractionType===Cbola.Config.tagExtraction.POSTSCRIBE||o.TagExtractionType===Cbola.Config.tagExtraction.POSTSCRIBE_ONLY?Cbola.Config.extractTypeAds===Cbola.Config.tagExtraction.WRITECAPTURE&&o.TagExtractionType!==Cbola.Config.tagExtraction.POSTSCRIBE_ONLY?(d="wc",cbolaSetWriteCapture(),c.cbolaWriteCapture().append(r)):(postscribe(this.bannerTag,r),d="ps"):o.TagExtractionType===Cbola.Config.tagExtraction.WRITECAPTURE?(d="wc",cbolaSetWriteCapture(),c.cbolaWriteCapture().append(r)):o.TagExtractionType===Cbola.Config.tagExtraction.BILIMBI?(d="bilimbi",Bilimbi.getInstance().write(this.bannerTag,r,o.Id)):o.TagExtractionType===Cbola.Config.tagExtraction.WRITE_IFRAME?(d="iframe_write",s=this.createWriteAdIframe(o),this.bannerTag.appendChild(s),s.contentDocument.open(),s.contentDocument.write(r),s.contentDocument.close(),this.containerIframe=s):(d="append",c.append(r)),"undefined"!=typeof o.hb_selected_cpm&&(a=o.hb_selected_cpm,Cbola.Common.AdsService.getAdsPoolByElementId(this.elemId).headerBiddingManager.sendAdProviderPixel(o.batchId)),t.SetAdsRequest(this.elemId,o.Id,this.adInjectionTriggerType,a)}catch(u){return e.warnM("AdPlaceHolder.injectAd","AdPlaceHolder.injectAd error, extraction method: "+d),e.info(u),this}return this.banner.setAttribute("adId",o.Id),n.dataset(this.banner,"cbolaTagId",o.Id),n.dataset(this.banner,"cbolaMethod",d),e.info(Cbola.Logger.Colors.PALE_YELLOW,"elementId: "+this.elemId+". adId: "+o.Id+",Mode: "+o.Mode+". Ad extraction type: "+o.TagExtractionType+", selected Extraction type: "+d),this},o.prototype.editAdTag=function(){var e=this.currentAd,t=e.Tag;return 10!==e.AdType&&11!==e.AdType||(t=n.b64_to_utf8(e.Tag)),t=n.replaceAll("[\\[{]CLIENTCB[\\]}]",i.random(1e7,9e7),t),t=n.replaceAll("[\\[{]CACHEBUSTER[\\]}]",n.getViewId(1e4,9e4),t),t=n.replaceAll("\\[ID\\]","cbola-ad-"+e.Id,t)},o.prototype.createWriteAdIframe=function(e){var t=document.createElement("iframe");return t.setAttribute("sandbox","allow-scripts allow-forms allow-same-origin allow-popups"),t.setAttribute("scrolling","no"),t.setAttribute("marginwidth","0"),t.setAttribute("marginheight","0"),t.setAttribute("frameborder","0"),t.style.setProperty("border","0","important"),t.style.setProperty("margin","0","important"),t.style["vertical-align"]="bottom",t.style.width=e.AdWidth+"px",t.style.height=e.AdHeight+"px",t},o}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common._AdTriggerBase=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.Utils,n=Cbola._,i=function(e,t){this.elemId=t.elementId,this.triggerIndex=e.triggerIndex,this.Apperance=e.Apperance,this.closeBehaviors=e.CloseBehaviors||[],this.openBehaviors=e.OpenBehaviors||[],this.refreshInterval=e.RefreshInterval,this.tagType=e.TagType,this.layerType=t.layerType,this.adStructureNode=Cbola.Templates.createElement("ad_banner_structure.html"),this.adStructureNode.id="cbolaBannerStructure"+this.elemId+"_"+e.Apperance,this.adStructureNode.className+=" cbolaBannerStructure"+this.elemId+" cbolaBannerStructure"+this.elemId+"_"+e.Apperance,this.$adStructureNode=$cbola(this.adStructureNode),this.title=this.adStructureNode.children[0],this.title.id="#cbolaBannerTitle"+this.elemId+"_"+e.Apperance,this.closeTriggerButton=this.adStructureNode.querySelector(".hideAdButton"),this.closeTriggerButton.className+=" hideAdTriggerButton"+this.elemId+"_"+this.triggerIndex+" hideAdButton"+this.elemId,this.closeTriggerButton.setAttribute("elemId",this.elemId.toString()),this.closeTriggerButton.setAttribute("apperance",e.Apperance.toString()),this.closeTriggerButton.setAttribute("triggerindex",this.triggerIndex.toString()),this.banner=this.adStructureNode.querySelector(".cbolaBanner"),this.banner.id="cbolaBanner"+this.elemId+"_"+e.Apperance,this.banner.className+=" cbolaBanner"+this.elemId+"_"+e.Apperance,this.$containerWrapper=t.containerWrapperNode,this.$appendTo=this.$containerWrapper,this.triggerStructureAppended=!1,this.initialWrapperWidth=t.initialWrapperWidth,this.initialWrapperHeight=this.wrapperHeight=t.initialWrapperHeight,this.wrapperMarginLeft="auto",Cbola.Common._AdPlaceHolder.call(this,e,this.elemId,this.banner),this.styleProperties={},this.styleClassName="cbolaApperanceStyle_"+this.elemId+"_"+e.Apperance,this.isOpen=!1,this.refreshedOnPSA=0,this.animationEnabled=t.animationEnabled};return i.prototype=Object.create(Cbola.Common._AdPlaceHolder.prototype),i.constructor=i,i.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||this.$appendTo.append(this.adStructureNode),this},i.prototype.appendTriggerStyle=function(e){var i,o,r,a,s="",l=this.styleProperties,c="cbolaApperanceStyle_"+this.Apperance+"_"+this.elemId,d=document,u=this.adStructureNode;if("undefined"!=typeof e){if("object"!=typeof e.styleRules)return this;i=e.styleRules,o="string"==typeof e.ruleClassName?e.ruleClassName.replace(/(?!^)(\..*)|(?!^)(#.*)|\.|\#|\s(.*)/g,""):c+"_"+n.random(1,1e3),r="object"==typeof e.referencedDocument?e.referencedDocument:_deafualtDocument,a="undefined"!=typeof e.applyOn?e.applyOn:u}else i=l,o=c,r=d,a=u;for(var p in i)i.hasOwnProperty(p)&&(s+=p+": "+i[p]+";");return s="."+o+"{"+s+"}",this.styleElement=t.injectMainStyle(r,s),this.styleElement.className=this.styleClassName,t.isWindowTopSupported()&&(this.styleElementOutsideIframe=t.injectMainStyle(window.top.document,s),this.styleElementOutsideIframe=this.styleClassName),$cbola(a).addClass(o),this},i.prototype.closeAnimation=function(){return this.adStructureNode.style.margin="0",this.isOpen=!1,this},i.prototype.removeStyle=function(){return setTimeout(function(){try{this.styleElement.parentNode.removeChild(this.styleElement),this.styleElementOutsideIframe&&this.styleElementOutsideIframe.parentNode.removeChild(this.styleElementOutsideIframe),this.styleElement=this.styleElementOutsideIframe=null}catch(t){e.info("Failed to remove style for apperance: "+this.Apperance)}}.bind(this),1e3),this},i.prototype.removeStructure=function(){return setTimeout(function(){try{this.adStructureNode.parentNode.removeChild(this.adStructureNode),delete this.adStructureNode,delete this.$adStructureNode,delete this.banner,delete this.closeTriggerButton,delete this.title,delete this.$containerWrapper}catch(t){e.info("Failed to delete dom nodes ppointers for apperance: "+this.Apperance)}}.bind(this),1e3),this},i.prototype.showTriggerXButton=function(){return this.closeTriggerButton.style.display="block",this},i.prototype.hideTriggerXButton=function(){return this.closeTriggerButton.style.display="none",this},i.prototype.triggerElementsStyle=function(){return this},i.prototype.triggerBannerTagStyle=function(){return this.bannerTag.style["background-color"]=this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",this.bannerTag.style.height=this.adHeight+"px",this.bannerTag.style.width=this.adWidth+"px",this},i.prototype.adScale=function(t){var n,i=this.adHeight,o=$cbola(this.banner);return t=t||this.initialWrapperWidth,n=t/this.adWidth,n>1?(o.css({"-webkit-transform":"scale(1)","-ms-transform":"scale(1)",transform:"scale(1)"}),this):(o.css({"-webkit-transform-origin":"0 0","-moz-transform-origin":"0 0","-ms-transform-origin":"0 0","-o-transform-origin":"0 0","transform-origin":"0 0","-webkit-transform":"scale("+n+")","-ms-transform":"scale("+n+")",transform:"scale("+n+")"}),this.$adStructureNode&&this.$adStructureNode.css("width",this.originalAdWidth*n+"px"),this.adHeight=this.originalAdHeight*n,i-=this.adHeight,e.info("Trigger with apperance: "+this.Apperance+" for element ID: "+this.elemId+" in scale: "+n),this.$containerWrapper&&(this.wrapperHeight=this.wrapperHeight-i,this.$containerWrapper.css("height",this.wrapperHeight)),this)},i}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAboveMobile=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.layer?this.$appendTo=$cbola(this.layer.topAdPlaceHolder):Cbola.Logger.getInstance().errorM("AboveMobile.constructor","AdTriggerAboveMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return $cbola(this.banner).css({"float":"none","background-color":"transparent"}),setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-top":"0","margin-bottom":"2px",height:e.adHeight,opacity:"1"}),e.layer.fixAllItemsHeight()},0),this},e.prototype.triggerBannerTagStyle=function(){return $cbola(this.bannerTag).css({"background-color":this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight,width:this.adWidth}),this},e.prototype.adScale=function(){return this},e.prototype.closeAnimation=function(){return this},e.prototype.removeStyle=function(){return this},e.prototype.removeStructure=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerAbovePushContent=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.$appendTo=this.$containerWrapper.children().first(),this.styleProperties={display:"block!important",width:this.initialWrapperWidth,opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto",top:"1px","z-index":"1","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||this.$appendTo.before(this.adStructureNode),this},e.prototype.triggerElementsStyle=function(){var e=this,t=Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?Cbola.Config.adBelowInContentExtraMargin:0;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+t,$cbola(this.banner).css({"float":"none","background-color":"transparent"}),setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-bottom":t,height:e.adHeight,opacity:"1"})},0),this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowCoverContent=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*(this.initialWrapperHeight-1)+"px",display:"block!important",opacity:"0","-webkit-transition":"margin 0.6s ease,height 0.6s ease",transition:"margin 0.6s ease,height 0.6s ease","z-index":"-1","background-color":"transparent",width:this.adWidth+"px","max-height":this.initialWrapperHeight+"px",position:"relative","margin-left":"auto","margin-right":"auto",height:this.adHeight+"px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.showTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="white",e.banner.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-top":e.initialWrapperHeight+"px",opacity:"1"})},0),this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowMobile=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.layer?this.$appendTo=$cbola(this.layer.bottomAdPlaceHolder):Cbola.Logger.getInstance().errorM("AdTriggerBelowMobile.constructor","AdTriggerBelowMobile couldn't get layer object"),this.styleProperties={display:"block!important",opacity:"0","background-color":"transparent",position:"relative","margin-left":"auto","margin-right":"auto"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return $cbola(this.banner).css({"background-color":"transparent"}),setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({"margin-top":"0","margin-bottom":"auto",height:e.adHeight,opacity:"1"}),e.layer.fixAllItemsHeight()},0),this},e.prototype.triggerBannerTagStyle=function(){return $cbola(this.bannerTag).css({"background-color":this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",margin:"0 auto",height:this.adHeight,width:this.adWidth}),this},e.prototype.adScale=function(){return this},e.prototype.closeAnimation=function(){return this},e.prototype.removeStyle=function(){return this},e.prototype.removeStructure=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerBelowPushContent=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.topStartingPoint=20,this.styleProperties={display:"block!important",width:"100%",height:this.adHeight+"px",opacity:"0","background-color":"transparent",position:"absolute",top:this.topStartingPoint+"px",left:"0","z-index":"-1","-webkit-transition":this.animationEnabled?"margin 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease":"none"},this.responsiveAdScale=function(){window.removeEventListener("resize",this.responsiveAdScale),this.adScale(this.$containerWrapper.width()),setTimeout(function(){window.addEventListener("resize",this.responsiveAdScale)}.bind(this),16)}.bind(this),window.addEventListener("resize",this.responsiveAdScale)};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this,t=Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?Cbola.Config.adBelowInContentExtraMargin:Cbola.Config.adBelowSideBarMargin;return this.wrapperHeight=this.initialWrapperHeight+this.adHeight+t,this.banner.style["float"]="none",this.banner.style["background-color"]="transparent",Cbola.Config.layouts.inContent.all.indexOf(this.layerType)>-1?e.showTriggerXButton():e.hideTriggerXButton(),setTimeout(function(){e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.adStructureNode.style["margin-top"]=t+e.initialWrapperHeight-e.topStartingPoint+"px",
e.adStructureNode.style.opacity="1"},0),setTimeout(function(){e.adStructureNode.style["z-index"]=10},1e3),this},e.prototype.closeAnimation=function(){return this.adStructureNode.style["z-index"]="-1",this.adStructureNode.style.margin=this.topStartingPoint+"px",this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerCenterInsideUnit=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:-1*this.adHeight+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease,height 0.6s ease":"none","z-index":"6","background-color":"rgba(255, 255, 255, 0.9)",width:"100%"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return this.triggerHeight=this.adHeight,$cbola(this.banner).css({"float":"none","background-color":"transparent"}),setTimeout(function(){e.showTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.$adStructureNode.css({margin:"auto",height:e.initialWrapperHeight,"margin-top":e.initialWrapperHeight+"px"})},0),this},e.prototype.triggerBannerTagStyle=function(){return $cbola(this.bannerTag).css({"background-color":"black",height:this.adHeight,width:this.adWidth}),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerFixedFooter=function(){"use strict";var e=Cbola._,t=Cbola.Env,n=function(n,i){Cbola.Common._AdTriggerBase.call(this,n,i),this.triggersManagerWindowTop=t.topWindow,this.$appendTo=this.triggersManagerWindowTop.document.body,this.adStructureNode.id="cbola-footer-banner",this.styleProperties={position:"fixed",display:"block",top:"initial",left:"0",bottom:-1*this.adHeight+"px","z-index":"2147483647",height:"0","-webkit-transition":this.animationEnabled?"bottom 0.9s ease":"none",transition:this.animationEnabled?"bottom 0.9s ease":"none"},e.isEmpty(i.footerBackground)?(this.styleProperties.width=this.adWidth+"px",this.styleProperties.margin="0 auto",this.styleProperties.left="0",this.styleProperties.right="0"):(this.styleProperties.width="100%",this.styleProperties["background-color"]=i.footerBackground)};return n.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),n.constructor=n,n.prototype.appendTriggerStructure=function(){return this.triggerStructureAppended||this.$appendTo.appendChild(this.adStructureNode),this},n.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.showTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.banner.style.backgroundColor="transparent",e.$adStructureNode.css({opacity:"1",height:e.adHeight,bottom:"0"})},0),this},n.prototype.showTriggerXButton=function(){var e={display:"block",position:"absolute",cursor:"pointer",right:"3px","margin-top":"0","box-shadow":"0 0 0 black!important","z-index":"999999",width:"18px",height:"18px",background:'url("'+Cbola.Env.clientPath+'css/assets/cbolaSprite.png") no-repeat -52px -25px'};this.appendTriggerStyle({styleRules:e,referencedDocument:this.triggersManagerWindowTop.document,applyOn:this.closeTriggerButton})},n.prototype.adScale=function(){return this},n.prototype.closeAnimation=function(){return this.adStructureNode.style.bottom=-1*this.adHeight+"px",this.isOpen=!1,this},n}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInnerBanner=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.layerType=t.layerType;var n=Cbola.Env.icManager.getLayerByElementId(this.elemId);this.$appendTo=$cbola(n.boxElem).find(".cbola-slider-ad-placeholder"),Cbola.Config.layouts.sideBars.teaserBanner.indexOf(this.layerType)>-1?this.styleProperties={"box-sizing":"border-box","border-right":"1px solid rgba(171, 171, 171, 0.25)","border-left":"1px solid rgba(171, 171, 171, 0.25)",height:"250px",top:"0px",opacity:"0","margin-left":"-1px",width:"300px"}:this.styleProperties={width:"300px",opacity:"0","box-sizing":"content-box","padding-top":"0px","padding-left":"0px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.title.style.backgroundColor="transparent",e.banner.style.backgroundColor="transparent",e.$adStructureNode.css({opacity:"1",height:e.adHeight})},0),this},e.prototype.adScale=function(){return this},e.prototype.closeAnimation=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftInsideUnit=function(){"use strict";var e=Cbola.Common._AdTriggerBase,t=Cbola.EventBus,n=function(t,n){e.call(this,t,n),this.styleProperties={top:"0",left:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"margin 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"},this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layer.type)>-1&&(this.$appendTo=$cbola(this.layer.view.itemsBoxElem),this.inSlideShow=!0)};return n.prototype=Object.create(e.prototype),n.constructor=n,n.prototype.triggerElementsStyle=function(){return setTimeout(function(){this.inSlideShow?setTimeout(function(){this.showTriggerXButton()}.bind(this),2500):this.hideTriggerXButton(),this.triggerBannerTagStyle(),this.title.style["background-color"]="transparent",this.title.style["font-size"]="10px",this.banner.style["background-color"]="transparent",this.adStructureNode.style.margin="auto",this.adStructureNode.style["margin-left"]=this.adWidth+"px",this.adStructureNode.style.height=this.initialWrapperHeight+"px"}.bind(this),0),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_ON+this.elemId),this},n.prototype.triggerBannerTagStyle=function(){return this.bannerTag.style["background-color"]=this.tagType===Cbola.Config.adTypeVideo?"black":"transparent",this.bannerTag.style.height="250px",this.bannerTag.style.width=this.adWidth+"px",this},n.prototype.removeStructure=function(){return e.prototype.removeStructure.call(this),this.inSlideShow&&t.fire(t.Events.COVERING_TRIGGER_OFF+this.elemId),this},n.prototype.adScale=function(){return this},n}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightInsideUnit=function(){"use strict";var e=function(e,t){Cbola.Common.AdTriggerLeftInsideUnit.call(this,e,t),this.styleProperties={top:"0",right:-1*this.adWidth+"px",display:"block!important","-webkit-transition":this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none",transition:this.animationEnabled?"transform 0.6s ease, height 0.6s ease":"none","z-index":"6","background-color":"transparent",width:this.adWidth+"px",height:this.adHeight+"px",overflow:"hidden"}};return e.prototype=Object.create(Cbola.Common.AdTriggerLeftInsideUnit.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){var e=this;return setTimeout(function(){e.inSlideShow?setTimeout(function(){e.showTriggerXButton()},2500):e.hideTriggerXButton(),e.triggerBannerTagStyle(),e.banner.style["background-color"]="transparent",e.adStructureNode.style.transform="translateX(-"+e.adWidth+"px)",e.adStructureNode.style.height=e.initialWrapperHeight+"px"},0),this},e.prototype.closeAnimation=function(){return this.adStructureNode.style.transform="translateX(0)",this.isOpen=!1,this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerLeftOfUnit=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",left:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",right:"initial",display:"block!important","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginLeft=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){this.currentAd.ShowX?this.showTriggerXButton():this.hideTriggerXButton(),this.triggerBannerTagStyle(),this.title.style.backgroundColor="transparent",this.banner.style.backgroundColor="transparent",this.$adStructureNode.css({margin:"auto",height:this.adHeight})}.bind(this),0),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerRightOfUnit=function(){"use strict";var e=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.styleProperties={top:Cbola.Config.layouts.inContent.facts.indexOf(this.layerType)>-1?this.initialWrapperHeight-this.adHeight+"px":"0",right:-1*(this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin)+"px",display:"block",left:"inherit","z-index":"6","background-color":"transparent",width:this.adWidth+"px"}};return e.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),e.constructor=e,e.prototype.triggerElementsStyle=function(){return this.wrapperHeight=this.adHeight+Cbola.Config.adTitleStructureTriviaHeight,this.wrapperMarginRight=this.adWidth+Cbola.Config.adAsideOfUnitExtraMargin+"px",setTimeout(function(){this.currentAd.ShowX?this.showTriggerXButton():this.hideTriggerXButton(),this.triggerBannerTagStyle(),this.title.style.backgroundColor="transparent",this.banner.style.backgroundColor="transparent",this.$adStructureNode.css({margin:"auto",height:this.adHeight+"px"})}.bind(this),0),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItem=function(){"use strict";var e=Cbola.Utils,t=function(e,t){Cbola.Common._AdTriggerBase.call(this,e,t),this.adStructureNode=this.$adStructureNode=this.banner=this.closeTriggerButton=this.title=this.$containerWrapper=null,this.layer=Cbola.Env.icManager.getLayerByElementId(this.elemId),this.spot=e.currentSpot};return t.prototype=Object.create(Cbola.Common._AdTriggerBase.prototype),t.constructor=t,t.prototype.appendTriggerStructure=function(){return this.banner=this.layer.injectAdAfterItem("",this.spot),this},t.prototype.injectAd=function(){return Cbola.Common._AdPlaceHolder.prototype.injectAd.apply(this),e.dataset(this.banner,"adWidth",this.adWidth),e.dataset(this.banner,"adHeight",this.adHeight),this},t.prototype.triggerElementsStyle=function(){return this},t.prototype.triggerBannerTagStyle=function(){return this},t.prototype.adScale=function(){return-1===Cbola.Config.layouts.sideBars.slideShow.indexOf(this.layerType)&&Cbola.Common._AdTriggerBase.prototype.adScale.call(this,this.banner.clientWidth),this},t.prototype.closeAnimation=function(){return this},t.prototype.removeStyle=function(){return this},t.prototype.removeStructure=function(){return this},t}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggerInItemMobile=function(){"use strict";var e=function(e,t){Cbola.Common.AdTriggerInItem.call(this,e,t)};return e.prototype=Object.create(Cbola.Common.AdTriggerInItem.prototype),e.constructor=e,e.prototype.injectAd=function(){return Cbola.Common.AdTriggerInItem.prototype.injectAd.apply(this),this.layer.selfExpBackoff&&this.layer.selfExpBackoff(this.layer.fixAllAdItemsStyle,4),this},e.prototype.adScale=function(){return this},e}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AolHB=function(){function e(){"use strict";function e(e){if(null!=e){var n,i=c[e.alias],o=e.gpt,r=e.adContainerId,a=e.bidKey,s=e.cpm,l=t(e.adContainerId);n=s||0===s?{provider:Cbola.Config.providerId.aol,tagId:d[e.alias],cpm:s,bidKey:a,slotName:r,mpAliasKey:e.mpAliasKey,responseAlias:e.alias,config:o,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success,script:l,originalResponse:e}:{provider:Cbola.Config.providerId.aol,tagId:d[e.alias],cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.fail},i(n)}}function t(e){return'<div id="'+e+'"></div>'}function n(e,t,n,o){i(e.adTypeId,e.placement,t,n,o)}function i(e,t,n,i,s){var c=r(e,t,i);l?o(c,n,s):a(c,n,s)}function o(e,t,n){c[e]=n,d[e]=t,window.ADTECH.loadPubAd(e)}function r(e,t,n){var i=Math.floor(100*Math.random()+1),o=225,r=[728,90],a="/4248977/PubAPISecure",s=a+"728x90";1===e&&(o=170,r=[300,250],s=a+"300x250");for(var l="aol_market_div_"+i,c="alias"+i,d=window.dacBidRequestConfigs,u=0;u<d.length;u++)if(0==d[u].initialized){d[u].initialized=!0,d[u].sizeId=o,d[u].placement=t,d[u].alias=c,d[u].adContainerId=l,d[u].secure=!1,d[u].bidfloor=n.toString(),d[u].performScreenDetection=!1,d[u].gpt={adUnitPath:s,size:r};break}return c}function a(e,t,n){l=!0;var i=document.createElement("script");i.async=!0,i.type="text/javascript";var r=document.getElementsByTagName("script")[0];i.onload=function(){o(e,t,n)},i.src=("https:"===document.location.protocol?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js",r.parentNode.insertBefore(i,r);var a=a||{};a.cmd=a.cmd||[]}function s(e){setTimeout(function(e){googletag.cmd.push(function(){var t=googletag.defineSlot(e.config.adUnitPath,e.config.size,e.slotName);t.addService(googletag.pubads()).setTargeting(e.bidKey,[e.cpm]),t.addService(googletag.pubads()).setTargeting(e.mpAliasKey,[e.responseAlias]),googletag.enableServices(),googletag.pubads().setTagForChildDirectedTreatment(0),googletag.pubads().enableAsyncRendering(),googletag.display(e.slotName)})},100,e)}var l=!1,c=[],d=[];window.dacBidRequestConfigs=[];for(var u=0;6>u;u++)window.dacBidRequestConfigs.push({initialized:!1,sizeId:0,placement:0,alias:"",adContainerId:"",secure:!1,performScreenDetection:!1,gpt:{adUnitPath:"",size:[]}});return window.bidRequestConfig={server:"adserver.adtechus.com",network:"10334.1",bidKey:"aolbid",onBidResponse:e.bind(this),loadAdTimeout:2e3,adjustment:-20},{sendRequest:n,sendBeaconCall:s}}var t;return{getBidding:function(n,i){function o(){t=t||e(),t[n].apply(t,i)}if(!t&&arguments.length>0){var r=document.createElement("script");r.onreadystatechange=o,r.onload=o,document.getElementsByTagName("head")[0].appendChild(r),r.src="http://vlibs.advertising.com/one-publishers-api/PubTag/pubtaglib-0.x.x.js"}else if(t)return t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.IndexExchangeHB=function(){function e(){"use strict";function e(){return r}function t(t,i,a){e()||(r=!0,o(t));var s=Cbola.Config.Defaults.adServer+"IndexExchangeGetAds?pvid="+t+"&width="+i.width+"&height="+i.height+"&url="+i.urlEncoded+"&isssl="+i.isSsl+"&ismobile="+i.isMobile+"&isTablet="+i.isTablet;n(s,i.Id,i.bidFloor,a)}function n(e,t,n,o){var r=new XMLHttpRequest;r.onload=function(l){200===r.status?i(l,t,n,o):(a.errorM("IndexExchangeHB.sendGetRequest","HB IndexExchangeHB SendGetRequest request failed with status:"+r.status+" path: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId+", requesturl:"+e),i(null,t,n,o))},r.open("GET",e,!0),r.onerror=function(){a.errorM("IndexExchangeHB.sendGetRequest","HB IndexExchangeHB SendGetRequest request failed path: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId+", requesturl:"+e)},setTimeout(function(e){e.send()},Cbola.Config.timeouts.pendingIndexExchangeBuffer,r)}function i(e,t,n,i){var o,r={provider:Cbola.Config.providerId.indexExchange,tagId:t,cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.fail};if(!e||!e.target||!e.target.response)return a.errorM("IndexExchangeHB.IndexExchangeGetAdsCallBack","HB IndexExchangeHB response is not good: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId),void i(r);try{o=JSON.parse(e.target.response)}catch(l){return a.errorM("IndexExchangeHB.IndexExchangeGetAdsCallBack","HB IndexExchangeHB failed to convert response to json: "+s.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+s.cbola_pageViewId+", response:"+e.target.response),void i(r)}1===o.Status?(r.cpm=o.CPM,r.bidFloor=n,r.script=o.Adm,r.hbRequestStatus=Cbola.Config.headerBiddingRequestStatus.success):4===o.Status&&(r.hbRequestStatus=Cbola.Config.headerBiddingRequestStatus.timeout),i(r)}function o(e){var t="http%3A%2F%2Fqa.adserver.carambo.la%2FIndexExchangeCallBackFromClient",n=document.createElement("iframe");n.style.display="none",n.width="1px",n.height="1px",document.body.appendChild(n),n.src="http://astest.casalemedia.com/usermatch?s=184125&cb="+t+"%3Fpvid="+e+"%26uid="}var r=!1,a=Cbola.Logger.getInstance(),s=Cbola.Env.PageProperties;return{sendRequest:t}}var t;return{getBidding:function(){return t||(t=e()),t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.SovernHB=function(){function e(){"use strict";function e(e,o,r,a){var s,l,c,d;return e?(s=n.random(1,1e4),l={id:"cbola-req"+s,imp:[{id:"cbola-mpression-id"+s,banner:{w:e.width,h:e.height},tagid:e.tagid,bidfloor:r}],site:{domain:document.domain,page:window.location.pathname}},c=encodeURIComponent(JSON.stringify(l)),d="//ap.lijit.com/rtb/bid?callback=processResponse&br="+c,void t(d,i,o,a)):void Cbola.Logger.getInstance().alwaysSend("HB SendRequest for sovrn failed adObj is undefined or null")}function t(e,t,n,i){var o=new XMLHttpRequest;o.onload=function(e){200===o.status&&t(e,n,i)},o.open("GET",e,!0),o.onerror=function(){Cbola.Logger.getInstance().errorM("SovernHB.sendGetRequest","HB sendGetRequest request failed path: "+Cbola.Env.PageProperties.hostname+", pid: "+Cbola.Env.activePid+", Pvid: "+Cbola.Env.PageProperties.cbola_pageViewId)},o.send()}function i(e,t,n){if(e&&e.target&&e.target.response){var i=e.target.response.replace("processResponse(","");i=i.substr(0,i.length-1);var r=JSON.parse(i);o(r,t,n)}}function o(e,t,n){var i,o,r;e&&e.seatbid?0==e.seatbid.length?o={provider:Cbola.Config.providerId.sovern,tagId:t,cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success}:(i=e.seatbid[0].bid[0],r=decodeURIComponent(i.adm),o={provider:Cbola.Config.providerId.sovern,tagId:t,cpm:i.price,script:r,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success,nurl:i.nurl,originalResponse:e}):o={provider:Cbola.Config.providerId.sovern,tagId:t,cpm:0,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.fail},n(o)}function r(e){var t=n.random(1,1e4),i="http://gslbeacon.lijit.com/beacon?viewId=Carambola_header_auction&rand="+t+"&informer=13194752&type=fpads&loc="+document.domain+"&v=1.2";$cbola.ajax({type:"GET",url:i}),$cbola.ajax({type:"GET",url:e.nurl})}return{sendRequest:e,sendBeaconCall:r}}var t,n=Cbola._;return{getBidding:function(){return t||(t=e()),t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},window.Cbola.Common.OpenxHB=window.Cbola.Common.OpenxHB||function(){"use strict";function e(){function e(){n.info("openx OX.dfp_bidder.getPriceMap()",OX.dfp_bidder.getPriceMap());var e,t=OX.dfp_bidder.getPriceMap();for(var i in t)if(t.hasOwnProperty(i))for(var r=0;r<o.length;r++)if(e=o[r],e.divId===i){var a={provider:Cbola.Config.providerId.openx,tagId:e.id,cpm:t[i].price/100,hbRequestStatus:Cbola.Config.headerBiddingRequestStatus.success,script:t[i].ad,bidFloor:e.bidFloor};e.result=a,"none"===t[i].size?(a.hbRequestStatus=Cbola.Config.headerBiddingRequestStatus.fail,a.cpm=0):e.callBack&&e.callBack(a)}}function t(e){var t=document.createElement("script"),n=document.getElementsByTagName("script")[0];t.async=!0,t.type="text/javascript",t.src=("https:"===document.location.protocol?"https:":"http:")+"//carambola-d.openx.net/w/1.0/jstag?nc="+e,n.parentNode.insertBefore(t,n)}function i(e){var n=null;o=e;for(var i=0;i<e.length;i++){var r=e[i];window.OX_dfp_ads.push([r.tag.zone,[r.tag.width+"x"+r.tag.height],r.divId]),n||(n=r.tag.endpoint)}t(n)}var o;return window.OX_dfp_ads=[],window.OX_dfp_options={callback:e.bind(this)},{sendRequest:i}}var t,n=Cbola.Logger.getInstance();return{getBidding:function(){return t||(t=e()),t}}}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.HBManager=function(){"use strict";var e=Cbola.Common.AnalyticsService,t=Cbola.Env,n=Cbola._,i=function(e){this.hbBidRequestCollection=[],this.executingCollection={},this.executedCompletedCollection={},this.hbTags={},this.batchId=0,this.batchProcessedEvent="batchProcessedEvent"+e+"_",this.pendingOpenxTags=[]};return i.prototype.executeHb=function(e){this.batchId++,this.hbTags[this.batchId]=e,this.executingCollection[this.batchId]=[],this.executedCompletedCollection[this.batchId]=[];for(var t=0;t<this.hbTags[this.batchId].length;t++)this.executeProvider(this.hbTags[this.batchId][t],this.batchId);return this.waitForResponse(this.batchId),this.batchProcessedEvent+this.batchId},i.prototype.executeOpenX=function(){0!==this.pendingOpenxTags.length&&Cbola.Common.OpenxHB.getBidding().sendRequest(this.pendingOpenxTags)},i.prototype.waitForResponse=function(e,t){var n=20,i=this;t=t||0,setTimeout(function(){t++,i.executingCollection[e].length>0&&i.executedCompletedCollection[e].length<i.executingCollection[e].length&&n>t?i.waitForResponse(e,t):(i.sendHbBidRequestAnalytics(e),i.setBestResult(e),Cbola.EventBus.fire(i.batchProcessedEvent+e))},Cbola.Config.timeouts.pendingHeaderBiddingResponseBrake)},i.prototype.sendHbBidRequestAnalytics=function(t){for(var n,i=this.executingCollection[t].slice(0),o=this.executedCompletedCollection[t],r=0;r<o.length;r++)n=o[r],"undefined"!=typeof n.tagId&&(i.splice(i.indexOf(n.tagId),1),this.addBidRequestToAnalyticsCollection(n));for(var a=0;a<this.executingCollection.length;a++)n=i[a],this.addBidRequestToAnalyticsCollection({tagId:n});e.fire("setHbBidRequest",Cbola.Enums.ProductTypes.IN_CONTENT,{BidRequests:this.hbBidRequestCollection})},i.prototype.addBidRequestToAnalyticsCollection=function(e){var t={TagId:e.tagId,Cpm:e.cpm||0,Status:e.hbRequestStatus||Cbola.Config.headerBiddingRequestStatus.timeout};this.hbBidRequestCollection.push(t)},i.prototype.setBestResult=function(e){var t,n=this.executedCompletedCollection[e];if(0===n.length)return null;t=n[0];for(var i=1;i<n.length;i++)n[i].cpm>t.cpm&&(t=n[i]);if(null===t.cpm||0===t.cpm)return this;n.bestResult=t;var o=this.getAdById(t.tagId,e);return o.batchId=e,o.Tag=t.script,o.hb_selected_cpm=t.cpm,this},i.prototype.sendAdProviderPixel=function(e){var n;return"undefined"!=typeof this.executedCompletedCollection[e].bestResult?null:(n=this.executedCompletedCollection[e].bestResult,Cbola.Logger.getInstance().alwaysSend("HB sendAdProviderPixel selected ad: {cpm: "+n.cpm+", tagId: "+n.tagId+", provider:"+n.provider+", "+t.domainId+" + "+t.PageProperties.PageId+"}"),void(n.provider===Cbola.Config.providerId.sovern?Cbola.Common.SovernHB.getBidding().sendBeaconCall(n):n.provider===Cbola.Config.providerId.aol&&Cbola.Common.AolHB.getBidding().sendBeaconCall(n)))},i.prototype.getAdById=function(e,t){for(var n=0;n<this.hbTags[t].length;n++)if(this.hbTags[t][n].Id==e)return this.hbTags[t][n];return null},i.prototype.executeProvider=function(e,t){var i,o;try{i=JSON.parse(e.Tag)}catch(r){return void Cbola.Logger.getInstance().alwaysSend("HB executeProvider: failed to parse tag as JSON")}if(o=i.bidFloor||.1,i.provider===Cbola.Config.providerId.sovern)this.executingCollection[t].push(e.Id),Cbola.Common.SovernHB.getBidding().sendRequest(i.tag,e.Id,o,function(e){this.executedCompletedCollection[t].push(e)}.bind(this));else if(i.provider===Cbola.Config.providerId.aol)this.executingCollection[t].push(e.Id),Cbola.Common.AolHB.getBidding("sendRequest",[i.tag,e.Id,o,function(e){this.executedCompletedCollection[t].push(e)}.bind(this)]);else if(i.provider===Cbola.Config.providerId.openx)this.pendingOpenxTags.push({id:e.Id,tag:i.tag,divId:"div_"+n.random(1,1e4),bidFloor:o,callBack:function(e){this.executedCompletedCollection[t].push(e)}.bind(this)}),this.executingCollection[t].push(e.Id);else if(i.provider===Cbola.Config.providerId.indexExchange){this.executingCollection[t].push(e.Id);var a=window.location.href;e.urlEncoded=encodeURIComponent(a),e.bidFloor=o,e.isSsl="https:"===document.location.protocol,e.isMobile=!1,e.isTablet=!1,"undefined"!=typeof i.tag&&(e.width=i.tag.width,e.height=i.tag.height);var s="0";"undefined"!=typeof cbolaPageProperties&&(e.isMobile=Cbola.Env.PageProperties.isMobile,e.isTablet=Cbola.Env.PageProperties.isTablet,s=Cbola.Env.PageProperties.cbola_pageViewId),Cbola.Common.IndexExchangeHB.getBidding().sendRequest(s,e,function(e){this.executedCompletedCollection[t].push(e)}.bind(this))}},i}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.AdsPoolManager=function(){"use strict";var e=Cbola._,t=Cbola.EventBus,n=Cbola.Logger.getInstance(),i=Cbola.Enums.RefreshTypes,o="Shadow",r={clickInvokedAds:{name:"clickInvokedAds",associatedAdModes:[Cbola.Enums.AdModes.PERFORMANCE]},timeoutInvokedAds:{name:"timeoutInvokedAds",associatedAdModes:[Cbola.Enums.AdModes.HEADER_BIDDING,Cbola.Enums.AdModes.PREMIUM,Cbola.Enums.AdModes.REGULAR]}},a=function(e,t,n){this.wid="undefined"==typeof t?0:t,this.adsPool={},this.adsMaxCapCounter=[],this.elemId=e,this.headerBiddingManager=new Cbola.Common.HBManager(e),this.boundedInit=this.init.bind(this),Cbola.EventBus.addEventListener("GetAds"+e,this.boundedInit),Cbola.Common.RequestHandler.getAds(function(){},function(){},this.wid,e,n)};return a.prototype.init=function(t){var o,r,a=t.detail||{},s=a.AdsForSize||[],l=[],c=[];Cbola.EventBus.removeEventListener("GetAds"+this.elemId,this.boundedInit),this.jsonAdData=a,this.displayBeforeVideo=a.NumDisplayBeforeVideo||0,r=e.isNil(a.RefreshType)?i.BOTH:a.RefreshType,this.refreshByClick=r===i.BOTH||r===i.CLICK,this.refreshByTimeout=r===i.BOTH||r===i.TIMEOUT,this.maxVideoAds=a.MaxVideos||0,this.refreshFixedTime=a.RefreshFixedTime||[],this.refreshInterval=a.RefreshInterval,this.maxDisplayAds=a.MaxDisplayAds,this.pendingHeaderBiddingEvents=[];for(var d=0;d<s.length;d++)o=this.getAdsSizeName(s[d]),o?(l=s[d].DisplayAdTag,c=s[d].VideoAdTag,this.adsPool[o]=this.adsPool[o]||{},l&&l.length&&this.appendAdsTypeToPool(l,o,Cbola.Config.adTypes.display.name),c&&c.length&&this.appendAdsTypeToPool(c,o,Cbola.Config.adTypes.video.name)):n.info("AdsPoolManager.init - unavailable ads size from Json: width - "+s[d].AdWidth+" height - "+s[d].AdHeight);return this.headerBiddingManager.executeOpenX(),e.isEmpty(this.adsPool)?(n.errorM("AdsPool.init","AdsPoolManager.init failed to build ads pool. Widget id: "+this.wid),this):(0===this.pendingHeaderBiddingEvents.length&&this.dispatchAdsPoolReady(),this)},a.prototype.getAdsSizeName=function(e){var t=e.AdWidth+"_"+e.AdHeight,i=Cbola.Config.adSizes;for(var o in i)if(i.hasOwnProperty(o)&&i[o].name===t)return t;return n.info("AdsPool.getAdsSizeName encountered unfamiliar ad size: "+t),t},a.prototype.appendAdsTypeToPool=function(e,t,n){for(var i=this.adsPool[t][n+o]||[],r={},a=0;a<e.length;a++)r=e[a],r.Mode!==Cbola.Enums.AdModes.PREMIUM&&r.Mode!==Cbola.Enums.AdModes.HEADER_BIDDING&&i.push(r);i.length&&(this.adsPool[t][n+o]=i),this.shuffleAds(e,t,n)},a.prototype.shuffleAds=function(e,t,n){var i,o,a,s=this.adsPool[t][n]||{};for(var l in r)if(r.hasOwnProperty(l)){if(i=r[l].associatedAdModes,o=this.adsWeightsObjectPerMode(e,i),"undefined"==typeof o)continue;s[l]=s[l]||[],a=this.getRandomlyOrderedAds(e,o),Array.prototype.push.apply(s[l],a),this.sendHeaderBiddingTags(a)}this.adsPool[t][n]=s},a.prototype.adsWeightsObjectPerMode=function(t,n){for(var i,o,r=0;r<t.length;r++)i=t[r],e.isEmpty(i)||-1===n.indexOf(i.Mode)||(o=o||{weights:[],indices:[],currentMaxWeight:0,arraysLength:0},o.currentMaxWeight+=i.Weight,o.weights.push(o.currentMaxWeight),o.indices.push(r),o.arraysLength++);return o},a.prototype.getRandomlyOrderedAds=function(e,t){for(var n,i,o,r,a=t.weights,s=t.indices,l=t.arraysLength,c=t.currentMaxWeight,d=[];l>1;){n=Math.floor(Math.random()*c+1),o=-1;for(var u=0;l>u;u++)r=0,a[u]>=n&&(-1===o?(o=u,i=s[u],r=e[i].Weight):a[u]-=r);a.splice(o,1),s.splice(o,1),c-=r,d.push(e[i]),l--}return"undefined"!=typeof s[0]&&s[0]>-1&&(i=s[0],d.push(e[i])),d},a.prototype.sendHeaderBiddingTags=function(e){var n,i;n=e.filter(function(e){return e.IsHb}),n.length&&this.headerBiddingManager&&(i=this.headerBiddingManager.executeHb(n),this.pendingHeaderBiddingEvents.push(i),t.addEventListener(i,this.isFinishedHeaderBidding.bind(this)))},a.prototype.isFinishedHeaderBidding=function(e){if(e&&e.type){var t=this.pendingHeaderBiddingEvents.indexOf(e.type);t>-1&&this.pendingHeaderBiddingEvents.splice(t,1)}0===this.pendingHeaderBiddingEvents.length&&this.dispatchAdsPoolReady()},a.prototype.dispatchAdsPoolReady=function(){n.info("AdsPoolManager.init succeeded. Widget id: "+this.wid),t.fire(t.Events.ADS_POOL_MANAGER_READY+this.wid,this)},a.prototype.selectAd=function(t){var i,a,s,l,c,d,u=!0;if(t.stopAllRefreshes)return n.info("Ads pool manager stopped refreshes for placeholder Id: "+t.id+" in element ID: "+this.elemId),this;if(i=this.getAdsSizeName({AdWidth:t.originalAdWidth,AdHeight:t.originalAdHeight}),a=this.adsPool[i],!a||e.isEmpty(a))return n.warnM("AdsPool.selectAd","AdsPoolManager.selectAd Failed - ad pool is empty for size: "+i+". WidgetId: "+this.wid),this;if(this.displayBeforeVideo<=0||this.maxVideoAds>0?(c=Cbola.Config.adTypes.video.name,s=a[c]||{},e.isEmpty(s)||(l=this.getAdPerType(s,t.wasClicked))):n.info("AdsPoolManager.selectAd - skipped attempting to set video ad. WidgetId: "+this.wid+" displayBeforeVideo: "+this.displayBeforeVideo+" maxVideoAds: "+this.maxVideoAds),!l&&this.maxDisplayAds>0?(c=Cbola.Config.adTypes.display.name,s=a[c]||{},e.isEmpty(s)||(l=this.getAdPerType(s,t.wasClicked))):0===this.maxDisplayAds&&n.info("AdsPoolManager.selectAd for element ID: "+t.elemId+" reached max refreshes"),!l)return n.warnM("AdsPool.selectAd","AdsPoolManager.selectAd failed to get ad for element ID: "+t.elemId),t.nextAd=null,this;if(l&&!e.isEmpty(l)){if(d=a[c+o]||[],l.MaxCap&&(this.adsMaxCapCounter[l.Id]?this.adsMaxCapCounter[l.Id]++:this.adsMaxCapCounter[l.Id]=1,this.adsMaxCapCounter[l.Id]===l.MaxCap))for(var p=0;p<d.length;p++)if(d[p].Id===l.Id){d.splice(p,1);break}for(var h in s)s.hasOwnProperty(h)&&s[h].length>0&&(u=!1);u&&this.shuffleAds(d,i,c),t.adInjectionTriggerType!==Cbola.Enums.AdTriggerTypes.PSA&&(c===Cbola.Config.adTypes.video.name?this.maxVideoAds--:c===Cbola.Config.adTypes.display.name&&(this.displayBeforeVideo--,this.maxDisplayAds--)),r.clickInvokedAds.associatedAdModes.indexOf(l.Mode)>-1&&(t.stopAllRefreshes=!0)}else n.warnM("AdsPool.selectAd","AdsPoolManager.selectAd Failed - ad object is undefined or empty. WidgetId: "+this.wid);return t.nextAd=l,this},a.prototype.getAdPerType=function(e,t){var n,i,o,a=[];for(n=r.timeoutInvokedAds.name,"undefined"!=typeof e[n]&&(a=e[n]||[]),n=r.clickInvokedAds.name,(t&&this.refreshByClick&&"undefined"!=typeof e[n]&&e[n].length||0===a.length)&&(a=e[n]||[]),o=a.length;o--;)a[o].IsHb&&(a[o].hb_selected_cpm?i=a.splice(o,1):a.splice(o,1));return i?i.shift()||a.shift():a.shift()},a}(),window.Cbola=window.Cbola||{},window.Cbola.Common=window.Cbola.Common||{},Cbola.Common.AdTriggersManager=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.Common.AnalyticsService,n=3,i=Cbola.EventBus,o=Cbola.Env,r=Cbola._,a={1:{TriggerConstructor:Cbola.Common.AdTriggerLeftInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[2,5]},2:{TriggerConstructor:Cbola.Common.AdTriggerCenterInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,3,5]},3:{TriggerConstructor:Cbola.Common.AdTriggerBelowCoverContent,requiredContainerOverflow:"visible",
collidesWith:[2]},4:{TriggerConstructor:Cbola.Common.AdTriggerBelowPushContent,collidesWith:[9]},5:{TriggerConstructor:Cbola.Common.AdTriggerRightInsideUnit,requiredContainerOverflow:"hidden",collidesWith:[1,2]},6:{TriggerConstructor:Cbola.Common.AdTriggerRightOfUnit,requiredContainerOverflow:"visible"},7:{TriggerConstructor:Cbola.Common.AdTriggerLeftOfUnit,requiredContainerOverflow:"visible"},8:{TriggerConstructor:Cbola.Common.AdTriggerInnerBanner},9:{TriggerConstructor:Cbola.Common.AdTriggerAbovePushContent,requiredContainerOverflow:"hidden",collidesWith:[4]},20:{TriggerConstructor:Cbola.Common.AdTriggerInItem},200:{TriggerConstructor:Cbola.Common.AdTriggerInItemMobile},204:{TriggerConstructor:Cbola.Common.AdTriggerBelowMobile},209:{TriggerConstructor:Cbola.Common.AdTriggerAboveMobile},300:{TriggerConstructor:Cbola.Common.AdTriggerFixedFooter}},s=function(e){this.layerType=e.layerType,this.wid=e.widgetId,this.elemId=e.elementId,this.wasClicked=!1,this.FREEZE=!1,this.pendingTriggers=[],this.activeTriggers=[],this.finishedTriggers=[],this.footerBackground=e.footerBackground,this.handlers=[],this.adsPoolReadyEventName=i.Events.ADS_POOL_MANAGER_READY+this.wid,this.adsPoolReadyEventFired=!1,this.layerReadyEventFired=!1;var t=function(e){e.type===this.layerType&&e.elementId===this.elemId&&(this.layer=e,this.adsPoolReadyEventFired?this.startAdTriggersManager():this.layerReadyEventFired=!0)}.bind(this),n=function(e){this.adsPool=e,this.layerReadyEventFired?this.startAdTriggersManager():this.adsPoolReadyEventFired=!0}.bind(this);this.handleEvent=function(e){switch(e.type){case this.adsPoolReadyEventName:n(e.detail);break;case i.Events.LAYER_READY:t(e.detail)}},i.addEventListener(this.adsPoolReadyEventName,this,!1),i.addEventListener(i.Events.LAYER_READY,this,!1)};return s.prototype.startAdTriggersManager=function(){i.removeEventListener(this.adsPoolReadyEventName,this,!1),i.removeEventListener("LayerReadyEvent",this,!1),this.$containerBox=$cbola(this.layer.boxElem),this.containerWrapper=this.layer.container,this.$containerWrapper=$cbola(this.containerWrapper);var e=this.layer.boxElem.getBoundingClientRect();this.initialWrapperHeight=e.height,this.initialWrapperWidth=e.width,this.initialWrapperMarginLeft=this.containerWrapper.style["margin-left"]||"initial",this.initialWrapperMarginRight=this.containerWrapper.style["margin-right"]||"initial",this.initTriggers().startFiringTriggers()},s.prototype.initTriggers=function(){var e,t;this.baseTriggerSettings=this.adsPool.jsonAdData.TriggerSettings;try{testTriggers.call(this)}catch(n){}for(var i=0;i<this.baseTriggerSettings.length;i++)if(e={},e=r.extend(e,this.baseTriggerSettings[i]),"undefined"!=typeof e.OpenBehaviors&&0!==e.OpenBehaviors.length&&this.translateApperance(e)&&(300!==e.Apperance||o.topWindow===window.top&&!o.topWindow.document.querySelector("#cbola-footer-banner")))if(e.triggerIndex=i,200===e.Apperance||20===e.Apperance){if(e.Spots.length>0){e.Spots.sort(function(e,t){return e-t}).filter(function(e,t,n){return t===n.indexOf(e)}),e.OpenBehaviors.splice(1,e.OpenBehaviors.length-1),e.OpenBehaviors[0].Type=1;for(var a=0;a<e.Spots.length;a++)t={currentSpot:e.Spots[a]},r.extend(t,e),t.OpenBehaviors=e.OpenBehaviors.slice(0),this.pushToPendingTriggers(t)}}else this.pushToPendingTriggers(e);return this},s.prototype.translateApperance=function(t){var n;return"undefined"!=typeof Cbola.Config.triggersDictionary[t.Apperance]&&(n=Cbola.Config.triggersDictionary[t.Apperance],n.supportedLayers.indexOf(this.layerType)>-1)?(t.Apperance=n.translatedTo,!0):(e.info("AdTriggersManager.translateApperance could not translate appropriate trigger apperance #"+t.Apperance+" for element Id: "+this.id),!1)},s.prototype.pushToPendingTriggers=function(e){var t,n;if("undefined"!=typeof a[e.Apperance]){if(n=a[e.Apperance].TriggerConstructor,!n)return this;t=new n(e,{elementId:this.elemId,containerWrapperNode:this.$containerWrapper,initialWrapperWidth:this.initialWrapperWidth,initialWrapperHeight:this.initialWrapperHeight,layerType:this.layerType,footerBackground:this.footerBackground,animationEnabled:this.layer.options.ShowAdAnimation||this.layer.options.showAdAnimation}),t.refreshFixedTime=this.adsPool.refreshFixedTime.slice(0),t.triggerOverflow=a[e.Apperance].requiredContainerOverflow,this.pendingTriggers.push(t)}return this},s.prototype.startFiringTriggers=function(){for(var t,n=this.pendingTriggers.slice(0),i=0;i<n.length;i++)t=n[i],this.beforeActivationValidation(t)&&(this.adsPool.selectAd(t),"undefined"==typeof t.nextAd||null===t.nextAd||r.isEmpty(t.nextAd)?(e.warnM("AdTriggersManager.startFiringTriggers","AdTriggersManager.startFiringTriggers failed to load first ad for apperance: "+t.Apperance+" for element ID: "+this.elemId+" - removing appeaance"),this.removeTrigger(t)):this.openTrigger(t));return this},s.prototype.beforeActivationValidation=function(e){return!this.isActive(e,"Apperance")&&!this.isOverflowCollision(e.Apperance)&&!this.isApperanceCollision(e.Apperance)},s.prototype.openTrigger=function(t){var n,o,r=t.openBehaviors.shift();if("undefined"==typeof r)return e.info("AdTriggersManager.openTrigger haven't found openBehavior - closing apperance: "+t.Apperance),this.removeTrigger(t);if(t.isOpen)return this;if(t.isOpen=!0,t.currentOpenBehavior=r,this.pullTriggerFromArray(this.pendingTriggers,t,"Apperance").pushTriggerOnce(this.activeTriggers,t,"Apperance"),r.Type===Cbola.Config.AdOpenBehaviors.timer||r.Type===Cbola.Config.AdCloseBehaviors.viewable&&this.layer.isViewable())return e.info("AdTriggersManager.openTrigger sent apperance: "+t.Apperance+" to open by timer"),this.openTriggerByTimer(t);switch(r.Type){case Cbola.Config.AdOpenBehaviors.viewable:n=[i],o=this.layer.viewableEvent;break;case Cbola.Config.AdOpenBehaviors.hoverOnUnit:n=[this.$containerBox[0]],o="hover";break;case Cbola.Config.AdOpenBehaviors.engagement:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),o="click";break;default:return this.removeTrigger(t)}return n?(e.info("AdTriggersManager.openTrigger attached event: "+o+" for Apperance: "+t.Apperance),this.setOpenTriggerEventHandler(n,o,t)):(e.errorM("AdTriggersManager.openTrigger","AdTriggersManager.openTrigger failed to find element to attach event "+o+" for apperance: "+t.Apperance),this)},s.prototype.setOpenTriggerEventHandler=function(e,t,n){for(var i,o,r=0;r<e.length;r++)i=this.handlers.length,o={attachedOn:e[r],eventType:t,relatedTrigger:n.Apperance},this.handlers[i]=o,function(e){e.listener=function(){this.onEventOpenTrigger(e,n)}.bind(this),e.attachedOn.addEventListener(e.eventType,e.listener)}.bind(this)(o);return this},s.prototype.onEventOpenTrigger=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.openTriggerByTimer(t),this},s.prototype.openTriggerByTimer=function(t){var n=t.currentOpenBehavior.Delay;return e.info("AdTriggersManager.openTriggerByTimer open apperance "+t.Apperance+" in "+n+" seconds"),setTimeout(function(){this.appendTrigger(t).setWrapperHeight().setContainerOverflow().setWrapperMargin().closeTrigger(t).setNextRefreshTime(t).attachClickEventHandlers(t)}.bind(this),1e3*n),this},s.prototype.appendTrigger=function(e){return e.appendTriggerStructure().appendTriggerStyle().injectAd().triggerElementsStyle().adScale(),(e instanceof Cbola.Common.AdTriggerBelowPushContent||e instanceof Cbola.Common.AdTriggerAbovePushContent)&&this.layer.iframeBuster.checkIframeDimension(e.adHeight+Cbola.Config.adTitleStructureTriviaHeight),e.closeTriggerButton&&e.closeTriggerButton.addEventListener("click",function(){e instanceof Cbola.Common.AdTriggerFixedFooter?t.SetClick(this.elemId,Cbola.Enums.SetClickTypes.FOOTER_AD_BUTTON_CLOSE):t.SetClick(this.elemId,Cbola.Enums.SetClickTypes.AD_BUTTON_CLOSE),this.removeTrigger(e)}.bind(this)),this},s.prototype.attachClickEventHandlers=function(t){var n,i,o,r=this.layer.container.querySelectorAll(".cbola-refresh-click-trigger");if(!r)return this;if(t instanceof Cbola.Common.AdTriggerInItem)return this;if(this.adsPool.refreshByClick||t instanceof Cbola.Common.AdTriggerLeftInsideUnit)for(i=0;i<r.length;i++)n=this.handlers.length,o={attachedOn:r[i],eventType:"click",relatedTrigger:t.Apperance},this.handlers[n]=o,function(e){e.listener=function(){t.ignoreUserClick||(t.ignoreUserClick=!0,setTimeout(function(){t.ignoreUserClick=!1},1e3),t instanceof Cbola.Common.AdTriggerLeftInsideUnit?this.closeApperanceOnClick(e,t):this.refreshTriggerOnClick(e,t))}.bind(this),e.attachedOn.addEventListener(e.eventType,e.listener)}.bind(this)(o);else e.info("No refreshes allowed on click for element Id:"+this.elemId);return this},s.prototype.refreshTriggerAd=function(t){if(t.stopAllRefreshes)e.info("AdTriggersManager.refreshTriggerAd stopped refreshing Apperance : "+t.Apperance+" for element Id: "+this.elemId);else if(this.adsPool.selectAd(t),t.nextAd)try{t.injectAd().triggerBannerTagStyle(),e.info(Cbola.Logger.Colors.PALE_GREEN,"AdTriggersManager.refreshTriggerAd injected ad for apperance: "+t.Apperance)}catch(n){e.warnM("AdTriggersManager.refreshTriggered","AdTriggersManager.refreshTriggered failed injecting ad. stopping refreshing for trigger apperance: "+t.Apperance+" for element ID: "+this.elemId),t.stopAllRefreshes=!0}else e.info("AdTriggersManager.refreshTriggered couldn't get ad. stopping refreshing for trigger apperance: "+t.Apperance+" for element ID: "+this.elemId),t.stopAllRefreshes=!0;return this},s.prototype.setNextRefreshTime=function(t){var n;if(!this.adsPool.refreshByTimeout)return e.info("Refresh by timeout is not allowed for elementId: "+this.elemId),this;if(t.stopAllRefreshes)return e.info("AdTriggersManager.setNextRefreshTime stopped due to all refreshes stop for trigger Apperance: "+t.Apperance),this;if(t.refreshFixedTime.length>0){if(t.currentFixedRefreshTime=t.refreshFixedTime.shift(),t.refreshFixedTime.forEach(function(e,t,n){n[t]=e-this.currentFixedRefreshTime},t),n=1e3*t.currentFixedRefreshTime,n&&n>0)return e.info("Trigger apperance "+t.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+n+"mili-sec."),t.refreshTimeoutId=setTimeout(this.refreshOnTimeout.bind(this),n,t),this}else if(n=t.refreshInterval||this.adsPool.refreshInterval,n&&n>0)return e.info("Trigger apperance "+t.Apperance+" for element ID: "+this.elemId+" would try to refresh by timeout in : "+n+"mili-sec."),t.refreshTimeoutId=t.intervalRefreshTimeoutId=setTimeout(this.refreshOnTimeout.bind(this),n,t),this;return e.warnM("AdTriggersManager.setNextRefreshTime","AdTriggersManager.setNextRefreshTime stopped refreshing due to inability to set nextRefreshInterval for apperance "+t.Apperance+" in element Id: "+this.elemId),t.stopAllRefreshes=!0,this},s.prototype.refreshOnTimeout=function(e){return e.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.TIMEOUT,this.refreshTriggerAd(e).setNextRefreshTime(e),this},s.prototype.refreshTriggerOnClick=function(t,n){return this.wasClicked=n.wasClicked=!0,n.stopAllRefreshes||this.isFinished(n)?(e.info("Trigger apperance "+n.Apperance+" for element ID: "+this.elemId+" stops refresh by click"),t.attachedOn.removeEventListener(t.eventType,t.listener)):(e.info("Trigger apperance "+n.Apperance+" for element ID: "+this.elemId+" would try to refresh by click"),n.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.CLICK,this.refreshTriggerAd(n),n.intervalRefreshTimeoutId&&(e.info("AdTriggersManager.refreshOnClick cleared timeout for apperance "+n.Apperance),clearTimeout(n.intervalRefreshTimeoutId),this.setNextRefreshTime(n))),this},s.prototype.closeTrigger=function(t){var n,o,r=t.closeBehaviors.shift();if("undefined"==typeof r)return e.info("No closing behavior found for apperance: "+t.Apperance),this;if(!t.isOpen)return e.info("AdTriggersManager.closeTrigger trying to close already closed apperance: "+t.Apperance+" in element ID: "+this.elemId),this;if(t.currentCloseBehavior=r,r.Type===Cbola.Config.AdCloseBehaviors.timer||r.Type===Cbola.Config.AdCloseBehaviors.viewable&&this.layer.isViewable())return e.info("AdTriggersManager.closeTrigger sent apperance: "+t.Apperance+" to close by timer"),this.closeTriggerByTimer(t);switch(r.Type){case Cbola.Config.AdCloseBehaviors.viewable:n=[i],o=this.layer.viewableEvent;break;case Cbola.Config.AdCloseBehaviors.hoverOnUnit:n=[this.$containerBox[0]],o="hover";break;case Cbola.Config.AdCloseBehaviors.engagement:n=this.layer.boxElem.querySelectorAll(".cbola-refresh-click-trigger"),o="click";break;default:return this.removeTrigger(t)}return e.info("AdTriggersManager.closeTrigger attached event: "+o+" for Apperance: "+t.Apperance),this.setCloseTriggerEventHandler(n,o,t)},s.prototype.setCloseTriggerEventHandler=function(e,t,n){for(var i,o,r=0;r<e.length;r++)i=this.handlers.length,o={attachedOn:e[r],eventType:t,relatedTrigger:n.Apperance},this.handlers[i]=o,function(e){e.listener=function(){this.onEventCloseTrigger(e,n)}.bind(this),e.attachedOn.addEventListener(e.eventType,e.listener)}.bind(this)(o);return this},s.prototype.onEventCloseTrigger=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.closeTriggerByTimer(t),this},s.prototype.closeTriggerByTimer=function(e){var t=e.currentCloseBehavior.Duration;return this.FREEZE?this:(setTimeout(function(){this.FREEZE||this.isFinished(e.id)||(e.closeAnimation(),this.openTrigger(e))}.bind(this),1e3*t),this)},s.prototype.closeApperanceOnClick=function(e,t){return e.attachedOn.removeEventListener(e.eventType,e.listener),this.wasClicked=t.wasClicked=!0,this.removeTrigger(t),this},s.prototype.removeTrigger=function(t){var n;return this.isFinished(t.id)?this:(this.pullTriggerFromArray(this.pendingTriggers,t).pullTriggerFromArray(this.activeTriggers,t).pushTriggerOnce(this.finishedTriggers,t).unbindTriggersEventHandlers(t.Apperance),t.closeAnimation(),t.isOpen=!1,n=t instanceof a[1].TriggerConstructor?5e3:0,e.info("AdTriggersManager.removeTrigger, removing trigger with apperance: "+t.Apperance+", in "+n+" mil-seconds"),setTimeout(function(){t.removeStyle().removeStructure(),clearTimeout(t.refreshTimeoutId),this.setWrapperHeight().setContainerOverflow().setWrapperMargin().startFiringTriggers()}.bind(this),n),this)},s.prototype.setWrapperHeight=function(){for(var e=this.initialWrapperHeight,t=this.containerWrapper.runtimeStyle||this.containerWrapper.style,n=0;n<this.activeTriggers.length;n++)e=e<this.activeTriggers[n].wrapperHeight?this.activeTriggers[n].wrapperHeight:e;return this.$containerWrapper.height()!==e&&e>0&&!this.layer.isMobile()&&(t.height=e+"px"),this},s.prototype.setContainerOverflow=function(){for(var e="hidden",t=0;t<this.activeTriggers.length;t++)if(this.activeTriggers[t].triggerOverflow){e=this.activeTriggers[t].triggerOverflow;break}return this.containerWrapper.style.overflow=e,this},s.prototype.setWrapperMargin=function(){for(var e,t,n,i=0;i<this.activeTriggers.length;i++)n=this.activeTriggers[i],"undefined"!=typeof n.wrapperMarginLeft&&"auto"!==n.wrapperMarginLeft&&(e=n.wrapperMarginLeft,t="left"),"undefined"!=typeof n.wrapperMarginRight&&"auto"!==n.wrapperMarginRight&&(e=n.wrapperMarginRight,t="right");return t?this.containerWrapper.style["margin-"+t]=e:(this.containerWrapper.style["margin-left"]=this.initialWrapperMarginLeft,this.containerWrapper.style["margin-right"]=this.initialWrapperMarginRight),this},s.prototype.isActive=function(e,t){return t=t||"Apperance","Apperance"===t&&e instanceof Cbola.Common.AdTriggerInItem?!1:!!this.activeTriggers.filter(function(n){return n[t]===e[t]}).length},s.prototype.isOverflowCollision=function(e){var t,n=a[e].overflow;if("undefined"==typeof n)return!1;for(var i=0;i<this.activeTriggers.length;i++)if(t=this.activeTriggers[i].Apperance,a[t].overflow!==n)return!0;return!1},s.prototype.isApperanceCollision=function(e){var t,n=a[e].collidesWith;if("undefined"==typeof n)return!1;for(var i=0;i<this.activeTriggers.length;i++)if(t=this.activeTriggers[i].Apperance,n.indexOf(t)>-1)return!0;return!1},s.prototype.isFinished=function(e){return!!this.finishedTriggers.filter(function(t){return t.id===e}).length},s.prototype.pullTriggerFromArray=function(e,t,n){var i;n=n||"id";for(var o=0;o<e.length;o++)if(i=e[o],i[n]===t[n]){e.splice(o,1);break}return this},s.prototype.pushTriggerOnce=function(e,t,n){var i;n=n||"id";for(var o=0;o<e.length;o++)if(i=e[o],i[n]===t[n]){if("Apperance"===n&&t instanceof Cbola.Common.AdTriggerInItem&&t.spot!==i.spot)continue;return this}return e.push(t),this},s.prototype.refreshOnPSA=function(t,i){var o,r=parseInt(t),a=parseInt(i);if(isNaN(r)||isNaN(a))return this;for(var s=0;s<this.activeTriggers.length;s++)o=this.activeTriggers[s],o.originalAdWidth===r&&o.originalAdHeight===a&&(o.refreshedOnPSA<=n?(o.refreshedOnPSA++,o.adInjectionTriggerType=Cbola.Enums.AdTriggerTypes.PSA,this.refreshTriggerAd(o)):e.info("AdTriggersManager.refreshOnPSA has reached max refreshes for apperance "+o.Apperance));return this},s.prototype.freezeAdsState=function(){this.FREEZE=!0;for(var t=0;t<this.activeTriggers.length;t++)this.activeTriggers[t].stopAllRefreshes=!0;return e.warn("AdTriggersManager FREEZED ADS STATE"),this},s.prototype.endAdsProcess=function(){var t;for(this.FREEZE||this.freezeAdsState();this.pendingTriggers.length>0;)t=this.pendingTriggers[0],this.pullTriggerFromArray(this.pendingTriggers,t);for(this.unbindTriggersEventHandlers();this.activeTriggers.length>0;)t=this.activeTriggers[0],this.removeTrigger(t);return e.info("AdTriggersManager ended"),this},s.prototype.unbindTriggersEventHandlers=function(){var e,t,n=Array.prototype.slice.call(arguments);for(t=0;t<this.handlers.length;t++)e=this.handlers[t]||{},"undefined"!=typeof e.attachedOn&&(0===n.length||n.indexOf(e.relatedTrigger)>-1)&&e.attachedOn.removeEventListener(e.eventType,e.listener);return this},s}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.SponsoredLinks=Cbola.Common.SponsoredLinks||{},Cbola.Common.SponsoredLinks.LinksList=function(){var e=Cbola.InContent.Layers.Item,t=Cbola.Common.UserService,n=Cbola.Utils,i=Cbola._,o=function(t,n){e.call(this),this.type=e.Types.SPONSORED_LINKS,this.reportingFunction=n,this.generateLinksElem(t)};return i.extend(o.prototype,e.prototype),o.prototype.generateLinksElem=function(e){this.elem={title:e.Title||t.vocabulary("whatsNext"),linksList:Cbola.Templates.createFragmentFromTemplate("sponsored_links_structure.html",{Items:e.Links}).querySelector(".cbola-sponsored")},this.addEventHandlers()},o.prototype.addEventHandlers=function(){this.elem.linksList.addEventListener("click",this.linksClicked.bind(this))},o.prototype.linksClicked=function(e){for(var t,i=e.target;i!==e.currentTarget&&"li"!==i.tagName.toLowerCase();)i=i.parentElement;t=n.dataset(i,"linkId"),t&&this.reportingFunction(!0,Cbola.Enums.ItemViewTypes.SPONSORED_LINK_CLICK,t)},o}(),window.Cbola=window.Cbola||{},Cbola.Common=Cbola.Common||{},Cbola.Common.SponsoredLinks=Cbola.Common.SponsoredLinks||{},Cbola.Common.SponsoredLinks.Manager=function(){"use strict";var e=Cbola._,t=Cbola.Logger.getInstance(),n=function(e,t,n){this.wid="undefined"==typeof t?0:t,this.elemId=e,this.layerType=n,this.sponsoredLinksSpots=[],this.managerReady=!1,this.boundedInit=this.init.bind(this),this.linksItem={},Cbola.EventBus.addEventListener("GetAds"+e,this.boundedInit)};return n.prototype={init:function(n){return Cbola.EventBus.removeEventListener("GetAds"+this.elemId,this.boundedInit),this.sponsoredLinksSpots=e.result(n,"detail.SponsoredLinksSpots"),!e.isNil(this.sponsoredLinksSpots)&&this.sponsoredLinksSpots.length>0?this.managerReady=!0:t.info("SponsoredLinks.Manager.init hasn't found sponsored links spots"),this},getLinks:function(t){return e.isEmpty(this.linksItem)?Cbola.Common.RequestHandler.getSponsoredLinks(function(){},function(n){this.createLinksElementObject(n),e.isEmpty(this.linksItem)||t(this.linksItem)}.bind(this)):t(this.linksItem),this},getlinkClickReportingFunction:function(e){this.clickReportFunc=e},createLinksElementObject:function(n){var i=e.result(n,"Links",[]);if(i&&i.length>0)try{this.linksItem=new Cbola.Common.SponsoredLinks.LinksList(n,this.clickReportFunc)}catch(o){t.errorM("SponsoredLinksPool.Manager.createLinksElementObject","SponsoredLinksPool.Manager.createLinksElementObject failed to create sponsored links fragment from template. Error: "+o)}},isReady:function(){return this.managerReady}},n}(),Cbola.Common.AdsService=function(){"use strict";var e={},t={},n={},i=Cbola.Logger.getInstance(),o=Cbola.Utils,r=o.isWindowTopSupported()?window.top:window,a={},s=!1,l=function(){};l.prototype={registerLayerManager:function(o,r,a,s){return e.hasOwnProperty(s)&&e[s]?void i.errorM("AdsService.registerLayerManager","Cbola.Common.AdsService failed, trying to assign ad triggers manager to the same element ID."):(e[s]=o,t[s]=r,void(n[s]=a))},unRegisterLayerManager:function(i){e.hasOwnProperty(i)&&e[i]&&(e[i].endAdsProcess(),delete e[i],delete t[i],delete n[i])},getTriggersManagerByElementId:function(t){return e[t]},getAllTriggersManagers:function(){return e},getAdsPoolByElementId:function(e){return t[e]},getSponsoredLinksManagerByElementId:function(e){return n[e]},refreshOnPSA:function(t,n){for(var i in e)e.hasOwnProperty(i)&&e[i].refreshOnPSA(t,n)},freezeAds:function(){for(var t in e)e.hasOwnProperty(t)&&e[t].freezeAdsState()},freezeAdsByElementId:function(t){e.hasOwnProperty(t)&&e[t]&&e[t].freezeAdsState()},addToTopMostWindow:function(){var e=this.generateGetMessageScript();$cbola(r.document.head).append(e)},addSovrnBeacon:function(e){try{if(!s&&e&&e.SovrnBeaconSrc&&e.SovrnBeaconId){s=!0;var t=r.document.createElement("script");t.id=e.SovrnBeaconId;var n=r.document.getElementsByTagName("head")[0];n&&(n.appendChild(t),t.src=e.SovrnBeaconSrc)}}catch(o){i.alwaysSendM("AdsService.addSovrnBeacon","Sovrn beacon injection failed.")}},generateGetMessageScript:function(){return $cbola('<script>window[window.addEventListener ? "addEventListener" : "attachEvent"](((window.addEventListener ? "addEventListener" : "attachEvent" )== "attachEvent" ? "onmessage" : "message"),function(e) {try{if(typeof e.data==="string" && e.data.indexOf("cbolaPostM")!=-1){var cbolaDataString=e.data;var cbolaAdWidth=cbolaDataString.substring(cbolaDataString.indexOf("width=")+6,cbolaDataString.indexOf(",height="));var cbolaAdHeight=cbolaDataString.substring(cbolaDataString.indexOf(",height=")+8);if(typeof window.Cbola.Common.AdsService !== "undefined") {window.Cbola.Common.AdsService.refreshOnPSA(cbolaAdWidth,cbolaAdHeight);}}}catch(er){console.log(er);console.log(e);}},false);</script>')}};try{r!==window?(r.Cbola=r.Cbola||{},r.Cbola.Common=r.Cbola.Common||{},r.Cbola.Common.AdsService=r.Cbola.Common.AdsService||new l,a=r.Cbola.Common.AdsService):a=new l}catch(c){i.errorM("Cbola.Common.AdService","Failed to add AdService initialization process")}try{a.addToTopMostWindow()}catch(d){i.errorM("Cbola.Common.AdService","Failed to add postMessage on top window")}return a}(),cbolaCanonicalWhiteList={getDomainStatus:function(){var e=Cbola.Env.PageProperties.activeDomain.replace("www.","");return Cbola.Logger.getInstance().info("check CanonicalWhiteList for domain: "+e),cbolaCanonicalWhiteList.whiteListDomains.indexOf(e)>=0?(Cbola.Logger.getInstance().info("CanonicalWhiteList is true for domain: "+e),!0):(Cbola.Logger.getInstance().info("CanonicalWhiteList is false for domain: "+e),!1)},whiteListDomains:whiteListDomains=["diyfood.com"]},cbolaGalleryChangesWhiteList={getDomainStatus:function(){var e=Cbola.Env.PageProperties.activeDomain.replace("www.","");return Cbola.Logger.getInstance().info("check cbolaGalleryChangesWhiteList for domain: "+e),cbolaGalleryChangesWhiteList.whiteListDomains.indexOf(e)>=0?(Cbola.Logger.getInstance().info("cbolaGalleryChangesWhiteList is true for domain: "+e),!0):(Cbola.Logger.getInstance().info("cbolaGalleryChangesWhiteList is false for domain: "+e),!1)},whiteListDomains:whiteListDomains=["sickchirpse.com"]},Cbola&&Cbola.bootstrapper?(Cbola.Common.TimelineService.mark("reinitialization of carambola.min.js"),Cbola.Logger.getInstance().info("Bootstrapper is already loaded, adding this script tag to queue")):(Cbola.Common.TimelineService.markStart("First time initialization carambola.min.js"),Cbola.bootstrapper=new Cbola.Bootstrapper,Cbola.taskManager=new Cbola.TaskManager,Cbola.bootstrapper.init(),Cbola.Common.TimelineService.markEnd("First time initialization carambola.min.js")),postscribe.error=cbolaAdLogSystem.postCribeOnError,window.Cbola=window.Cbola||{},Cbola.defender={ignore:!1,ignoreTimeoutFunc:null,setIgnoreTimeout:function(){Cbola.defender.ignoreTimeoutFunc&&clearTimeout(Cbola.defender.ignoreTimeoutFunc),Cbola.defender.ignore=!0,Cbola.defender.ignoreTimeoutFunc=setTimeout(function(){Cbola.defender.ignore=!1},1e3)}};for(var ignoreEvents=["click","touchstart","touchend","pointerdown"],i=0;i<ignoreEvents.length;i++)window.document.addEventListener(ignoreEvents[i],Cbola.defender.setIgnoreTimeout);Cbola.unloadAlreadyDetected=!1,window.onunload=window.onbeforeunload=function(){cbolaApprBrowser&&!Cbola.unloadAlreadyDetected&&(Cbola.unloadAlreadyDetected=!0,Bilimbi.getInstance().isActive()&&!Cbola.defender.ignore&&Bilimbi.getInstance().getCompletedScripts().length>1&&(Cbola.Logger.getInstance().info(Cbola.Logger.Colors.PALE_RED,"suspected window.unload detected"),Cbola.Logger.getInstance().alwaysSendOnce("window.unload detected with active tag ",Bilimbi.getInstance().getActiveTag(),"and scripts stack: ",Bilimbi.getInstance().getCompletedScripts())),Cbola.Common.AnalyticsService.SetPageClose())},Cbola.Styles["cbola_layer_120.css"]='.cbola-d-trivia *{box-sizing:border-box;font-size:1em;margin:0;padding:0;user-select:none;-webkit-user-select:none}.cbola-d-trivia{box-sizing:border-box;position:relative;overflow:hidden;z-index:5;background-color:#fff;border:1px solid rgba(171,171,171,.5);width:100%;min-width:498px;height:250px}.cbola-d-trivia__body{height:calc(100% - 33px);width:100%}.cbola-d-trivia__score-wrapper{height:100%;float:left}.cbola-d-trivia__content-wrapper{height:100%;float:right;width:calc(100% - 300px);min-width:330px;text-align:center;position:relative}.cbola-d-trivia__fb,.cbola-d-trivia__tw{z-index:10;font-size:19px;color:#fff;background-color:#bababa;border-radius:100px;padding:5px 0 0 2px;width:29px;height:29px;text-align:center!important;line-height:0!important;opacity:1;border-spacing:initial;cursor:pointer;transition:background-color linear .1s;display:inline-block;max-width:none}.cbola-d-trivia__share{opacity:1;transition:opacity .6s ease}.cbola-d-trivia__share .cbola-d-trivia__fb{position:absolute;top:5px;left:28px}.cbola-d-trivia__share .cbola-d-trivia__tw{position:absolute;top:32px;left:5px}.cbola-d-trivia__fb:hover{opacity:1!important;background-color:#3b5998!important;color:#fff!important}.cbola-d-trivia__tw:hover{opacity:1!important;background-color:#3cf!important;color:#fff!important}.cbola-d-trivia__item-image-wrapper{min-height:32px;width:180px;height:180px;left:22px;position:absolute;z-index:4;top:15px;border-radius:50%;overflow:hidden;background-color:transparent;max-width:none}.cbola-d-trivia-md .cbola-d-trivia__item-image-wrapper{width:158px;height:158px;top:22px}.cbola-d-trivia-sm .cbola-d-trivia__item-image-wrapper{width:120px;height:120px;top:30px}.cbola-d-trivia__game-end,.cbola-d-trivia__score-board{width:131px;height:131px;border-radius:50%;border:3px solid #f9f7f8;position:absolute;top:76px;left:148px;font-family:Oswald!important;text-align:center!important;font-weight:400!important;max-width:none}.cbola-d-trivia-md .cbola-d-trivia__game-end,.cbola-d-trivia-md .cbola-d-trivia__score-board{width:100px;height:100px;top:106px;left:130px}.cbola-d-trivia-sm .cbola-d-trivia__game-end,.cbola-d-trivia-sm .cbola-d-trivia__score-board{width:96px;height:96px;top:102px;left:80px}.cbola-d-trivia__game-end{background-color:#eeeced;padding:20px 0 0;opacity:0;z-index:10;transition:opacity .55s ease;pointer-events:none;cursor:default;color:#8f8f8f}.cbola-d-trivia-md .cbola-d-trivia__game-end,.cbola-d-trivia-sm .cbola-d-trivia__game-end{padding-top:5px}.cbola-d-trivia__game-end.cbola-d-trivia__game-end--active{opacity:1;pointer-events:auto}.cbola-d-trivia-btn--disabled,.cbola-d-trivia__btn.cbola-d-trivia__btn--correct,.cbola-d-trivia__btn.cbola-d-trivia__btn--wrong{pointer-events:none}.cbola-d-trivia-next-game__next-quiz-title{font-size:16px;font-weight:500;font-family:inherit;margin-top:10px;transition:opacity .6s ease}.cbola-d-trivia-next-game__start-btn:hover+.cbola-d-trivia-next-game__next-quiz-title{margin-top:9px}.cbola-d-trivia-next-game__start-btn{font-size:19px;font-weight:700;font-family:inherit;background-color:#3ed1d9;color:#fff;box-shadow:1px 1px 1px 1px #38b9c1;width:60%;margin-left:20%;padding-top:4px;padding-bottom:4px;border-radius:8px;text-transform:uppercase;cursor:pointer;text-align:center!important;opacity:1}.cbola-d-trivia-next-game__start-btn:hover{box-shadow:none;margin-left:calc(20% + 1px);margin-top:1px}.cbola-d-trivia__score-board{background-color:#3ed1d9;z-index:5;cursor:default;color:#fff}.cbola-d-trivia-md .cbola-d-trivia__game-end-challenge,.cbola-d-trivia-sm .cbola-d-trivia__game-end-challenge{font-size:14px;height:20px}.cbola-d-trivia-md .cbola-d-trivia__game-end-your-friends,.cbola-d-trivia-sm .cbola-d-trivia__game-end-your-friends{font-size:12px;margin-top:5px}.cbola-d-trivia__progress{margin-top:10px}.cbola-d-trivia__progress-text,.cbola-d-trivia__score-text{font-size:16px!important;width:100%;line-height:28px;text-shadow:none!important;font-family:Oswald,sans-serif!important}.cbola-d-trivia__progress-count,.cbola-d-trivia__score-count{font-size:24px!important;line-height:18px;font-family:Oswald,sans-serif!important}.cbola-d-trivia-btn-group,.cbola-d-trivia__title{font-family:Oswald!important;transition:opacity .6s ease;opacity:1}.cbola-d-trivia-md .cbola-d-trivia__progress,.cbola-d-trivia-sm .cbola-d-trivia__progress{margin-top:6px}.cbola-d-trivia-md .cbola-d-trivia__progress-text,.cbola-d-trivia-md .cbola-d-trivia__score-text{line-height:22px}.cbola-d-trivia-sm .cbola-d-trivia__progress-text,.cbola-d-trivia-sm .cbola-d-trivia__score-text{line-height:21px}.cbola-d-trivia__score{margin-top:5px}.cbola-d-trivia-md .cbola-d-trivia__score{margin-top:3px}.cbola-d-trivia-sm .cbola-d-trivia__score{margin-top:1px}.cbola-d-trivia__title{font-weight:700;color:#3ed1d9;font-size:28px!important;line-height:34px;padding:0 6% 22px;margin-top:11px;cursor:default!important}.cbola-d-trivia__btn,.cbola-d-trivia__btn i,.cbola-d-trivia__carambola{cursor:pointer;display:inline-block}.cbola-d-trivia__item-desc-wrapper{overflow:hidden;position:absolute;bottom:50px;width:100%;height:65px;opacity:1;transition:opacity .6s ease}.cbola-d-trivia-btn-group{width:100%;position:absolute;z-index:10;text-align:center!important;bottom:10px;font-weight:500;font-size:18px!important;text-transform:uppercase}.cbola-d-trivia__btn{color:#3ed1d9;overflow:visible;width:150px}.cbola-d-trivia__btn>span{font-family:Oswald,sans-serif!important}.cbola-d-trivia__btn:hover{color:#38b9c1}.cbola-d-trivia__btn:hover i{color:#38b9c1;border:2px solid #38b9c1}.cbola-d-trivia__btn i{width:40px;height:40px;padding-top:6px;border-radius:29px;border:2px solid #3ed1d9;font-size:25px;position:relative;background-color:#fff;color:#3ed1d9;text-align:center;transition:all .08s ease;margin:0 8px}.cbola-d-trivia-btn__option-one{margin-right:25px;text-align:right}.cbola-d-trivia-btn__option-two{text-align:left}.cbola-d-trivia__footer{width:100%;height:33px;background-color:#f4f3f3;overflow:visible;left:0;padding:0 12px 0 24px}.cbola-d-trivia__carambola{background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -1px -62px no-repeat;width:122px;height:90%;opacity:1;float:left;top:10px;position:relative}.cbola-d-trivia__carambola--branded{width:30%;top:5%;background-repeat:no-repeat;background-position:0 50%;background-size:contain}.cbola-d-trivia__carambola:hover{opacity:.6}.cbola-d-trivia__pager{height:100%;float:right;position:relative;top:7px}.cbola-d-trivia__pager-item{display:inline-block;float:left;width:19px;height:19px;border:1px solid transparent;background-color:#fff;margin-left:12px;text-align:center!important;border-radius:20px;font-size:12px!important;padding:1px;font-family:"Open sans"!important;line-height:15px;color:#000;font-weight:400!important;cursor:default}.cbola-d-trivia__item-desc,.cbola-d-trivia__item-image{width:100%;transition:transform .55s ease;position:absolute}.cbola-d-trivia__pager-item--active{background-color:#bababa!important;color:#000!important}.cbola-d-trivia__item-desc{padding:0 5%!important;text-align:center;vertical-align:middle;background-color:transparent!important;border:none!important;line-height:19px!important;white-space:normal;font-family:"Open Sans";font-weight:600!important;font-size:16px;letter-spacing:0;color:#8e8989;cursor:default!important}.cbola-d-trivia__item-desc--prev{transform:translateX(-100%)}.cbola-d-trivia__item-desc--active{transform:translateX(0)}.cbola-d-trivia__item-desc--next{transform:translateX(100%)}.cbola-d-trivia__item-image{height:100%;transform:translateX(100%)}.cbola-d-trivia__item-image.cbola-d-trivia__item-image--prev{transform:translateX(-100%)}.cbola-d-trivia__item-image.cbola-d-trivia__item-image--active{transform:translateX(0)}.cbola-d-trivia__btn.cbola-d-trivia__btn--correct span{color:#98de9f}.cbola-d-trivia__btn.cbola-d-trivia__btn--correct i{background-color:#98de9f!important;border-color:#98de9f!important;color:#fff!important}.cbola-d-trivia__btn.cbola-d-trivia__btn--wrong span{color:#fd7368}.cbola-d-trivia__btn.cbola-d-trivia__btn--wrong i{background-color:#fd7368!important;border-color:#fd7368!important;color:#fff!important}.cbola-d-trivia__btn--correct:hover,.cbola-d-trivia__btn--wrong:hover{color:#fff}.cbola-d-trivia__pager-item--temp-correct{background-color:#98de9f!important;border-color:#13bd00!important}.cbola-d-trivia__pager-item--correct{border-color:#98de9f}.cbola-d-trivia__pager-item--temp-wrong{background-color:#fd7368!important}.cbola-d-trivia__pager-item--wrong{border-color:#fd7368}.cbola-d-trivia-next-game{position:absolute;width:92%;line-height:normal;height:194px;z-index:15;background-color:#eeeced;border-radius:14px;text-align:center!important;transition:all .6s ease;top:13px;left:5%;transform:translateY(-120%);font-family:oswald,sans-serif!important;pointer-events:none;cursor:default}.cbola-ua-ff .cbola-d-trivia .cbola-fa-times,.cbola-ua-ie .cbola-d-trivia .cbola-fa-times{line-height:24px}.cbola-d-trivia-next-game__score,.cbola-d-trivia-next-game__text,.cbola-d-trivia__game-end-challenge,.cbola-d-trivia__game-end-your-friends{font-weight:700;font-family:inherit;text-align:center!important}.cbola-d-trivia-next-game.cbola-d-trivia-next-game--active{transform:translateY(0);color:#8f8f8f!important;pointer-events:auto}.cbola-d-trivia-next-game__text{font-size:24px;color:#8f8f8f;margin-top:8px}.cbola-d-trivia-next-game__score{margin-top:0;font-size:40px;color:#3ed1d9}.cbola-d-trivia__game-end-challenge{font-size:22px;margin-top:4px;letter-spacing:0;text-transform:uppercase;margin-left:-3px}.cbola-d-trivia__game-end-your-friends{font-size:16px;margin-top:-6px;text-transform:uppercase;letter-spacing:1.1pt;margin-left:3px}.cbola-d-trivia__game-end-share .cbola-d-trivia__fb,.cbola-d-trivia__game-end-share .cbola-d-trivia__tw{color:#fff;background-color:#bababa;width:26px;border-radius:18px;height:26px;margin-left:5px!important;margin-top:4px;font-size:19px;cursor:pointer;margin-right:0!important;padding-top:4px}.cbola-ua-ff .cbola-d-trivia__fb,.cbola-ua-ff .cbola-d-trivia__tw,.cbola-ua-ie .cbola-d-trivia__fb,.cbola-ua-ie .cbola-d-trivia__tw{padding:4px 0 0 2px}.cbola-d-hide-btn-i{position:relative;bottom:11px}.cbola-ua-ie .cbola-d-trivia__pager-item{line-height:14px}',
Cbola.Styles["cbola_layer_120_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-next-game__score,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__title{color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .in-content-container-coverage{padding-bottom:<%= PaddingBottomCover %>px!important;margin-top:<%= MarginTopCover %>px!important;margin-bottom:<%= MarginBottomCover %>px!important;max-width:<%= MaxInContentTriviaWidth %>px!important;min-width:<%= DesktopInContentMinWidth %>px!important}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-next-game__start-btn{background-color:<%= InContentThemeColor %>;box-shadow:1px 1px 1px 1px <%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__score-board{background-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn i{color:<%= InContentThemeColor %>;border-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn:hover{color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-next-game__start-btn:hover{box-shadow:none}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__btn:hover i{color:<%= InContentThemeHoverColor %>;border-color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia__carambola--branded{background-image:<% if (BrandImg) { %> url('<%= BrandImg %>') <%}else{%>null<%}%>}.cbola-d-trivia.cbola-d-trivia-dark{background-color:#000}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia-next-game__start-btn{background-color:#5096cb;background-color:<%= InContentThemeColor %>;box-shadow:1px 1px 1px 1px #3f83b6;box-shadow:1px 1px 1px 1px <%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia-next-game__start-btn:hover{box-shadow:none}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__score-board{background-color:#5096cb;background-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__title{color:#ededed}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn{color:#f2f0f0}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn:hover{color:#3f83b6;color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn i{border:2px solid #000;color:#000;background-color:#f2f0f0}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__btn:hover i{border:2px solid #000;background-color:#3f83b6;border-color:<%= InContentThemeHoverColor %>;background-color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__fb,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia__tw{background-color:#5096cb;background-color:<%= InContentThemeHoverColor %>}.cbola-d-trivia-dark .cbola-d-trivia__footer{background-color:#252525}.cbola-d-trivia-dark .cbola-d-trivia__pager-item{background-color:#000;color:#d0d0d0}.cbola-d-trivia-dark .cbola-d-trivia__pager-item--active{background-color:#575858!important;color:#d0d0d0!important}.cbola-d-trivia-dark .cbola-d-trivia__item-desc{color:#b8b8b8}.cbola-d-trivia-dark .cbola-d-trivia__pager-item--correct{border-color:rgba(19,189,0,.5)}.cbola-d-trivia-dark .cbola-d-trivia__pager-item--wrong{border-color:rgba(253,115,104,.5)}.cbola-d-trivia-dark .cbola-d-trivia-next-game__score{color:#5096cb}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-d-trivia-dark .cbola-d-trivia-next-game__score{color:<% = InContentThemeColor% >}",Cbola.Templates["desktop_trivia_view.html"]='<div class="cbola-d-trivia">\n	<div class="cbola-d-trivia__body">\n		<div class="cbola-d-trivia__score-wrapper">\n			<div class="cbola-d-trivia__share">\n				<div class="cbola-d-trivia__fb"><i class="cbola-fa cbola-fa-facebook"></i></div>\n				<div class="cbola-d-trivia__tw"><i class="cbola-fa cbola-fa-twitter"></i></div>\n			</div>\n			<div class="cbola-d-trivia__item-image-wrapper">\n			</div>\n			<div class="cbola-d-trivia__game-end">\n        <div class="cbola-d-trivia__game-end-challenge">Challenge</div>\n        <div class="cbola-d-trivia__game-end-your-friends">Your Friends</div>\n        <div class="cbola-d-trivia__game-end-share">\n          <div class="cbola-d-trivia__fb"><i class="cbola-fa cbola-fa-facebook"></i></div>\n          <div class="cbola-d-trivia__tw"><i class="cbola-fa cbola-fa-twitter"></i></div>\n        </div>\n			</div>\n			<div class="cbola-d-trivia__score-board">\n				<div class="cbola-d-trivia__progress">\n					<div class="cbola-d-trivia__progress-text">Question</div>\n					<div class="cbola-d-trivia__progress-count">1/10</div>\n				</div>\n				<div class="cbola-d-trivia__score">\n					<div class="cbola-d-trivia__score-text">Your score</div>\n					<div class="cbola-d-trivia__score-count">0</div>			\n				</div>\n			</div>\n		</div>\n		<div class="cbola-d-trivia__content-wrapper">\n			<div class="cbola-d-trivia-next-game">\n				<div class="cbola-d-trivia-next-game__text">You Scored a Fair</div>\n				<div class="cbola-d-trivia-next-game__score">6/10</div>\n        <div class="cbola-d-trivia-next-game__start-btn cbola-fade-out">Start another quiz</div>\n        <div class="cbola-d-trivia-next-game__next-quiz-title"></div>\n			</div>\n			<div class="cbola-d-trivia__title"></div>\n			<div class="cbola-d-trivia__item-desc-wrapper">\n			</div>\n			<div class="cbola-d-trivia-btn-group">\n				<div class="cbola-d-trivia__btn cbola-d-trivia-btn__option-one cbola-refresh-click-trigger"><span>TRUE</span><i class="cbola-fa cbola-fa-check"></i></div>\n				<div class="cbola-d-trivia__btn cbola-d-trivia-btn__option-two cbola-refresh-click-trigger"><i class="cbola-fa cbola-fa-times"></i><span>FALSE</span></div>\n			</div>\n		</div>\n	</div>\n	<div class="cbola-d-trivia__footer">\n		<div class="cbola-d-trivia__carambola"></div>		\n		<div class="cbola-d-trivia__pager">\n\n		</div>		\n	</div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var e=Cbola.Common.UserService,t=function(){};return t.prototype.getGameEndedText=function(t){var n=e.vocabulary("YouScoredaRidiculous");return t>.9?n=e.vocabulary("youScoredaPerfect"):t>.8?n=e.vocabulary("YouScoredanAwesome"):t>.6?n=e.vocabulary("YouScoredaMighty"):t>.4?n=e.vocabulary("YouScoredaFair"):t>.2&&(n=e.vocabulary("YouScoredaLame")),n},t.prototype.shareOnFacebook=function(e){var t="https://www.facebook.com/dialog/feed?app_id=264749280348555&link="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e,!0))+"&picture="+encodeURIComponent(e.image)+"&name="+encodeURIComponent(e.title)+"&caption="+encodeURIComponent("Powered By Carambola")+"&description="+encodeURIComponent(e.text)+"&redirect_uri="+encodeURIComponent("https://www.facebook.com")+"&display=popup";window.open(t,"_blank","width=560,height=380")},t.prototype.shareOnTwitter=function(e){if(""===Cbola.Config.bitlyUrl){var t="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e));$cbola.get(t,function(t){Cbola.Config.bitlyUrl="undefined"==typeof t.data.url?Cbola.Utils.checkIfQueryStingExist(e,!0):t.data.url,window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.title+" "+e.text)+"&url="+encodeURIComponent(Cbola.Config.bitlyUrl),"_blank","width=560,height=380")})}else window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.text)+"&url="+encodeURIComponent(Cbola.Config.bitlyUrl),"_blank","width=560,height=380")},new t}(),Cbola.InContent.Layers.CommonTriviaLayer=function(){var e=Cbola.Logger.getInstance(),t=Cbola.InContent.Layers.Services.TriviaService,n=Cbola.Common.AnalyticsService,i=Cbola.InContent.Layers.TriviaUtils,o=Cbola.Common.UserService,r=Cbola.Enums.ItemViewTypes,a=Cbola._,s=t.triviaTypes.TRUE_FALSE,l=Cbola.EventBus,c=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1,this.adSpots=[]},d=Cbola.InContent.Layers.Base.prototype;return a.extend(c.prototype,d),c.prototype.init=function(){d.init.call(this)},c.prototype.setOptions=function(e){this.options=e},c.prototype.onBeforeLoad=function(){e.debug("CommonTriviaLayer::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.reset()},c.prototype.onLoad=function(){e.debug("CommonTriviaLayer::onLoad"),t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){this.game=e,this.game&&(this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.attach(this.container),l.fire(l.Events.LAYER_READY,this),this.view.addOnMouseOverEventListener(),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers))}.bind(this))},c.prototype.onAfterLoad=function(){e.debug("CommonTriviaLayer::onAfterLoad"),Cbola.taskManager.addTask(this.updateViewability,[],this)},c.prototype.onUserAnswered=function(e,t){this.setItemsViewability(!1,e,r.ON_NEXT_BTN);var i=this.game.answerCurrentQuestion(e);this.view.setScore&&this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,t,i,function(){this.game.isCompleted?(this.setGameViewability(!0),this.onGameEnded()):(a.isUndefined(this.adSpots[this.game.getCurrentQuestionNumber()-1])?this.setItemsViewability(!0,0,r.ON_NEXT_BTN):(this.view.openSpot(this.game.getCurrentQuestionNumber()-1),this.setAdItemViewability(!0)),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress&&this.view.setProgress(this.game.getCurrentQuestionNumber()+"/10")),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]}.bind(this))},c.prototype.onCloseInItemAd=function(){this.setAdItemViewability(!1),this.setItemsViewability(!0,0,r.ON_NEXT_BTN),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]},c.prototype.onGameEnded=function(){t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){null===t&&e.warnM("CommonTriviaLayer.onGameEnded","Trivia::onGameEnded -> No new game available, doing nothing"),this.nextGame=t,this.view.setGameEndedText(i.getGameEndedText(this.game.score/this.game.items.length)),this.view.setNextGameUI(this.nextGame),this.view.toggleGameEndedAnimation(!0)}.bind(this))},c.prototype.startNextGame=function(){this.setGameViewability(!1),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.toggleGameEndedAnimation(!1),this.setItemsViewability(!0,0,r.ON_NEXT_BTN),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]},c.prototype.onBecameViewable=function(e){d.onBecameViewable.call(this),a.isNil(this.game)||(this.game.hasEnded()?this.setGameViewability(!0):this.setLayerViewability(!0,e),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[])},c.prototype.onBecameUnviewable=function(){d.onBecameUnviewable.call(this),a.isNil(this.game)||(this.game.hasEnded()?this.setGameViewability(!1):this.setLayerViewability(!1),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[])},c.prototype.onMouseEnter=function(){n.SetPageElementView(this.elementId,Cbola.Enums.ItemViewTypes.ON_HOVER,Cbola.Enums.ItemViewTypes.NONE)},c.prototype.onShareInGame=function(e){var t,o;t=this.game.getCurrentQuestionItem(),o={text:t.Description,title:t.ChartTitle||this.game.shortTitle,image:0!==t.Image.indexOf("http")?"https:"+t.Image:t.Image,ParentId:t.ParentId},2===t.Answers.length&&(o.text+=". "+t.Answers[0].Title+" or "+t.Answers[1].Title),this.isFacebookShare(e)?(i.shareOnFacebook(o),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,t)):this.isTwitterShare(e)&&(i.shareOnTwitter(o),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,t))},c.prototype.onShareEndGame=function(e){var t,r;r=this.game.getQuestionItem(this.game.items.length-1),t={text:o.vocabulary("canYouBeatThat"),title:o.vocabulary("iScored")+" "+this.game.score+"/10 "+o.vocabulary("playingIn")+' "'+this.game.title+'"',image:0!==r.Image.indexOf("http")?"https:"+r.Image:r.Image,ParentId:r.ParentId},this.isFacebookShare(e)?(i.shareOnFacebook(t),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,r)):this.isTwitterShare(e)&&(i.shareOnTwitter(t),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,r))},c.prototype.isFacebookShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__fb")>-1)return!0;e=e.parentNode}return!1},c.prototype.isTwitterShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__tw")>-1)return!0;e=e.parentNode}return!1},c.prototype.onPoweredBy=function(e){var t=this.options.BrandRedirect||Cbola.Config.brandRedirect_default;n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),e&&n.SetClickTracker(e),window.open(t)},c.prototype.setLayerViewability=function(t,n){var i,o=t?n:Cbola.Enums.ItemViewTypes.UNVIEWABILITY;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setLayerViewability","CommonTriviaLayer.setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):i=this.game.getCurrentQuestionItem(),i&&(i.setViewable(t),i.setOpenType(o),i.setCloseType(Cbola.Enums.ItemViewTypes.NONE),this.itemsForAnalytics.push(i))},c.prototype.setItemsViewability=function(t,n,i){var o,r=t?i:Cbola.Enums.ItemViewTypes.NONE,s=t?Cbola.Enums.ItemViewTypes.NONE:i;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):o=this.game.getCurrentQuestionItem(),this.updateAndReportItemForAnalytics(o,t,r,s,n)},c.prototype.setAdItemViewability=function(e){var t=e?Cbola.Enums.ItemViewTypes.AD:Cbola.Enums.ItemViewTypes.NONE,n=e?Cbola.Enums.ItemViewTypes.NONE:Cbola.Enums.ItemViewTypes.AD,i=this.adSpots[this.game.getCurrentQuestionNumber()-1];i&&(i.Id=parseInt(this.view.getInItemAdId(this.game.getCurrentQuestionNumber()-1))),this.updateAndReportItemForAnalytics(i,e,t,n)},c.prototype.setGameViewability=function(t,n){var i,n=n||Cbola.Enums.ItemViewTypes.ENDING_SCREEN,o=t?n:Cbola.Enums.ItemViewTypes.NONE,r=t?Cbola.Enums.ItemViewTypes.NONE:n;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):i=this.game,this.updateAndReportItemForAnalytics(i,t,o,r)},c.prototype.updateAndReportItemForAnalytics=function(t,n,i,o,r){r=r||0,t?(t.setViewable(n),t.isViewable&&(t.setViewOrder(++this.itemsViewOrder),t.setDisplayOrder(++this.itemsDisplayOrder)),t.setUserAnswerId(r),t.setOpenType(i),t.setCloseType(o),this.itemsForAnalytics.push(t)):e.warnM("CommonTriviaLayer.updateAndReportItemForAnalytics","CommonTriviaLayer.updateAndReportItemForAnalytics failed to report empty item")},c.prototype.endGameClickTracking=function(){n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},c.prototype.getTriviaType=function(){return s},c}(),Cbola.InContent.Layers.DesktopTriviaLayer=function(){var e=Cbola._,t=Cbola.InContent.Layers.Services.TriviaService,n=t.triviaTypes.TRUE_FALSE,i=function(){Cbola.InContent.Layers.CommonTriviaLayer.call(this),this.view=new Cbola.InContent.Layers.DesktopTriviaView(this)};i.prototype.getTriviaType=function(){return n};var o=Cbola.InContent.Layers.CommonTriviaLayer.prototype;return e.extend(i.prototype,o),i}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopTriviaView=function(){var e=Cbola.Utils,t=Cbola.Common.FontsManager(),n=Cbola._,i=Cbola.EventBus,o=function(e,t,n){this.ignoreUserInput=!1,this.isAttached=!1,this.presenter=e,this.container=this.presenter.container,this.element=Cbola.Templates.createElement("desktop_trivia_view.html"),this.styleSheet=Cbola.Styles["cbola_layer_120.css"],this.lastImageIdx=0,this.uiItems=[],this.bind()};return o.prototype.bind=function(){this.buttonGroupElem=this.element.querySelector(".cbola-d-trivia-btn-group"),this.falseBtnElem=this.element.querySelector(".cbola-d-trivia-btn__option-two"),this.trueBtnElem=this.element.querySelector(".cbola-d-trivia-btn__option-one"),this.pagerElem=this.element.querySelector(".cbola-d-trivia__pager"),this.imageWrapperElem=this.element.querySelector(".cbola-d-trivia__item-image-wrapper"),this.descWrapperElem=this.element.querySelector(".cbola-d-trivia__item-desc-wrapper"),this.progressElem=this.element.querySelector(".cbola-d-trivia__progress-count"),this.scoreElem=this.element.querySelector(".cbola-d-trivia__score-count"),this.nextGameElem=this.element.querySelector(".cbola-d-trivia__game-end"),this.startGameBtn=this.element.querySelector(".cbola-d-trivia-next-game__start-btn"),this.shareInGame=this.element.querySelector(".cbola-d-trivia__share"),this.shareEndGame=this.element.querySelector(".cbola-d-trivia__game-end-share"),this.titleElem=this.element.querySelector(".cbola-d-trivia__title"),this.poweredBy=this.element.querySelector(".cbola-d-trivia__carambola"),this.nextGameTitleElem=this.element.querySelector(".cbola-d-trivia-next-game__next-quiz-title"),this.addEventListeners()},o.prototype.addEventListeners=function(){function e(e,t){var i;return t.dataset?(i=n.camelCase(e),t.dataset[i]):t.getAttribute("data-"+e)}window.addEventListener("resize",this.onResize.bind(this)),this.trueBtnElem.addEventListener("click",function(t){var n=e("answer-id",t.currentTarget);!this.ignoreUserInput&&n&&this.presenter.onUserAnswered(parseInt(n),t.currentTarget)}.bind(this)),this.falseBtnElem.addEventListener("click",function(t){var n=e("answer-id",t.currentTarget);this.ignoreUserInput||this.presenter.onUserAnswered(parseInt(n),t.currentTarget)}.bind(this)),this.startGameBtn.addEventListener("click",function(){this.ignoreUserInput||this.presenter.startNextGame()}.bind(this)),this.shareInGame.addEventListener("click",function(e){this.ignoreUserInput||this.presenter.onShareInGame(e.target)}.bind(this)),this.shareEndGame.addEventListener("click",function(e){this.ignoreUserInput||this.presenter.onShareEndGame(e.target)}.bind(this)),this.poweredBy.addEventListener("click",function(){this.presenter.onPoweredBy()}.bind(this))},o.prototype.addOnMouseOverEventListener=function(){this.bindedOnMouseEnter=this.onMouseEnter.bind(this),this.container.addEventListener("mouseenter",this.bindedOnMouseEnter)},o.prototype.addItems=function(e){for(var t=document.createDocumentFragment(),n=document.createDocumentFragment(),i=0;i<e.length;i++){var o=this.createItemForUI(e[i]);t.appendChild(o.imgElem),n.appendChild(o.descElem),this.uiItems.push(o)}this.imageWrapperElem.appendChild(t),this.descWrapperElem.appendChild(n)},o.prototype.createItemForUI=function(e){var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return t.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--next",n.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--next",i.className="cbola-loader",n.appendChild(i),t.textContent=e.Description,{descElem:t,loaderElem:i,imgElem:n,imageUrl:e.Image}},o.prototype.setTitle=function(e){this.titleElem.textContent=e},o.prototype.applyViewOptions=function(t){this.options=t,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId;var i=n.template(Cbola.Styles["cbola_layer_120_theme.css"]),o=i(this.options);e.injectStyle(document,o),t.HideSocialButtons&&(this.shareInGame.classList.add("cbola-hidden"),this.shareEndGame.classList.add("cbola-hidden")),t.showTriviaButtonIcons||(this.trueBtnElem.querySelector("i").classList.remove("cbola-fa-check"),this.trueBtnElem.querySelector("span").classList.add("cbola-d-hide-btn-i"),this.falseBtnElem.querySelector("i").classList.remove("cbola-fa-times"),this.falseBtnElem.querySelector("span").classList.add("cbola-d-hide-btn-i")),2===t.TriviaColorSkin&&this.element.classList.add("cbola-d-trivia-dark"),t.BrandImg&&this.poweredBy.classList.add("cbola-d-trivia__carambola--branded"),t.inContentTriviaFloatType&&(this.presenter.container.style["float"]=this.options.inContentTriviaFloatType)},o.prototype.attach=function(o){t.getFontsAwesome(),t.getOpenSans(),t.getOswald(),this.isAttached||(this.isAttached=!0,n.isUndefined(this.styleElem)&&(this.styleElem=e.injectMainStyle(window.document,this.styleSheet)),o.appendChild(this.element),this.container=o,this.onResize(),i.fire(i.Events.LAYER_ATTACHED+this.elementId))},o.prototype.detach=function(e){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},o.prototype.reset=function(){this.uiItems=[],this.lastImageIdx=0,this.setProgress("1/10"),this.setScore("0"),this.descWrapperElem.innerHTML="",this.imageWrapperElem.innerHTML="",this.pagerElem.innerHTML="",this.initPager()},o.prototype.disableUserInput=function(e){this.ignoreUserInput=!0,setTimeout(function(){this.ignoreUserInput=!1}.bind(this),e)},o.prototype.playFeedbackAnimation=function(e,t,n,i){this.disableUserInput(1e3);var o=n?"correct":"wrong",r=t.querySelector("span");t.classList.add("cbola-d-trivia__btn--"+o);var a=r.textContent;r.textContent=o;var s=this.pagerElem.querySelectorAll(".cbola-d-trivia__pager-item")[e];s.classList.add("cbola-d-trivia__pager-item--temp-"+o),setTimeout(function(e,n){t.classList.remove("cbola-d-trivia__btn--"+n),s.classList.remove("cbola-d-trivia__pager-item--temp-"+n),s.classList.remove("cbola-d-trivia__pager-item--active"),s.classList.add("cbola-d-trivia__pager-item--"+n),r.textContent=a,e&&e()}.bind(this),1e3,i,o)},o.prototype.setGameEndedText=function(e){var t=this.element.querySelector(".cbola-d-trivia-next-game__text");t.textContent=e},o.prototype.gotoQuestion=function(e,t){function i(e,t,i){var o;return i.dataset?(o=n.camelCase(e),i.dataset[o]=t):i.setAttribute("data-"+e,t)}if(!this.ignoreUserInput){this.disableUserInput(550);for(var o=0;o<Math.min(e,this.uiItems.length);o++){var r=this.uiItems[o];r&&(r.descElem.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--prev",r.imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--prev")}var a=this.uiItems[e];a&&(this.trueBtnElem.querySelector("span").textContent=t[0].Title,i("answer-id",t[0].Id,this.trueBtnElem),this.falseBtnElem.querySelector("span").textContent=t[1].Title,i("answer-id",t[1].Id,this.falseBtnElem),a.descElem.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--active",a.imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--active");for(var o=e+1;o<this.uiItems.length;o++){var s=this.uiItems[o];s&&(s.descElem.className="cbola-d-trivia__item-desc cbola-d-trivia__item-desc--next",s.imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--next")}var l=this.pagerElem.querySelectorAll(".cbola-d-trivia__pager-item")[e];l.classList.add("cbola-d-trivia__pager-item--active"),this.loadImagesIfNeeded(e)}},o.prototype.initPager=function(){for(var e=document.createDocumentFragment(),t=0;10>t;t++)e.appendChild(this.createPagerItem(t+1));e.childNodes[0].className+=" cbola-d-trivia__pager-item--active",this.pagerElem.appendChild(e)},o.prototype.createPagerItem=function(e){var t=document.createElement("div");return t.textContent=e,t.className="cbola-d-trivia__pager-item",t},o.prototype.setProgress=function(e){this.progressElem.textContent=e},o.prototype.setScore=function(e){this.scoreElem.textContent=e},o.prototype.loadNextImages=function(e){for(var t=this.lastImageIdx+e,n=this.lastImageIdx;n<Math.min(t,this.uiItems.length);n++,this.lastImageIdx++){var i=new Image;i.itemImage=this.uiItems[n].imgElem,i.loaderElem=this.uiItems[n].loaderElem,i.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImage.style.background='url("'+this.src+'") transparent 50% 50% / contain'},i.src=this.uiItems[n].imageUrl}},o.prototype.loadImagesIfNeeded=function(e){this.lastImageIdx+2>e&&this.loadNextImages(2)},o.prototype.toggleGameEndedAnimation=function(e){e?(this.openResultBox(),setTimeout(this.openNextGameTeaser.bind(this),1e3)):(this.closeResultBox(),this.closeNextGameTeaser())},o.prototype.openResultBox=function(){var e=this.element.querySelector(".cbola-d-trivia-next-game");e&&(this.element.querySelector(".cbola-d-trivia-next-game__score").textContent=this.scoreElem.textContent+"/10",e.classList.add("cbola-d-trivia-next-game--active"),this.titleElem.classList.add("cbola-fade-out"),this.descWrapperElem.classList.add("cbola-fade-out"),this.buttonGroupElem.classList.add("cbola-fade-out"),this.shareInGame.classList.add("cbola-fade-out"))},o.prototype.setNextGameUI=function(e){if(e){this.nextGameTitleElem.textContent="Up Next: "+e.shortTitle,this.startGameBtn.classList.remove("cbola-fade-out");var t={Description:"",Image:e.getCurrentQuestionItem().Image},n=this.createItemForUI(t);this.imageWrapperElem.appendChild(n.imgElem),this.uiItems.push(n),this.loadNextImages(2)}},o.prototype.openNextGameTeaser=function(){this.nextGameElem.classList.add("cbola-d-trivia__game-end--active"),this.uiItems.length>10&&(this.uiItems[9].imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--prev",this.uiItems[10].imgElem.className="cbola-d-trivia__item-image cbola-d-trivia__item-image--active")},o.prototype.closeNextGameTeaser=function(){this.nextGameElem.classList.remove("cbola-d-trivia__game-end--active"),this.startGameBtn.classList.add("cbola-fade-out"),this.nextGameTitleElem.textContent=""},o.prototype.closeResultBox=function(){var e=this.element.querySelector(".cbola-d-trivia-next-game");e&&(e.className="cbola-d-trivia-next-game",this.titleElem.classList.remove("cbola-fade-out"),this.descWrapperElem.classList.remove("cbola-fade-out"),this.buttonGroupElem.classList.remove("cbola-fade-out"),this.shareInGame.classList.remove("cbola-fade-out"))},o.prototype.onResize=function(){var e=this.element.clientWidth;this.element.classList.remove("cbola-d-trivia-sm"),this.element.classList.remove("cbola-d-trivia-md"),550>e?this.element.classList.add("cbola-d-trivia-sm"):595>e&&this.element.classList.add("cbola-d-trivia-md")},o.prototype.onMouseEnter=function(){this.container.removeEventListener("mouseenter",this.bindedOnMouseEnter),this.presenter.onMouseEnter()},o}(),Cbola.Styles["cbola_layer_100.css"]='.cbola-desktop-facts,.cbola-desktop-facts *{box-sizing:border-box}.cbola-desktop-facts{width:100%;overflow:hidden;font-family:\'Open Sans\'!important}.cbola-desktop-facts-header{height:20px}.cbola-desktop-content-wrapper{height:250px;position:relative}.cbola-horizontal-line,.cbola-top-title{float:left}.cbola-horizontal-line{position:relative;top:51%;height:1px;border-top:1px solid rgba(226,226,226,.7);margin-left:3px;width:415px}.cbola-desktop-facts-progress{position:absolute;right:9%;top:10px;color:#909090!important;cursor:default;font-weight:600!important;font-family:"Open Sans"!important;font-size:16px;z-index:0;line-height:normal}.cbola-powered-by-logo{float:right;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -1px -62px no-repeat;width:122px;height:13px;margin-top:2px;cursor:pointer}.cbola-powered-by-logo_inner{float:none;position:absolute;bottom:3px;left:5px;height:13px!important}.cbola-top-title{color:#909090;font-size:15px;font-weight:600!important;position:relative;z-index:1;text-align:left;cursor:default}.cbola-desktop-content-wrapper>div{height:100%;transform-origin:left top;zoom:1}.cbola-desktop-image-wrapper{position:relative;transform:translate3d(1px,0 ,0)}.cbola-desktop-image-credit,.cbola-desktop-image-title{color:#fff;position:absolute;transition:opacity .6s ease;opacity:1}.cbola-desktop-image-title{bottom:50px;left:5px;margin:0!important;border:none!important;box-shadow:0 0 0!important;text-shadow:0 0 0 transparent!important;white-space:pre-wrap}.cbola-desktop-image-title span{background-color:#000;box-shadow:5px 0 0 #000,-5px 0 0 #000;color:#fff;font-size:19px!important;font-weight:700!important;letter-spacing:0!important;line-height:1.4!important;text-transform:none!important;font-style:normal!important;border:none!important;white-space:pre-wrap;transition:opacity .6s ease;font-family:\'Open Sans\'}.cbola-desktop-image-credit{bottom:0;left:0;font-size:10px;font-weight:400;background-color:#000;padding-left:3px;padding-right:3px;line-height:initial}.cbola-desktop-slider{-webkit-font-smoothing:antialiased;width:100%;height:110%!important;top:-1px;left:-1px;position:absolute;transform:translate3d(-100%,0,0);background-color:rgba(255,255,255,.9);transition:transform .6s ease}.cbola-desktop-slider-active{transform:translate3d(0,0,0);left:0}.cbola-desktop-slider-hint{z-index:5!important;cursor:pointer!important;opacity:1;position:absolute;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -125px -2px no-repeat;width:31px;height:98px;right:0;transform:translateX(100%);top:14%}.cbola-desktop-slider-inner{position:relative;height:90.90909090909091%}.cbola-items-box,.cbola-slider-ad-placeholder{height:100%}.cbola-items-box{float:left;width:calc(100% - 300px);min-width:140px;position:relative;overflow:hidden}.cbola-items-button-wrapper{position:absolute;cursor:pointer;z-index:10;transform:translate3d(0,0,0) rotate(360.001deg);opacity:1}.cbola-items-button-wrapper:hover{opacity:.8}.cbola-items-button-left{transform:translate3d(0,0,0) rotate(180deg);left:9%}.cbola-items-button-right{right:9%}.cbola-items-button{width:24px!important;height:44px!important;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -26px -1px no-repeat}.cbola-content-item-wrapper{height:100%;position:absolute;width:100%;transform:translateX(0);transition:transform .6s cubic-bezier(.415,.21,.065,.945)}.cbola-items-box>.cbola-content-item-wrapper~.cbola-content-item-wrapper{transform:translateX(1100px)}.cbola-content-item-structure{position:absolute;top:15%;left:10%;width:80%;z-index:1}.cbola-content-image-loader{margin:0 auto;position:relative}.cbola-items-box-large .cbola-content-image-loader{width:110px;height:110px}.cbola-items-box-medium .cbola-content-image-loader{width:90px;height:90px}.cbola-items-box-small .cbola-content-image-loader{width:70px;height:70px}.cbola-content-item-picture{width:100%!important;height:100%!important;border-radius:50%;position:relative}.cbola-content-items-container{padding-top:17px;padding-left:0;padding-right:0;font-size:13px!important;font-weight:400;color:#000;text-align:center;line-height:19px;cursor:default}.cbola-content-items-container:before{content:\' \';height:100%;display:inline-block;margin-left:-.25em;vertical-align:middle}.cbola-items-box-small .cbola-content-items-container{font-size:11px!important;line-height:16px}.cbola-content-read-more{text-decoration:none;position:absolute;bottom:10px;left:50%;transform:translateX(-50%);background-color:#2a5d82;color:#fff;padding:2px;font-size:15px;width:125px;text-align:center;border-radius:5px;font-weight:600;box-shadow:0 3px 0 #1f4866;opacity:1;cursor:pointer}.cbola-content-read-more:hover{opacity:.75}.cbola-slider-ad-placeholder{width:300px;height:100%;float:right;box-shadow:inset 3px 0 0 0 rgba(255,255,255,1);position:relative;top:1px}.cbola-ua-ie .cbola-desktop-slider{transform:none;transition:left .6s ease;left:-100%}.cbola-ua-ie .cbola-desktop-slider-active{transform:none;left:0}.cbola-items-box-small .cbola-desktop-facts-progress,div[layertype="100"] .cbola-items-box-medium .cbola-desktop-facts-progress{right:50%;transform:translateX(50%)}div[layertype="100"] .cbola-items-box-medium .cbola-desktop-facts-progress{top:105px}div[layertype="100"] .cbola-items-box-small .cbola-desktop-facts-progress{top:85px}div[layertype="100"] .cbola-items-box-large .cbola-items-button-wrapper{top:30%}div[layertype="100"] .cbola-items-box-medium .cbola-items-button-wrapper{top:41%}div[layertype="100"] .cbola-items-box-small .cbola-items-button-wrapper{top:34%}div[layertype="100"] .cbola-items-box-medium .cbola-items-button-wrapper,div[layertype="100"] .cbola-items-box-small .cbola-items-button-wrapper{background-color:#a3a3a3;width:22px;height:22px;border-radius:50%}.cbola-items-box-medium .cbola-items-button,div[layertype="100"] .cbola-items-box-small .cbola-items-button{background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -16px -1px no-repeat;width:8px!important;height:12px!important;position:absolute;top:5px;left:7px}div[layertype="100"] .cbola-items-box-medium .cbola-content-item-structure,div[layertype="100"] .cbola-items-box-small .cbola-content-item-structure{top:5%;width:90%;left:5%}div[layertype="100"] .cbola-items-box-medium .cbola-content-items-container{padding-top:25px}div[layertype="100"] .cbola-items-box-small .cbola-content-items-container{padding-top:30px}',
Cbola.Templates["facts_desktop.html"]='<div class="cbola-desktop-facts">\n  <div class="cbola-desktop-facts-header cbola-clearfix">\n    <div class="cbola-top-title unselectDrag">Did You Know?</div>\n    <div class="cbola-horizontal-line"></div>\n    <div class="cbola-powered-by-logo"></div>\n  </div>\n  <div class="cbola-desktop-content-wrapper">\n    <div class="cbola-desktop-image-wrapper">\n      <h2 class="cbola-desktop-image-title"><span>Amazing Celebrity Secrets Revealed</span></h2>\n      <div class="cbola-desktop-image-credit">Someone</div>\n    </div>\n    <div class="cbola-desktop-slider">\n      <div class="cbola-desktop-slider-inner">\n        <div class="cbola-items-box unselectDrag">\n          <div class="cbola-desktop-facts-progress unselectDrag"></div>\n          <div class="cbola-items-button-wrapper cbola-refresh-click-trigger cbola-items-button-left unselectDrag">\n            <div class="cbola-items-button"></div>\n          </div>\n          <div class="cbola-items-button-wrapper cbola-refresh-click-trigger cbola-items-button-right unselectDrag">\n            <div class="cbola-items-button"></div>\n          </div>\n        </div>\n        <div class="cbola-slider-ad-placeholder unselectDrag"></div>\n      </div>\n      <div class="cbola-desktop-slider-hint unselectDrag"></div>\n    </div>\n  </div>\n</div>',Cbola.Templates["facts_item_desktop.html"]='<div class="cbola-content-item-wrapper">\n  <div class="cbola-content-item-structure unselectDrag">\n    <div class="cbola-content-image-loader">\n      <div class="cbola-loader"></div>\n      <img class="cbola-content-item-picture" draggable="false"/>\n    </div>\n    <div class="cbola-content-items-container">\n      <span class="cbola-content-item-description"></span>\n    </div>\n  </div>\n  <div class="cbola-content-read-more">Read More</div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopFactsLayer=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.InContent.Layers.Services.FactsService,n=Cbola.Common.AnalyticsService,i=Cbola.Common.UserService,o=Cbola.Utils,r=Cbola._,a=Cbola.EventBus,s=function(){e.info("DesktopFactsLayer::ctor"),this.items=[],this.currItemIdx=0,this.lazyLoadIdx=0,this.toggled=!1,this.itemsToReport=[],this.itemsViewOrder=1,this.becameViewableOnce=!1,this.becameUnviewableOnce=!1,this.sliderOpenedAt=0,this.sliderViewDuration=0,this.isAttached=!1},l=Cbola.InContent.Layers.Base.prototype;return r.extend(s.prototype,l),s.prototype.setOptions=function(e){l.setOptions.call(this,e),this.options.teaser=r.result(this.data,"DefaultSettings.Teasers",[]).shift()},s.prototype.applyOptions=function(){l.applyOptions.call(this),this.options.InContentTitleBGColor&&(this.bgTitleElem.style["background-color"]=this.options.InContentTitleBGColor,this.bgTitleElem.style["box-shadow"]="5px 0 0 "+this.options.InContentTitleBGColor+", -5px 0 0 "+this.options.InContentTitleBGColor),this.options.InContentTitleFontColor&&(this.bgTitleElem.style.color=this.options.InContentTitleFontColor),this.options.WidgetTitleFontColor&&(this.titleElem.style.color=this.options.WidgetTitleFontColor),this.options.DesktopInContentMinWidth&&(this.container.style["min-width"]=this.options.DesktopInContentMinWidth+"px"),this.options.RemoveInContentHeader&&(this.headerElem.style.display="none",this.bgCreditElem.style.display="none",this.contentWrapper.appendChild(this.poweredByLogo),this.poweredByLogo.classList.add("cbola-powered-by-logo_inner"))},s.prototype.init=function(){e.info("DesktopFactsLayer::init"),l.init.call(this),this.elemProps.container=this.container,Cbola.Common.FontsManager().getOpenSans(),Cbola.Common.FontsManager().getNunito(),this.buildElement(),this.initStyles(),this.applyOptions(),this.bindEvents()},s.prototype.buildElement=function(){this.boxElem=Cbola.Templates.createElement("facts_desktop.html"),this.contentWrapper=this.boxElem.querySelector(".cbola-desktop-content-wrapper"),this.itemsBox=this.boxElem.querySelector(".cbola-items-box"),this.sliderElem=this.boxElem.querySelector(".cbola-desktop-slider"),this.progressElem=this.boxElem.querySelector(".cbola-desktop-facts-progress"),this.progressElem.textContent="1/15",this.headerElem=this.boxElem.querySelector(".cbola-desktop-facts-header"),this.titleElem=this.headerElem.children[0],this.titleElem.textContent=this.data.WidgetTitle,this.bgTitleElem=this.boxElem.querySelector(".cbola-desktop-image-title span"),this.bgTitleElem.textContent=this.data.Title,this.bgCreditElem=this.boxElem.querySelector(".cbola-desktop-image-credit"),this.bgCreditElem.textContent=this.data.ImageCredit;var e=this.boxElem.querySelector(".cbola-desktop-image-wrapper");e.style.background="url('"+this.data.Image+"') transparent no-repeat 50% 50% / cover",this.poweredByLogo=this.headerElem.querySelector(".cbola-powered-by-logo")},s.prototype.initStyles=function(){if(r.isUndefined(this.styleElem)){var e=Cbola.Styles["cbola_layer_"+this.type+".css"];this.styleElem=o.injectMainStyle(window.document,e)}},s.prototype.bindEvents=function(){e.info("DesktopFactsLayer::bindEvents"),this.container.addEventListener("mouseleave",function(){this.onCloseSlider(!0)}.bind(this),!1),this.container.addEventListener("mouseenter",function(){this.onOpenSlider(!0)}.bind(this),!1),this.boundedOnNext=this.onNext.bind(this),this.boundedOnPrev=this.onPrev.bind(this);var t=this.boxElem.querySelector(".cbola-items-button-right");t.addEventListener("click",this.boundedOnNext);var i=this.boxElem.querySelector(".cbola-items-button-left");i.addEventListener("click",this.boundedOnPrev),window.addEventListener("resize",this.onResize.bind(this)),this.poweredByLogo.addEventListener("click",function(){n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),window.open(Cbola.Config.brandRedirect_default)}.bind(this))},s.prototype.unbindEvents=function(){e.info("DesktopFactsLayer::unbindEvents"),this.boxElem.removeEventListener("mouseleave",this.onCloseSlider.bind(this),!1)},s.prototype.onBeforeLoad=function(){l.onBeforeLoad()},s.prototype.onLoad=function(){t.getMoreItems(this.elementId,this.widgetId,function(t){t.length>0?(this.attach(),this.addItems(t),a.fire(a.Events.LAYER_READY,this)):e.errorM("DesktopFactsLayer.onLoad","DesktopFactsLayer.onLoad failed, getMoreItems returned empty")}.bind(this),1)},s.prototype.attach=function(){this.isAttached||(this.isAttached=!0,this.initStyles(),this.container.appendChild(this.boxElem),this.onResize(),a.fire(a.Events.LAYER_ATTACHED+this.elementId))},s.prototype.detach=function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.boxElem),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},s.prototype.addItems=function(e){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var i=new Cbola.InContent.Layers.Item(e[n]);i.id=this.items.length;var o=this.createItemElement(i);o&&(t.appendChild(o),this.lastItemElem=o,i.elem=o,this.items[i.id]=i)}this.itemsBox.appendChild(t),this.lazyLoadNextImages(2)},s.prototype.createItemElement=function(e){var t=document.createElement("div");t.innerHTML=Cbola.Templates["facts_item_desktop.html"],t=t.children[0];var i=t.querySelector(".cbola-content-item-description"),o=t.querySelector(".cbola-content-read-more");return e.Link?o.addEventListener("click",function(){window.open(e.Link),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.ITEM_LINK,e)}.bind(this)):o.style.display="none",i.innerHTML=e.Description,t},s.prototype.lazyLoadNextImages=function(e){for(var t=this.lazyLoadIdx+e,n=this.lazyLoadIdx;n<Math.min(t,this.items.length);n++,this.lazyLoadIdx++){if("undefined"==typeof this.items[n])return;var i=this.items[n].elem,o=new Image;o.itemImageLoader=i.querySelector(".cbola-content-image-loader"),o.onload=function(){var e=this.itemImageLoader.querySelector(".cbola-content-item-picture"),t=this.itemImageLoader.querySelector(".cbola-loader");e&&(e.src=this.src,this.itemImageLoader.removeChild(t))},o.src=this.items[n].Image}},s.prototype.onOpenSlider=function(e){this.sliderOpenedAt=o.getRunTimeInSecs(),clearTimeout(this.teaserTimerId),this.toggled=!0,this.sliderElem.className="cbola-desktop-slider cbola-desktop-slider-active",this.bgTitleElem.style["transition-delay"]=null,this.bgTitleElem.style.opacity=0,this.bgCreditElem.style["transition-delay"]=null,this.bgCreditElem.style.opacity=0,e&&(n.SetPageElementView(this.elementId,Cbola.Enums.ItemViewTypes.ON_HOVER,Cbola.Enums.ItemViewTypes.NONE),this.setItemsViewability(!0,Cbola.Enums.ItemViewTypes.ON_HOVER),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[])},s.prototype.onCloseSlider=function(e){this.sliderDuration=o.getRunTimeInSecs()-this.sliderOpenedAt,clearTimeout(this.teaserTimerId),this.toggled=!1,this.sliderElem.className="cbola-desktop-slider",this.bgTitleElem.style["transition-delay"]="250ms",this.bgTitleElem.style.opacity=1,this.bgCreditElem.style["transition-delay"]="250ms",this.bgCreditElem.style.opacity=1,e&&(this.setItemsViewability(!1,Cbola.Enums.ItemViewTypes.ON_HOVER),n.SetPageElementView(this.elementId,Cbola.Enums.ItemViewTypes.NONE,Cbola.Enums.ItemViewTypes.ON_HOVER,this.sliderDuration),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[])},s.prototype.onNext=function(e){var t=e.currentTarget;t.removeEventListener("click",this.boundedOnNext),i.addItemsToHistory([this.items[this.currItemIdx].Id]);var o=Math.min(this.items.length-1,this.currItemIdx+1),r=this.items[this.currItemIdx].elem;this.currItemIdx!==o?(r.style.transform="translateX(-1100px)",this.setItemsViewability(!1,Cbola.Enums.ItemViewTypes.ON_NEXT_BTN),this.currItemIdx=o,r=this.items[this.currItemIdx].elem,r.style.transform="translateX(0)",this.setItemsViewability(!0,Cbola.Enums.ItemViewTypes.ON_NEXT_BTN),this.currItemIdx+3>this.items.length&&this.fetchMoreFromServer(),this.currItemIdx+2>this.lazyLoadIdx&&this.lazyLoadNextImages(2),this.updateProgressElem(this.currItemIdx%15),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[]):(r.style.transform="translateX(-20%)",setTimeout(function(){r.style.transform="translateX(0)"},600)),setTimeout(function(){t.addEventListener("click",this.boundedOnNext)}.bind(this),600)},s.prototype.updateProgressElem=function(e){this.progressElem.textContent=e+1+"/15"},s.prototype.fetchMoreFromServer=function(){t.getMoreItems(this.elementId,this.widgetId,function(e){this.addItems(e)}.bind(this))},s.prototype.onPrev=function(e){var t=e.currentTarget;t.removeEventListener("click",this.boundedOnPrev);var i=Math.max(0,this.currItemIdx-1),o=this.items[this.currItemIdx].elem;i!==this.currItemIdx?(o.style.transform="translateX(1100px)",this.setItemsViewability(!1,Cbola.Enums.ItemViewTypes.ON_PREV_BTN),this.currItemIdx=i,o=this.items[this.currItemIdx].elem,o.style.transform="translateX(0)",this.setItemsViewability(!0,Cbola.Enums.ItemViewTypes.ON_PREV_BTN),this.updateProgressElem(this.currItemIdx%15),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[]):(o.style.transform="translateX(20%)",setTimeout(function(){o.style.transform="translateX(0)"},400)),setTimeout(function(){t.addEventListener("click",this.boundedOnPrev)}.bind(this),600)},s.prototype.onResize=function(){var e=this.boxElem.clientWidth;e>=580?this.itemsBox.className="cbola-items-box cbola-items-box-large":e>=490?this.itemsBox.className="cbola-items-box cbola-items-box-medium":this.itemsBox.className="cbola-items-box cbola-items-box-small",this.options.RemoveInContentHeader&&(e>=560?this.poweredByLogo.classList.remove("cbola-hidden"):this.poweredByLogo.classList.add("cbola-hidden")),setTimeout(this.fixHeaderStyles.bind(this),100)},s.prototype.fixHeaderStyles=function(){if(!this.options.RemoveInContentHeader){var e=this.container.querySelector(".cbola-desktop-facts-header"),t=e.children[0],n=e.children[2],i=e.children[1],o=e.clientWidth-(n.clientWidth+t.clientWidth+6);i.style.width=o+"px"}},s.prototype.onAfterLoad=function(){Cbola.taskManager.addTask(this.updateViewability,[],this),this.options.teaser&&this.options.teaser.Triggers&&this.options.teaser.Triggers[0]===Cbola.Enums.teaserTriggerTypes.TIMEOUT&&this.setTeaser()},s.prototype.onBecameViewable=function(e){l.onBecameViewable.apply(this),this.becameViewableOnce||(this.setItemsViewability(!0,void 0,e),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[],this.becameViewableOnce=!0,this.options.teaser&&this.options.teaser.Triggers&&this.options.teaser.Triggers[0]===Cbola.Enums.teaserTriggerTypes.VIEWABILITY&&this.setTeaser())},s.prototype.setTeaser=function(){var e=this.options.teaser.Delay>0?this.options.teaser.Delay:0,t=this.options.teaser.Duration||10;1===this.options.teaser.TeaserType&&(this.teaserTimerId=setTimeout(function(){this.onOpenSlider(!1),this.teaserTimerId=setTimeout(this.onCloseSlider.bind(this),1e3*t,!1)}.bind(this),1e3*e))},s.prototype.onBecameUnviewable=function(){l.onBecameUnviewable.apply(this),this.becameUnviewableOnce||(this.setItemsViewability(!0,void 0,Cbola.Enums.ItemViewTypes.UNVIEWABILITY),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[],this.becameUnviewableOnce=!0)},s.prototype.setItemsViewability=function(e,t,n){var i=n?n:e?t:Cbola.Enums.ItemViewTypes.NONE,o=n?Cbola.Enums.ItemViewTypes.NONE:e?Cbola.Enums.ItemViewTypes.NONE:t,r=this.items[this.currItemIdx];r&&(r.setViewable(e),r.isViewable&&!n&&(t===Cbola.Enums.ItemViewTypes.ON_HOVER?r.setViewOrder(this.itemsViewOrder):r.setViewOrder(++this.itemsViewOrder)),r.setOpenType(i),r.setCloseType(o),r.setDisplayOrder(this.currItemIdx+1),this.itemsToReport.push(r))},s}(),Cbola.Styles["cbola_layer_140.css"]='.cbola-sb-trivia *{box-sizing:border-box;font-size:1em;margin:0;padding:0;user-select:none;-webkit-user-select:none}.cbola-sb-trivia{background-color:#fff;overflow:hidden;position:relative;border:1px solid rgba(171,171,171,.5);box-sizing:border-box}.cbola-sb-trivia__body{height:calc(100% - 25px);width:100%;overflow:hidden}.cbola-sb-trivia__title{font-family:Oswald!important;font-weight:700;color:#3ed1d9;font-size:28px!important;text-align:center;line-height:34px;padding:0 1% 22px;opacity:1;margin-top:5px!important;margin-right:0;margin-bottom:22px;margin-left:0;transition:opacity .6s ease}.cbola-sb-trivia__powered-by{background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -1px -62px no-repeat;width:122px;height:13px;position:relative;margin-left:auto;margin-right:auto;opacity:.3}.cbola-sb-trivia__powered-by:hover{cursor:pointer;opacity:.8}.cbola-sb-trivia__score-board{width:100%;background-color:#3ed1d9;height:50px;color:#fff;font-family:Oswald!important;text-align:center!important;font-weight:400!important;position:relative;margin-bottom:25px}.cbola-sb-trivia__content-wrapper{height:100%;float:right;width:55%;min-width:340px;text-align:center;position:relative}.cbola-sb-trivia__alt,.cbola-sb-trivia__fb,.cbola-sb-trivia__tw{z-index:10;font-size:17px;color:#fff;background-color:transparent;border-radius:100px;padding:3px 0 0 4px;width:28px;height:28px;text-align:center!important;line-height:0!important;opacity:1;border-spacing:initial;cursor:pointer;display:inline-block;transition:all 275ms 0s ease,background-color 275ms 0s ease,opacity 0s 0s ease}.cbola-sb-trivia__share .cbola-sb-trivia__alt,.cbola-sb-trivia__share .cbola-sb-trivia__fb,.cbola-sb-trivia__share .cbola-sb-trivia__tw{position:absolute;top:0;left:0;border:2px solid #fff;z-index:10}.cbola-sb-trivia__alt{padding:3px 0 0!important}.cbola-sb-trivia__share{width:28px;height:28px;opacity:1;transition:opacity .6s ease;display:inline-block;float:right;position:relative;top:12px;right:38px}.cbola-sb-trivia:hover .cbola-sb-trivia__share .cbola-sb-trivia__alt,.cbola-sb-trivia__share .cbola-sb-trivia__fb,.cbola-sb-trivia__share .cbola-sb-trivia__tw{opacity:0}.cbola-sb-trivia:hover .cbola-sb-trivia__share .cbola-sb-trivia__fb{opacity:1;transform:translateX(65%)}.cbola-sb-trivia:hover .cbola-sb-trivia__share .cbola-sb-trivia__tw{opacity:1;transform:translateX(-65%)}.cbola-sb-trivia__fb:hover{opacity:1!important;background-color:#3b5998!important;color:#fff!important}.cbola-sb-trivia__tw:hover{opacity:1!important;background-color:#3cf!important;color:#fff!important}.cbola-sb-trivia__item-image-wrapper{min-height:32px;width:100px;height:100px;z-index:4;border-radius:50%;border:4px solid #fff;box-shadow:0 0 1px #fff;overflow:hidden;background-color:transparent;position:absolute;margin:0 auto;left:0;right:0;top:-50%}.cbola-sb-trivia__progress{margin-top:10px}.cbola-sb-trivia__progress-text{font-size:16px!important;width:100%;line-height:14px;text-shadow:none!important}.cbola-sb-trivia__score-text{font-size:16px!important;width:100%;line-height:28px;text-shadow:none!important;margin-right:5px}.cbola-sb-trivia__progress-count,.cbola-sb-trivia__score-count{font-size:24px!important;line-height:18px}.cbola-sb-trivia__score-count{position:relative;top:4px}.cbola-sb-trivia__score{display:inline-block;float:left;position:relative;top:11px;left:24px}.cbola-sb-trivia__item-desc-wrapper{overflow:hidden;position:relative;width:100%;height:65px;opacity:1;transition:opacity .6s ease}.cbola-sb-trivia__btn-group{width:100%;z-index:10;text-align:center!important;bottom:10px;font-family:Oswald!important;font-weight:500;font-size:18px!important;text-transform:uppercase;opacity:1;transition:opacity .6s ease}.cbola-sb-trivia__btn{display:inline-block;color:#3ed1d9;cursor:pointer;overflow:visible;width:110px;box-shadow:1px 1px 1px 1px #b6b6b6;border-radius:6px;text-align:center;padding:3px}.cbola-sb-trivia__btn>span{font-family:Oswald,sans-serif!important}.cbola-sb-trivia__btn:hover{color:#38b9c1}.cbola-sb-trivia__btn:hover i{color:#38b9c1;border:2px solid #38b9c1}.cbola-sb-trivia__btn i{display:inline-block;width:40px;height:40px;padding-top:6px;border-radius:29px;border:2px solid #3ed1d9;font-size:25px;position:relative;background-color:#fff;color:#3ed1d9;cursor:pointer;text-align:center;transition:all .08s ease;margin:0 8px}.cbola-sb-trivia__item-desc,.cbola-sb-trivia__item-image{transition:transform .55s ease;position:absolute;width:100%}.cbola-sb-trivia-btn__option-one{margin-right:10px}.cbola-sb-trivia-btn--disabled{pointer-events:none}.cbola-sb-trivia__footer{height:25px;overflow:visible;left:0;padding:5px 24px}.cbola-sb-trivia__pager-item:first-child{margin-left:0!important}div[layertype="140"] .cbola-sb-trivia__pager{position:relative;top:10px;text-align:center;width:100%;cursor:default;margin-top:0;margin-bottom:0}.cbola-sb-trivia__pager-item{width:19px;height:19px;border:1px solid transparent;background-color:#fff;margin-left:9px;text-align:center!important;border-radius:20px;font-size:12px!important;padding:1px;font-family:"Open sans"!important;line-height:15px;display:inline-block;color:#000;font-weight:400!important}.cbola-sb-trivia__pager-item--active{background-color:#bababa!important;color:#000!important}.cbola-sb-trivia__item-desc{padding:0!important;text-align:center;vertical-align:middle;background-color:transparent!important;border:none!important;line-height:19px!important;white-space:normal;font-family:"Open Sans";font-weight:600!important;font-size:15px;letter-spacing:0;color:#8e8989}.cbola-sb-trivia__item-desc--prev{transform:translateX(-100%)}.cbola-sb-trivia__item-desc--active{transform:translateX(0)}.cbola-sb-trivia__item-desc--next{transform:translateX(100%)}.cbola-sb-trivia__item-image{height:100%;transform:translateX(100%)}.cbola-sb-trivia__item-image.cbola-sb-trivia__item-image--prev{transform:translateX(-100%)}.cbola-sb-trivia__item-image.cbola-sb-trivia__item-image--active{transform:translateX(0)}.cbola-sb-trivia__btn.cbola-sb-trivia__btn--correct,.cbola-sb-trivia__btn.cbola-sb-trivia__btn--wrong{pointer-events:none}.cbola-sb-trivia__btn.cbola-sb-trivia__btn--correct span{color:#98de9f}.cbola-sb-trivia__btn.cbola-sb-trivia__btn--correct i{background-color:#98de9f;border-color:#98de9f;color:#fff!important}.cbola-sb-trivia__btn.cbola-sb-trivia__btn--wrong span{color:#fd7368}.cbola-sb-trivia__btn.cbola-sb-trivia__btn--wrong i{background-color:#fd7368;border-color:#fd7368;color:#fff}.cbola-sb-trivia__btn--correct:hover,.cbola-sb-trivia__btn--wrong:hover{color:#fff}.cbola-sb-trivia__pager-item--temp-correct{background-color:#98de9f!important;border-color:#13bd00!important}.cbola-sb-trivia__pager-item--correct{border-color:#98de9f}.cbola-sb-trivia__pager-item--temp-wrong{background-color:#fd7368!important}.cbola-sb-trivia__pager-item--wrong{border-color:#fd7368}.cbola-sb-trivia-game-ended{position:absolute;width:100%;line-height:normal;height:100%;transform:translateY(-120%);font-family:oswald!important;transition:all .6s ease;z-index:15;padding:10px}.cbola-sb-trivia-game-ended__challange,.cbola-sb-trivia-game-ended__score,.cbola-sb-trivia-game-ended__text,.cbola-sb-trivia-game-ended__your-friends{font-weight:700;font-family:inherit;text-align:center!important}.cbola-sb-trivia-game-ended__wrapper{height:194px;background-color:#eeeced;border-radius:14px;text-align:center!important;margin-bottom:10px;padding-top:8px}.cbola-sb-trivia-game-ended.cbola-sb-trivia-game-ended--active{transform:translateY(0);color:#8f8f8f!important;pointer-events:auto}.cbola-sb-trivia-game-ended__text{font-size:24px;color:#8f8f8f}.cbola-sb-trivia-game-ended__score{margin-top:-10px;font-size:40px;color:#3ed1d9}.cbola-sb-trivia-game-ended__challange{font-size:24px;margin-top:4px;letter-spacing:0;text-transform:uppercase}.cbola-sb-trivia-game-ended__your-friends{font-size:16px;margin-top:-6px;text-transform:uppercase;letter-spacing:1.1pt;margin-left:3px}.cbola-sb-trivia-game-ended__share .cbola-sb-trivia__fb,.cbola-sb-trivia-game-ended__share .cbola-sb-trivia__tw{color:#fff;background-color:#bababa;width:26px;border-radius:18px;height:26px;margin-left:1px!important;margin-top:4px;font-size:19px;cursor:pointer;margin-right:0!important;padding-top:4px;padding-right:1px}.cbola-sb-trivia__next-game,.cbola-sb-trivia__next-game-bottom-image{background-color:#eeeced;padding:14px 0 0;opacity:1;z-index:10;transition:opacity .55s ease;height:110px;border-radius:14px;position:relative}.cbola-sb-trivia__next-game-bottom-image{display:none}.cbola-sb-trivia__next-game__pull-right{float:right;height:100%;width:200px;padding:0 6px;text-align:center}.cbola-sb-trivia__next-game-image{min-height:32px;width:64px;position:absolute;z-index:4;top:12px;border-radius:200px;overflow:hidden;left:9px;border:2px solid #fff;background:0 0!important;max-width:none!important;height:auto!important}.cbola-sb-trivia__next-game-title{color:#8f8f8f;font-size:18px;font-weight:500;line-height:21px;font-family:Oswald}.cbola-sb-trivia__start-btn{font-size:16px;color:#fff;background-color:#3ed1d9;width:80px;padding:3px;border-radius:6px;font-weight:400;font-family:Oswald;cursor:pointer;text-align:center!important;display:inline-block;margin-top:10px}.cbola-sb-trivia__start-btn:hover{background-color:#38b9c1}.cbola-sb-trivia__powered-by.cbola-sb-trivia__powered-by-promoted{opacity:.8!important;width:100%!important}.cbola-sb-trivia__powered-by.cbola-sb-trivia__powered-by-promoted:hover{opacity:1!important}.cbola-sb-trivia__item-ad-wrapper{width:100%;height:325px;position:absolute;top:0;left:0;transform:translateX(120%);transition:transform .6s ease;overflow:hidden;z-index:100;background-color:transparent;opacity:0}.cbola-sb-trivia__item-ad-wrapper-active{transform:translateX(0);opacity:1}.cbola-sb-trivia__item-ad{position:relative;background-color:rgba(255,255,255,.9);height:250px;width:100%}.cbola-sb-trivia__banner{background-color:transparent;width:100%;height:100%;z-index:10;position:relative}.cbola-sb-trivia__item-ad .cbola-loader{z-index:1}.cbola-sb-trivia__close-ad{width:240px;height:32px;background-color:#fff;border-radius:6px;color:#3ed1d9;cursor:pointer;font-family:Oswald!important;text-transform:uppercase;font-size:1em;line-height:2em;box-shadow:1px 1px 1px 1px #b6b6b6;margin:8px auto 0;text-align:center}.cbola-sb-trivia__close-ad:hover{color:#38b9c1}',Cbola.Styles["cbola_layer_140_theme.css"]=".cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__score-board,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__start-btn{background-color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia-game-ended__score,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__btn,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__close-ad,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__title{color:<%= InContentThemeColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__btn:hover,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__close-ad:hover{color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__start-btn:hover{background-color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia__btn:hover i{color:<%= InContentThemeHoverColor %>;border-color:<%= InContentThemeHoverColor %>}.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia-game-ended .cbola-sb-trivia-game-ended__text,.cbola-wid-<%= wid %>.cbola-elem-id-<%= elementId %>.cbola-layer .cbola-sb-trivia-game-ended.cbola-sb-trivia-game-ended--active{color:<%= SbTriviaScoreTextColor %>!important}",Cbola.Templates["sidebar_trivia_ad_item.html"]='<div class="cbola-sb-trivia__item-ad-wrapper unselectDrag">\n  <div class="cbola-sb-trivia__item-ad">\n    <div class="cbola-loader"></div>\n    <div class="cbola-sb-trivia__banner"></div>\n  </div>\n  <div class="cbola-sb-trivia__close-ad">continue to next question</div>\n</div>',Cbola.Templates["sidebar_trivia_view.html"]='    <!--Leave only this-->\n    <div class="cbola-sb-trivia unselectDrag">\n      <div class="cbola-sb-trivia-game-ended">\n        <div class="cbola-sb-trivia-game-ended__wrapper">\n          <div class="cbola-sb-trivia-game-ended__text">You Scored a Fair</div>\n          <div class="cbola-sb-trivia-game-ended__score">6/10</div>\n          <div class="cbola-sb-trivia-game-ended__challange">Challenge</div>\n          <div class="cbola-sb-trivia-game-ended__your-friends">Your Friends</div>\n          <div class="cbola-sb-trivia-game-ended__share">\n            <div class="cbola-sb-trivia__fb"><i class="cbola-fa cbola-fa-facebook"></i></div>\n            <div class="cbola-sb-trivia__tw"><i class="cbola-fa cbola-fa-twitter"></i></div>\n          </div>\n        </div>\n        <div class="cbola-sb-trivia__next-game">\n          <img class="cbola-sb-trivia__next-game-image"/>\n          <div class="cbola-sb-trivia__next-game__pull-right">\n            <div class="cbola-sb-trivia__next-game-title"></div>\n            <div class="cbola-sb-trivia__start-btn">Start</div>\n          </div>\n        </div>\n        <div class="cbola-sb-trivia__next-game-bottom-image"></div>\n      </div>\n      <div class="cbola-sb-trivia__body">\n        <div class="cbola-sb-trivia__title">Do You Know?</div>\n        <div class="cbola-sb-trivia__score-board">\n          <div class="cbola-sb-trivia__score">\n            <span class="cbola-sb-trivia__score-text">Score</span>\n            <span class="cbola-sb-trivia__score-count">1</span>\n          </div>\n          <div class="cbola-sb-trivia__item-image-wrapper">\n            <!--Here enters list of images per question-->\n          </div>\n          <div class="cbola-sb-trivia__share">\n            <div class="cbola-sb-trivia__alt"><i class="cbola-ion cbola-ion-share-alt"></i></div>\n            <div class="cbola-sb-trivia__fb"><i class="cbola-fa cbola-fa-facebook"></i></div>\n            <div class="cbola-sb-trivia__tw"><i class="cbola-fa cbola-fa-twitter"></i></div>\n          </div>\n        </div>\n        <div class="cbola-sb-trivia__item-desc-wrapper">\n          <!--Here enters the list of questions-->\n        </div>\n        <div class="cbola-sb-trivia__btn-group">\n          <div class="cbola-sb-trivia__btn cbola-sb-trivia-btn__option-one cbola-refresh-click-trigger"><span>TRUE</span></div>\n          <div class="cbola-sb-trivia__btn cbola-sb-trivia-btn__option-two cbola-refresh-click-trigger"><span>FALSE</span></div>\n        </div>\n        <ul class="cbola-sb-trivia__pager">\n          <!--Here enters list of paging questions as indices-->\n        </ul>\n      </div>\n      <div class="cbola-sb-trivia__footer">\n        <div class="cbola-sb-trivia__powered-by"></div>\n      </div>\n    </div>\n    <!--Leave only this-->\n  </div>\n</div>\n',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.TriviaUtils=function(){var e=Cbola.Common.UserService,t=function(){};return t.prototype.getGameEndedText=function(t){var n=e.vocabulary("YouScoredaRidiculous");return t>.9?n=e.vocabulary("youScoredaPerfect"):t>.8?n=e.vocabulary("YouScoredanAwesome"):t>.6?n=e.vocabulary("YouScoredaMighty"):t>.4?n=e.vocabulary("YouScoredaFair"):t>.2&&(n=e.vocabulary("YouScoredaLame")),n},t.prototype.shareOnFacebook=function(e){var t="https://www.facebook.com/dialog/feed?app_id=264749280348555&link="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e,!0))+"&picture="+encodeURIComponent(e.image)+"&name="+encodeURIComponent(e.title)+"&caption="+encodeURIComponent("Powered By Carambola")+"&description="+encodeURIComponent(e.text)+"&redirect_uri="+encodeURIComponent("https://www.facebook.com")+"&display=popup";window.open(t,"_blank","width=560,height=380")},t.prototype.shareOnTwitter=function(e){if(""===Cbola.Config.bitlyUrl){var t="https://api-ssl.bitly.com/v3/shorten?access_token=9bca2257713ece1cbe2417d579434912c24ae333&longUrl="+encodeURIComponent(Cbola.Utils.checkIfQueryStingExist(e));$cbola.get(t,function(t){Cbola.Config.bitlyUrl="undefined"==typeof t.data.url?Cbola.Utils.checkIfQueryStingExist(e,!0):t.data.url,window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.title+" "+e.text)+"&url="+encodeURIComponent(Cbola.Config.bitlyUrl),"_blank","width=560,height=380")})}else window.open("https://twitter.com/intent/tweet?text="+encodeURIComponent(e.text)+"&url="+encodeURIComponent(Cbola.Config.bitlyUrl),"_blank","width=560,height=380")},new t}(),Cbola.InContent.Layers.CommonTriviaLayer=function(){var e=Cbola.Logger.getInstance(),t=Cbola.InContent.Layers.Services.TriviaService,n=Cbola.Common.AnalyticsService,i=Cbola.InContent.Layers.TriviaUtils,o=Cbola.Common.UserService,r=Cbola.Enums.ItemViewTypes,a=Cbola._,s=t.triviaTypes.TRUE_FALSE,l=Cbola.EventBus,c=function(){this.currItemIdx=0,this.items=[],this.itemsForAnalytics=[],this.itemsViewOrder=1,this.itemsDisplayOrder=1,this.adSpots=[]},d=Cbola.InContent.Layers.Base.prototype;return a.extend(c.prototype,d),c.prototype.init=function(){d.init.call(this)},c.prototype.setOptions=function(e){this.options=e},c.prototype.onBeforeLoad=function(){e.debug("CommonTriviaLayer::onBeforeLoad"),this.boxElem=this.view.element,this.view.container=this.container,this.view.applyViewOptions(this.options),this.view.reset()},c.prototype.onLoad=function(){e.debug("CommonTriviaLayer::onLoad"),t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(e){this.game=e,this.game&&(this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.attach(this.container),l.fire(l.Events.LAYER_READY,this),this.view.addOnMouseOverEventListener(),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers))}.bind(this))},c.prototype.onAfterLoad=function(){e.debug("CommonTriviaLayer::onAfterLoad"),Cbola.taskManager.addTask(this.updateViewability,[],this);
},c.prototype.onUserAnswered=function(e,t){this.setItemsViewability(!1,e,r.ON_NEXT_BTN);var i=this.game.answerCurrentQuestion(e);this.view.setScore&&this.view.setScore(this.game.score),this.view.playFeedbackAnimation(this.game.getCurrentQuestionNumber()-2,t,i,function(){this.game.isCompleted?(this.setGameViewability(!0),this.onGameEnded()):(a.isUndefined(this.adSpots[this.game.getCurrentQuestionNumber()-1])?this.setItemsViewability(!0,0,r.ON_NEXT_BTN):(this.view.openSpot(this.game.getCurrentQuestionNumber()-1),this.setAdItemViewability(!0)),this.view.gotoQuestion(this.game.getCurrentQuestionNumber()-1,this.game.getCurrentQuestionItem().Answers),this.view.setProgress&&this.view.setProgress(this.game.getCurrentQuestionNumber()+"/10")),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]}.bind(this))},c.prototype.onCloseInItemAd=function(){this.setAdItemViewability(!1),this.setItemsViewability(!0,0,r.ON_NEXT_BTN),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]},c.prototype.onGameEnded=function(){t.getNewGame(this.elementId,this.widgetId,this.getTriviaType(),function(t){null===t&&e.warnM("CommonTriviaLayer.onGameEnded","Trivia::onGameEnded -> No new game available, doing nothing"),this.nextGame=t,this.view.setGameEndedText(i.getGameEndedText(this.game.score/this.game.items.length)),this.view.setNextGameUI(this.nextGame),this.view.toggleGameEndedAnimation(!0)}.bind(this))},c.prototype.startNextGame=function(){this.setGameViewability(!1),this.game=this.nextGame,this.view.reset(),this.nextGame=null,this.view.setTitle(this.game.title),this.view.addItems(this.game.items),this.view.gotoQuestion(0,this.game.getCurrentQuestionItem().Answers),this.view.toggleGameEndedAnimation(!1),this.setItemsViewability(!0,0,r.ON_NEXT_BTN),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[]},c.prototype.onBecameViewable=function(e){d.onBecameViewable.call(this),a.isNil(this.game)||(this.game.hasEnded()?this.setGameViewability(!0):this.setLayerViewability(!0,e),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[])},c.prototype.onBecameUnviewable=function(){d.onBecameUnviewable.call(this),a.isNil(this.game)||(this.game.hasEnded()?this.setGameViewability(!1):this.setLayerViewability(!1),n.SetItemsView(this.elementId,this.itemsForAnalytics),this.itemsForAnalytics=[])},c.prototype.onMouseEnter=function(){n.SetPageElementView(this.elementId,Cbola.Enums.ItemViewTypes.ON_HOVER,Cbola.Enums.ItemViewTypes.NONE)},c.prototype.onShareInGame=function(e){var t,o;t=this.game.getCurrentQuestionItem(),o={text:t.Description,title:t.ChartTitle||this.game.shortTitle,image:0!==t.Image.indexOf("http")?"https:"+t.Image:t.Image,ParentId:t.ParentId},2===t.Answers.length&&(o.text+=". "+t.Answers[0].Title+" or "+t.Answers[1].Title),this.isFacebookShare(e)?(i.shareOnFacebook(o),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_FACEBOOK,t)):this.isTwitterShare(e)&&(i.shareOnTwitter(o),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_BEFORE_TWITTER,t))},c.prototype.onShareEndGame=function(e){var t,r;r=this.game.getQuestionItem(this.game.items.length-1),t={text:o.vocabulary("canYouBeatThat"),title:o.vocabulary("iScored")+" "+this.game.score+"/10 "+o.vocabulary("playingIn")+' "'+this.game.title+'"',image:0!==r.Image.indexOf("http")?"https:"+r.Image:r.Image,ParentId:r.ParentId},this.isFacebookShare(e)?(i.shareOnFacebook(t),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_FACEBOOK,r)):this.isTwitterShare(e)&&(i.shareOnTwitter(t),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.SHARE_AFTER_TWITTER,r))},c.prototype.isFacebookShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__fb")>-1)return!0;e=e.parentNode}return!1},c.prototype.isTwitterShare=function(e){for(;e.parentNode&&-1===e.className.indexOf("__share");){if(e.className.indexOf("__tw")>-1)return!0;e=e.parentNode}return!1},c.prototype.onPoweredBy=function(e){var t=this.options.BrandRedirect||Cbola.Config.brandRedirect_default;n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),e&&n.SetClickTracker(e),window.open(t)},c.prototype.setLayerViewability=function(t,n){var i,o=t?n:Cbola.Enums.ItemViewTypes.UNVIEWABILITY;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setLayerViewability","CommonTriviaLayer.setLayerViewability found null game. url: "+Cbola.Env.PageProperties.hostname):i=this.game.getCurrentQuestionItem(),i&&(i.setViewable(t),i.setOpenType(o),i.setCloseType(Cbola.Enums.ItemViewTypes.NONE),this.itemsForAnalytics.push(i))},c.prototype.setItemsViewability=function(t,n,i){var o,r=t?i:Cbola.Enums.ItemViewTypes.NONE,s=t?Cbola.Enums.ItemViewTypes.NONE:i;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):o=this.game.getCurrentQuestionItem(),this.updateAndReportItemForAnalytics(o,t,r,s,n)},c.prototype.setAdItemViewability=function(e){var t=e?Cbola.Enums.ItemViewTypes.AD:Cbola.Enums.ItemViewTypes.NONE,n=e?Cbola.Enums.ItemViewTypes.NONE:Cbola.Enums.ItemViewTypes.AD,i=this.adSpots[this.game.getCurrentQuestionNumber()-1];i&&(i.Id=parseInt(this.view.getInItemAdId(this.game.getCurrentQuestionNumber()-1))),this.updateAndReportItemForAnalytics(i,e,t,n)},c.prototype.setGameViewability=function(t,n){var i,n=n||Cbola.Enums.ItemViewTypes.ENDING_SCREEN,o=t?n:Cbola.Enums.ItemViewTypes.NONE,r=t?Cbola.Enums.ItemViewTypes.NONE:n;a.isNil(this.game)?e.errorM("CommonTriviaLayer.setItemsViewability","CommonTriviaLayer.setItemsViewability found null game. url: "+Cbola.Env.PageProperties.hostname):i=this.game,this.updateAndReportItemForAnalytics(i,t,o,r)},c.prototype.updateAndReportItemForAnalytics=function(t,n,i,o,r){r=r||0,t?(t.setViewable(n),t.isViewable&&(t.setViewOrder(++this.itemsViewOrder),t.setDisplayOrder(++this.itemsDisplayOrder)),t.setUserAnswerId(r),t.setOpenType(i),t.setCloseType(o),this.itemsForAnalytics.push(t)):e.warnM("CommonTriviaLayer.updateAndReportItemForAnalytics","CommonTriviaLayer.updateAndReportItemForAnalytics failed to report empty item")},c.prototype.endGameClickTracking=function(){n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.ENDING_SCREEN_OUT)},c.prototype.getTriviaType=function(){return s},c}(),Cbola.InContent.Layers.SidebarTriviaLayer=function(){var e=Cbola._,t=Cbola.Common.AnalyticsService,n=Cbola.InContent.Layers.Services.TriviaService,i=n.triviaTypes.TRUE_FALSE,o=function(){Cbola.InContent.Layers.CommonTriviaLayer.call(this),this.view=new Cbola.InContent.Layers.SidebarTriviaView(this),this.adSpots=[]},r=Cbola.InContent.Layers.CommonTriviaLayer.prototype;return e.extend(o.prototype,r),o.prototype.getTriviaType=function(){return i},o.prototype.endGameClickTracking=function(){r.endGameClickTracking.call(this),this.options.SbTriviaEndGameClickTracker&&t.SetClickTracker(this.options.SbTriviaEndGameClickTracker)},o.prototype.injectAdAfterItem=function(e,t){if(t=Math.max(1,Math.min(t,9)),this.adSpots[t])return null;var n=new Cbola.InContent.Layers.Item({type:Cbola.InContent.Layers.Item.Types.AD,adHTML:e,adSpot:t});return n.elem=this.view.createAdItemElement(n),this.adSpots[t]=n,n.elem.querySelector(".cbola-sb-trivia__banner")},o}(),window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.SidebarTriviaView=function(){var e=Cbola._,t=Cbola.Utils,n=Cbola.Common.FontsManager(),i=Cbola.Common.UserService,o=Cbola.EventBus,r=function(e){this.ignoreUserInput=!1,this.isAttached=!1,this.presenter=e,this.element=Cbola.Templates.createElement("sidebar_trivia_view.html"),this.styleSheet=Cbola.Styles["cbola_layer_140.css"],this.lastImageIdx=0,this.uiItems=[],this.adSpots=[],this.bind()};return r.prototype.bind=function(){this.boxElem=this.element,this.buttonGroupElem=this.element.querySelector(".cbola-sb-trivia__btn-group"),this.falseBtnElem=this.element.querySelector(".cbola-sb-trivia-btn__option-two"),this.trueBtnElem=this.element.querySelector(".cbola-sb-trivia-btn__option-one"),this.pagerElem=this.element.querySelector(".cbola-sb-trivia__pager"),this.imageWrapperElem=this.element.querySelector(".cbola-sb-trivia__item-image-wrapper"),this.descWrapperElem=this.element.querySelector(".cbola-sb-trivia__item-desc-wrapper"),this.scoreElem=this.element.querySelector(".cbola-sb-trivia__score-count"),this.nextGameElem=this.element.querySelector(".cbola-sb-trivia__next-game"),this.startGameBtn=this.element.querySelector(".cbola-sb-trivia__start-btn"),this.shareInGame=this.element.querySelector(".cbola-sb-trivia__share"),this.shareEndGame=this.element.querySelector(".cbola-sb-trivia-game-ended__share"),this.titleElem=this.element.querySelector(".cbola-sb-trivia__title"),this.poweredBy=this.element.querySelector(".cbola-sb-trivia__powered-by"),this.addEventListeners()},r.prototype.addEventListeners=function(){function t(t,n){var i;return n.dataset?(i=e.camelCase(t),n.dataset[i]):n.getAttribute("data-"+t)}window.addEventListener("resize",this.onResize.bind(this)),this.trueBtnElem.addEventListener("click",function(e){var n=t("answer-id",e.currentTarget);!this.ignoreUserInput&&n&&this.presenter.onUserAnswered(parseInt(n),e.currentTarget)}.bind(this)),this.falseBtnElem.addEventListener("click",function(e){var n=t("answer-id",e.currentTarget);this.ignoreUserInput||this.presenter.onUserAnswered(parseInt(n),e.currentTarget)}.bind(this)),this.startGameBtn.addEventListener("click",function(){this.ignoreUserInput||this.presenter.startNextGame()}.bind(this)),this.shareInGame.addEventListener("click",function(e){this.ignoreUserInput||this.presenter.onShareInGame(e.target)}.bind(this)),this.shareEndGame.addEventListener("click",function(e){this.ignoreUserInput||this.presenter.onShareEndGame(e.target)}.bind(this)),this.poweredBy.addEventListener("click",function(){this.presenter.onPoweredBy(this.options.BrandClickTracker)}.bind(this))},r.prototype.addOnMouseOverEventListener=function(){this.bindedOnMouseEnter=this.onMouseEnter.bind(this),this.container.addEventListener("mouseenter",this.bindedOnMouseEnter)},r.prototype.addItems=function(e){for(var t=document.createDocumentFragment(),n=document.createDocumentFragment(),i=0;i<e.length;i++){var o=this.createItemForUI(e[i]);t.appendChild(o.imgElem),n.appendChild(o.descElem),this.uiItems.push(o)}this.imageWrapperElem.appendChild(t),this.descWrapperElem.appendChild(n)},r.prototype.createItemForUI=function(e){var t=document.createElement("div"),n=document.createElement("div"),i=document.createElement("div");return t.className="cbola-sb-trivia__item-desc cbola-sb-trivia__item-desc--next",n.className="cbola-sb-trivia__item-image cbola-sb-trivia__item-image--next",i.className="cbola-loader",n.appendChild(i),t.textContent=e.Description,{descElem:t,loaderElem:i,imgElem:n,imageUrl:e.Image}},r.prototype.setTitle=function(e){this.titleElem.textContent=e},r.prototype.applyViewOptions=function(n){this.options=n,this.options.wid=this.presenter.widgetId,this.options.elementId=this.presenter.elementId;var i=e.template(Cbola.Styles["cbola_layer_140_theme.css"]),o=i(this.options);if(t.injectStyle(document,o),this.container.style["padding-bottom"]="25px",this.container.style.width="300px",this.element.style.height=this.options.layerHeight-1+"px",n.BrandImg&&(this.poweredBy.style.background="url('"+n.BrandImg+"') no-repeat 50% 50% / contain",this.poweredBy.classList.add("cbola-sb-trivia__powered-by-promoted")),n.SbTriviaEndGameImgLink){var r=this.element.querySelector(".cbola-sb-trivia-game-ended");r.style.cursor="pointer",r.addEventListener("click",function(){this.presenter.endGameClickTracking(),window.open(n.SbTriviaEndGameImgLink)}.bind(this))}if(n.SbTriviaEndGameImgBottom){this.nextGameElem.style.display="none";var a=this.element.querySelector(".cbola-sb-trivia__next-game-bottom-image");a.style.display="block",a.style.background="url('"+n.SbTriviaEndGameImgBottom+"') no-repeat 50% 50% / contain"}if(n.SbTriviaEndGameImgTop){var s=this.element.querySelector(".cbola-sb-trivia-game-ended__wrapper");s.style.background="url('"+n.SbTriviaEndGameImgTop+"') no-repeat 50% 50% / contain"}n.SidebarTopContainerTextAlign&&(this.presenter.topContainer.style["text-align"]=n.SidebarTopContainerTextAlign)},r.prototype.attach=function(i){(e.isUndefined(i)||e.isNull(i))&&(i=this.container),n.getFontsAwesome(),n.getIonicons(),n.getOpenSans(),n.getOswald(),this.isAttached||(this.isAttached=!0,e.isUndefined(this.styleElem)&&(this.styleElem=t.injectMainStyle(window.document,this.styleSheet)),i.appendChild(this.element),this.container=i,this.onResize(),o.fire(o.Events.LAYER_ATTACHED+this.elementId))},r.prototype.detach=function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.element),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},r.prototype.reset=function(){this.uiItems=[],this.lastImageIdx=0,this.setProgress("1/10"),this.setScore("0"),this.descWrapperElem.innerHTML="",this.imageWrapperElem.innerHTML="",this.pagerElem.innerHTML="",this.initPager()},r.prototype.disableUserInput=function(e){this.ignoreUserInput=!0,setTimeout(function(){this.ignoreUserInput=!1}.bind(this),e)},r.prototype.playFeedbackAnimation=function(e,t,n,i){this.disableUserInput(1e3);var o=n?"correct":"wrong",r=t.querySelector("span");t.classList.add("cbola-sb-trivia__btn--"+o);var a=r.textContent;r.textContent=o;var s=this.pagerElem.querySelectorAll(".cbola-sb-trivia__pager-item")[e];s.classList.add("cbola-sb-trivia__pager-item--temp-"+o),setTimeout(function(e,n){t.classList.remove("cbola-sb-trivia__btn--"+n),s.classList.remove("cbola-sb-trivia__pager-item--temp-"+n),s.classList.remove("cbola-sb-trivia__pager-item--active"),s.classList.add("cbola-sb-trivia__pager-item--"+n),r.textContent=a,e&&e()}.bind(this),1e3,i,o)},r.prototype.setGameEndedText=function(e){var t=this.element.querySelector(".cbola-sb-trivia-game-ended__text");t.textContent=e},r.prototype.gotoQuestion=function(e,n){if(!this.ignoreUserInput){this.disableUserInput(550);for(var i=0;i<Math.min(e,this.uiItems.length);i++){var o=this.uiItems[i];o&&(o.descElem.className="cbola-sb-trivia__item-desc cbola-sb-trivia__item-desc--prev",o.imgElem.className="cbola-sb-trivia__item-image cbola-sb-trivia__item-image--prev")}var r=this.uiItems[e];r&&(this.trueBtnElem.querySelector("span").textContent=n[0].Title,t.dataset(this.trueBtnElem,"answer-id",n[0].Id),this.falseBtnElem.querySelector("span").textContent=n[1].Title,t.dataset(this.falseBtnElem,"answer-id",n[1].Id),r.descElem.className="cbola-sb-trivia__item-desc cbola-sb-trivia__item-desc--active",r.imgElem.className="cbola-sb-trivia__item-image cbola-sb-trivia__item-image--active");for(var i=e+1;i<this.uiItems.length;i++){var a=this.uiItems[i];a&&(a.descElem.className="cbola-sb-trivia__item-desc cbola-sb-trivia__item-desc--next",a.imgElem.className="cbola-sb-trivia__item-image cbola-sb-trivia__item-image--next")}var s=this.pagerElem.querySelectorAll(".cbola-sb-trivia__pager-item")[e];s.classList.add("cbola-sb-trivia__pager-item--active"),this.loadImagesIfNeeded(e)}},r.prototype.openSpot=function(e){var t=this.adSpots[e];this.adSpots[e]&&t.classList.add("cbola-sb-trivia__item-ad-wrapper-active")},r.prototype.initPager=function(){for(var e=document.createDocumentFragment(),t=0;10>t;t++)e.appendChild(this.createPagerItem(t+1));e.childNodes[0].className+=" cbola-sb-trivia__pager-item--active",this.pagerElem.appendChild(e)},r.prototype.createPagerItem=function(e){var t=document.createElement("div");return t.textContent=e,t.className="cbola-sb-trivia__pager-item",t},r.prototype.setProgress=function(e){},r.prototype.setScore=function(e){this.scoreElem.textContent=e},r.prototype.loadNextImages=function(e){for(var t=this.lastImageIdx+e,n=this.lastImageIdx;n<Math.min(t,this.uiItems.length);n++,this.lastImageIdx++){var i=new Image;i.itemImage=this.uiItems[n].imgElem,i.loaderElem=this.uiItems[n].loaderElem,i.onload=function(){this.itemImage.removeChild(this.loaderElem),this.itemImage.style.background='url("'+this.src+'") transparent 50% 50% / contain'},i.src=this.uiItems[n].imageUrl}},r.prototype.loadImagesIfNeeded=function(e){this.lastImageIdx+2>e&&this.loadNextImages(2)},r.prototype.toggleGameEndedAnimation=function(e){e?this.openResultBox():this.closeResultBox()},r.prototype.closeSpot=function(e){var t=this.adSpots[e];t&&(t.classList.remove("cbola-sb-trivia__item-ad-wrapper-active"),this.presenter.onCloseInItemAd())},r.prototype.setNextGameUI=function(e){if(e){var t=e.title,n=e.getCurrentQuestionItem().Image,i=this.element.querySelector(".cbola-sb-trivia__next-game-title"),o=this.element.querySelector(".cbola-sb-trivia__next-game-image");i.textContent=t,o.src=n}else{this.nextGameElem.style.display="none";var r=this.element.querySelector(".cbola-sb-trivia__next-game-bottom-image");r.style.display="block"}},r.prototype.openResultBox=function(){var e=this.element.querySelector(".cbola-sb-trivia-game-ended");e&&(this.element.querySelector(".cbola-sb-trivia-game-ended__score").textContent=this.scoreElem.textContent+"/10",e.classList.add("cbola-sb-trivia-game-ended--active"),this.titleElem.classList.add("cbola-fade-out"),this.element.querySelector(".cbola-sb-trivia__score-board").classList.add("cbola-fade-out"),this.descWrapperElem.classList.add("cbola-fade-out"),this.buttonGroupElem.classList.add("cbola-fade-out"),this.shareInGame.classList.add("cbola-fade-out"))},r.prototype.closeResultBox=function(){var e=this.element.querySelector(".cbola-sb-trivia-game-ended");e&&(e.classList.remove("cbola-sb-trivia-game-ended--active"),this.element.querySelector(".cbola-sb-trivia__score-board").classList.remove("cbola-fade-out"),this.titleElem.classList.remove("cbola-fade-out"),this.descWrapperElem.classList.remove("cbola-fade-out"),this.buttonGroupElem.classList.remove("cbola-fade-out"),this.shareInGame.classList.remove("cbola-fade-out"))},r.prototype.onResize=function(){this.element.clientWidth},r.prototype.onMouseEnter=function(){this.container.removeEventListener("mouseenter",this.bindedOnMouseEnter),this.presenter.onMouseEnter()},r.prototype.createAdItemElement=function(e){var t=Cbola.Templates.createElement("sidebar_trivia_ad_item.html"),n=t.querySelector(".cbola-sb-trivia__banner"),o=t.querySelector(".cbola-sb-trivia__close-ad");return o.textContent=i.vocabulary("skipAd"),o.addEventListener("click",function(){this.closeSpot(e.adSpot)}.bind(this)),n.innerHTML=e.adHTML,t.id="cbola-sb-trivia__item-ad-wrapper_"+this.presenter.elementId+"_"+e.adSpot,t.itemObj=e,this.adSpots[e.adSpot]=t,this.boxElem.appendChild(t),t},r.prototype.getInItemAdId=function(e){if(this.adSpots[e]){var n=this.adSpots[e].querySelector(".cbola-sb-trivia__banner");if(n)return t.dataset(n,"cbolaTagId")}return 0},r}(),Cbola.Styles["cbola_layer_101.css"]='.cbola-desktop-facts,.cbola-desktop-facts *{box-sizing:border-box}.cbola-desktop-facts{width:100%;overflow:hidden;font-family:\'Open Sans\'!important}.cbola-desktop-facts-header{height:20px}.cbola-desktop-content-wrapper{height:250px;position:relative}.cbola-horizontal-line,.cbola-top-title{float:left}.cbola-horizontal-line{position:relative;top:51%;height:1px;border-top:1px solid rgba(226,226,226,.7);margin-left:3px;width:415px}.cbola-desktop-facts-progress{position:absolute;right:9%;top:10px;color:#909090!important;cursor:default;font-weight:600!important;font-family:"Open Sans"!important;font-size:16px;z-index:0;line-height:normal}.cbola-powered-by-logo{float:right;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -1px -62px no-repeat;width:122px;height:13px;margin-top:2px;cursor:pointer}.cbola-powered-by-logo_inner{float:none;position:absolute;bottom:3px;left:5px;height:13px!important}.cbola-top-title{color:#909090;font-size:15px;font-weight:600!important;position:relative;z-index:1;text-align:left;cursor:default}.cbola-desktop-content-wrapper>div{height:100%;transform-origin:left top;zoom:1}.cbola-desktop-image-wrapper{position:relative;transform:translate3d(1px,0 ,0)}.cbola-desktop-image-credit,.cbola-desktop-image-title{color:#fff;position:absolute;transition:opacity .6s ease;opacity:1}.cbola-desktop-image-title{bottom:50px;left:5px;margin:0!important;border:none!important;box-shadow:0 0 0!important;text-shadow:0 0 0 transparent!important;white-space:pre-wrap}.cbola-desktop-image-title span{background-color:#000;box-shadow:5px 0 0 #000,-5px 0 0 #000;color:#fff;font-size:19px!important;font-weight:700!important;letter-spacing:0!important;line-height:1.4!important;text-transform:none!important;font-style:normal!important;border:none!important;white-space:pre-wrap;transition:opacity .6s ease;font-family:\'Open Sans\'}.cbola-desktop-image-credit{bottom:0;left:0;font-size:10px;font-weight:400;background-color:#000;padding-left:3px;padding-right:3px;line-height:initial}.cbola-desktop-slider{-webkit-font-smoothing:antialiased;width:100%;height:110%!important;top:-1px;left:-1px;position:absolute;transform:translate3d(-100%,0,0);background-color:rgba(255,255,255,.9);transition:transform .6s ease}.cbola-desktop-slider-active{transform:translate3d(0,0,0);left:0}.cbola-desktop-slider-hint{z-index:5!important;cursor:pointer!important;opacity:1;position:absolute;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -125px -2px no-repeat;width:31px;height:98px;right:0;transform:translateX(100%);top:14%}.cbola-desktop-slider-inner{position:relative;height:90.90909090909091%}.cbola-items-box,.cbola-slider-ad-placeholder{height:100%}.cbola-items-box{float:left;width:calc(100% - 300px);min-width:140px;position:relative;overflow:hidden}.cbola-items-button-wrapper{position:absolute;cursor:pointer;z-index:10;transform:translate3d(0,0,0) rotate(360.001deg);opacity:1}.cbola-items-button-wrapper:hover{opacity:.8}.cbola-items-button-left{transform:translate3d(0,0,0) rotate(180deg);left:9%}.cbola-items-button-right{right:9%}.cbola-items-button{width:24px!important;height:44px!important;background:url(\'<%= clientPath %>css/assets/cbolaSprite.png\') -26px -1px no-repeat}.cbola-content-item-wrapper{height:100%;position:absolute;width:100%;transform:translateX(0);transition:transform .6s cubic-bezier(.415,.21,.065,.945)}.cbola-items-box>.cbola-content-item-wrapper~.cbola-content-item-wrapper{transform:translateX(1100px)}.cbola-content-item-structure{position:absolute;top:15%;left:10%;width:80%;z-index:1}.cbola-content-image-loader{margin:0 auto;position:relative}.cbola-items-box-large .cbola-content-image-loader{width:110px;height:110px}.cbola-items-box-medium .cbola-content-image-loader{width:90px;height:90px}.cbola-items-box-small .cbola-content-image-loader{width:70px;height:70px}.cbola-content-item-picture{width:100%!important;height:100%!important;border-radius:50%;position:relative}.cbola-content-items-container{padding-top:17px;padding-left:0;padding-right:0;font-size:13px!important;font-weight:400;color:#000;text-align:center;line-height:19px;cursor:default}.cbola-content-items-container:before{content:\' \';height:100%;display:inline-block;margin-left:-.25em;vertical-align:middle}.cbola-items-box-small .cbola-content-items-container{font-size:11px!important;line-height:16px}.cbola-content-read-more{text-decoration:none;position:absolute;bottom:10px;left:50%;transform:translateX(-50%);background-color:#2a5d82;color:#fff;padding:2px;font-size:15px;width:125px;text-align:center;border-radius:5px;font-weight:600;box-shadow:0 3px 0 #1f4866;opacity:1;cursor:pointer}.cbola-content-read-more:hover{opacity:.75}.cbola-slider-ad-placeholder{width:300px;height:100%;float:right;box-shadow:inset 3px 0 0 0 rgba(255,255,255,1);position:relative;top:1px}.cbola-ua-ie .cbola-desktop-slider{transform:none;transition:left .6s ease;left:-100%}.cbola-ua-ie .cbola-desktop-slider-active{transform:none;left:0}div[layertype="101"] .cbola-desktop-image-title{bottom:20px}div[layertype="101"] .cbola-desktop-facts-progress{right:initial;left:9%;color:#2a5d82!important;font-weight:700!important}div[layertype="101"] .cbola-items-box-large .cbola-items-button-wrapper,div[layertype="101"] .cbola-items-box-medium .cbola-items-button-wrapper,div[layertype="101"] .cbola-items-box-small .cbola-items-button-wrapper{top:16%}div[layertype="101"] .cbola-items-box-small .cbola-items-button-right{right:7%;transform:scale(.9)}div[layertype="101"] .cbola-items-box-small .cbola-items-button-left{left:7%;transform:scale(.9) rotate(180deg)}div[layertype="101"] .cbola-content-item-structure{top:5%;width:84%;left:8%}div[layertype="101"] .cbola-items-box-small .cbola-content-item-structure{top:10%}div[layertype="101"] .cbola-items-box-medium .cbola-content-items-container{padding-top:15px;font-size:12px!important}',Cbola.Templates["facts_desktop.html"]='<div class="cbola-desktop-facts">\n  <div class="cbola-desktop-facts-header cbola-clearfix">\n    <div class="cbola-top-title unselectDrag">Did You Know?</div>\n    <div class="cbola-horizontal-line"></div>\n    <div class="cbola-powered-by-logo"></div>\n  </div>\n  <div class="cbola-desktop-content-wrapper">\n    <div class="cbola-desktop-image-wrapper">\n      <h2 class="cbola-desktop-image-title"><span>Amazing Celebrity Secrets Revealed</span></h2>\n      <div class="cbola-desktop-image-credit">Someone</div>\n    </div>\n    <div class="cbola-desktop-slider">\n      <div class="cbola-desktop-slider-inner">\n        <div class="cbola-items-box unselectDrag">\n          <div class="cbola-desktop-facts-progress unselectDrag"></div>\n          <div class="cbola-items-button-wrapper cbola-refresh-click-trigger cbola-items-button-left unselectDrag">\n            <div class="cbola-items-button"></div>\n          </div>\n          <div class="cbola-items-button-wrapper cbola-refresh-click-trigger cbola-items-button-right unselectDrag">\n            <div class="cbola-items-button"></div>\n          </div>\n        </div>\n        <div class="cbola-slider-ad-placeholder unselectDrag"></div>\n      </div>\n      <div class="cbola-desktop-slider-hint unselectDrag"></div>\n    </div>\n  </div>\n</div>',Cbola.Templates["facts_item_desktop.html"]='<div class="cbola-content-item-wrapper">\n  <div class="cbola-content-item-structure unselectDrag">\n    <div class="cbola-content-image-loader">\n      <div class="cbola-loader"></div>\n      <img class="cbola-content-item-picture" draggable="false"/>\n    </div>\n    <div class="cbola-content-items-container">\n      <span class="cbola-content-item-description"></span>\n    </div>\n  </div>\n  <div class="cbola-content-read-more">Read More</div>\n</div>',window.Cbola=window.Cbola||{},Cbola.InContent=Cbola.InContent||{},Cbola.InContent.Layers=Cbola.InContent.Layers||{},Cbola.InContent.Layers.DesktopFactsLayer=function(){"use strict";var e=Cbola.Logger.getInstance(),t=Cbola.InContent.Layers.Services.FactsService,n=Cbola.Common.AnalyticsService,i=Cbola.Common.UserService,o=Cbola.Utils,r=Cbola._,a=Cbola.EventBus,s=function(){e.info("DesktopFactsLayer::ctor"),this.items=[],this.currItemIdx=0,this.lazyLoadIdx=0,this.toggled=!1,this.itemsToReport=[],this.itemsViewOrder=1,this.becameViewableOnce=!1,this.becameUnviewableOnce=!1,this.sliderOpenedAt=0,this.sliderViewDuration=0,this.isAttached=!1},l=Cbola.InContent.Layers.Base.prototype;return r.extend(s.prototype,l),s.prototype.setOptions=function(e){l.setOptions.call(this,e),this.options.teaser=r.result(this.data,"DefaultSettings.Teasers",[]).shift()},s.prototype.applyOptions=function(){l.applyOptions.call(this),this.options.InContentTitleBGColor&&(this.bgTitleElem.style["background-color"]=this.options.InContentTitleBGColor,this.bgTitleElem.style["box-shadow"]="5px 0 0 "+this.options.InContentTitleBGColor+", -5px 0 0 "+this.options.InContentTitleBGColor),this.options.InContentTitleFontColor&&(this.bgTitleElem.style.color=this.options.InContentTitleFontColor),this.options.WidgetTitleFontColor&&(this.titleElem.style.color=this.options.WidgetTitleFontColor),this.options.DesktopInContentMinWidth&&(this.container.style["min-width"]=this.options.DesktopInContentMinWidth+"px"),this.options.RemoveInContentHeader&&(this.headerElem.style.display="none",this.bgCreditElem.style.display="none",this.contentWrapper.appendChild(this.poweredByLogo),this.poweredByLogo.classList.add("cbola-powered-by-logo_inner"))},s.prototype.init=function(){e.info("DesktopFactsLayer::init"),l.init.call(this),this.elemProps.container=this.container,Cbola.Common.FontsManager().getOpenSans(),Cbola.Common.FontsManager().getNunito(),this.buildElement(),this.initStyles(),this.applyOptions(),this.bindEvents()},s.prototype.buildElement=function(){this.boxElem=Cbola.Templates.createElement("facts_desktop.html"),this.contentWrapper=this.boxElem.querySelector(".cbola-desktop-content-wrapper"),this.itemsBox=this.boxElem.querySelector(".cbola-items-box"),this.sliderElem=this.boxElem.querySelector(".cbola-desktop-slider"),this.progressElem=this.boxElem.querySelector(".cbola-desktop-facts-progress"),this.progressElem.textContent="1/15",this.headerElem=this.boxElem.querySelector(".cbola-desktop-facts-header"),this.titleElem=this.headerElem.children[0],this.titleElem.textContent=this.data.WidgetTitle,this.bgTitleElem=this.boxElem.querySelector(".cbola-desktop-image-title span"),this.bgTitleElem.textContent=this.data.Title,this.bgCreditElem=this.boxElem.querySelector(".cbola-desktop-image-credit"),this.bgCreditElem.textContent=this.data.ImageCredit;var e=this.boxElem.querySelector(".cbola-desktop-image-wrapper");e.style.background="url('"+this.data.Image+"') transparent no-repeat 50% 50% / cover",this.poweredByLogo=this.headerElem.querySelector(".cbola-powered-by-logo")},s.prototype.initStyles=function(){if(r.isUndefined(this.styleElem)){var e=Cbola.Styles["cbola_layer_"+this.type+".css"];this.styleElem=o.injectMainStyle(window.document,e)}},s.prototype.bindEvents=function(){e.info("DesktopFactsLayer::bindEvents"),this.container.addEventListener("mouseleave",function(){this.onCloseSlider(!0)}.bind(this),!1),this.container.addEventListener("mouseenter",function(){this.onOpenSlider(!0)}.bind(this),!1),this.boundedOnNext=this.onNext.bind(this),this.boundedOnPrev=this.onPrev.bind(this);var t=this.boxElem.querySelector(".cbola-items-button-right");t.addEventListener("click",this.boundedOnNext);var i=this.boxElem.querySelector(".cbola-items-button-left");i.addEventListener("click",this.boundedOnPrev),window.addEventListener("resize",this.onResize.bind(this)),this.poweredByLogo.addEventListener("click",function(){n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.CARAMBOLA_ICON),window.open(Cbola.Config.brandRedirect_default)}.bind(this))},s.prototype.unbindEvents=function(){e.info("DesktopFactsLayer::unbindEvents"),this.boxElem.removeEventListener("mouseleave",this.onCloseSlider.bind(this),!1)},s.prototype.onBeforeLoad=function(){l.onBeforeLoad()},s.prototype.onLoad=function(){t.getMoreItems(this.elementId,this.widgetId,function(t){t.length>0?(this.attach(),this.addItems(t),a.fire(a.Events.LAYER_READY,this)):e.errorM("DesktopFactsLayer.onLoad","DesktopFactsLayer.onLoad failed, getMoreItems returned empty")}.bind(this),1)},s.prototype.attach=function(){this.isAttached||(this.isAttached=!0,this.initStyles(),this.container.appendChild(this.boxElem),this.onResize(),a.fire(a.Events.LAYER_ATTACHED+this.elementId))},s.prototype.detach=function(){this.isAttached&&(this.isAttached=!1,this.container.removeChild(this.boxElem),window.document.head.removeChild(this.styleElem),this.styleElem=void 0)},s.prototype.addItems=function(e){for(var t=document.createDocumentFragment(),n=0;n<e.length;n++){var i=new Cbola.InContent.Layers.Item(e[n]);i.id=this.items.length;var o=this.createItemElement(i);o&&(t.appendChild(o),this.lastItemElem=o,i.elem=o,this.items[i.id]=i)}this.itemsBox.appendChild(t),this.lazyLoadNextImages(2)},s.prototype.createItemElement=function(e){var t=document.createElement("div");t.innerHTML=Cbola.Templates["facts_item_desktop.html"],t=t.children[0];var i=t.querySelector(".cbola-content-item-description"),o=t.querySelector(".cbola-content-read-more");
return e.Link?o.addEventListener("click",function(){window.open(e.Link),n.SetClick(this.elementId,Cbola.Enums.SetClickTypes.ITEM_LINK,e)}.bind(this)):o.style.display="none",i.innerHTML=e.Description,t},s.prototype.lazyLoadNextImages=function(e){for(var t=this.lazyLoadIdx+e,n=this.lazyLoadIdx;n<Math.min(t,this.items.length);n++,this.lazyLoadIdx++){if("undefined"==typeof this.items[n])return;var i=this.items[n].elem,o=new Image;o.itemImageLoader=i.querySelector(".cbola-content-image-loader"),o.onload=function(){var e=this.itemImageLoader.querySelector(".cbola-content-item-picture"),t=this.itemImageLoader.querySelector(".cbola-loader");e&&(e.src=this.src,this.itemImageLoader.removeChild(t))},o.src=this.items[n].Image}},s.prototype.onOpenSlider=function(e){this.sliderOpenedAt=o.getRunTimeInSecs(),clearTimeout(this.teaserTimerId),this.toggled=!0,this.sliderElem.className="cbola-desktop-slider cbola-desktop-slider-active",this.bgTitleElem.style["transition-delay"]=null,this.bgTitleElem.style.opacity=0,this.bgCreditElem.style["transition-delay"]=null,this.bgCreditElem.style.opacity=0,e&&(n.SetPageElementView(this.elementId,Cbola.Enums.ItemViewTypes.ON_HOVER,Cbola.Enums.ItemViewTypes.NONE),this.setItemsViewability(!0,Cbola.Enums.ItemViewTypes.ON_HOVER),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[])},s.prototype.onCloseSlider=function(e){this.sliderDuration=o.getRunTimeInSecs()-this.sliderOpenedAt,clearTimeout(this.teaserTimerId),this.toggled=!1,this.sliderElem.className="cbola-desktop-slider",this.bgTitleElem.style["transition-delay"]="250ms",this.bgTitleElem.style.opacity=1,this.bgCreditElem.style["transition-delay"]="250ms",this.bgCreditElem.style.opacity=1,e&&(this.setItemsViewability(!1,Cbola.Enums.ItemViewTypes.ON_HOVER),n.SetPageElementView(this.elementId,Cbola.Enums.ItemViewTypes.NONE,Cbola.Enums.ItemViewTypes.ON_HOVER,this.sliderDuration),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[])},s.prototype.onNext=function(e){var t=e.currentTarget;t.removeEventListener("click",this.boundedOnNext),i.addItemsToHistory([this.items[this.currItemIdx].Id]);var o=Math.min(this.items.length-1,this.currItemIdx+1),r=this.items[this.currItemIdx].elem;this.currItemIdx!==o?(r.style.transform="translateX(-1100px)",this.setItemsViewability(!1,Cbola.Enums.ItemViewTypes.ON_NEXT_BTN),this.currItemIdx=o,r=this.items[this.currItemIdx].elem,r.style.transform="translateX(0)",this.setItemsViewability(!0,Cbola.Enums.ItemViewTypes.ON_NEXT_BTN),this.currItemIdx+3>this.items.length&&this.fetchMoreFromServer(),this.currItemIdx+2>this.lazyLoadIdx&&this.lazyLoadNextImages(2),this.updateProgressElem(this.currItemIdx%15),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[]):(r.style.transform="translateX(-20%)",setTimeout(function(){r.style.transform="translateX(0)"},600)),setTimeout(function(){t.addEventListener("click",this.boundedOnNext)}.bind(this),600)},s.prototype.updateProgressElem=function(e){this.progressElem.textContent=e+1+"/15"},s.prototype.fetchMoreFromServer=function(){t.getMoreItems(this.elementId,this.widgetId,function(e){this.addItems(e)}.bind(this))},s.prototype.onPrev=function(e){var t=e.currentTarget;t.removeEventListener("click",this.boundedOnPrev);var i=Math.max(0,this.currItemIdx-1),o=this.items[this.currItemIdx].elem;i!==this.currItemIdx?(o.style.transform="translateX(1100px)",this.setItemsViewability(!1,Cbola.Enums.ItemViewTypes.ON_PREV_BTN),this.currItemIdx=i,o=this.items[this.currItemIdx].elem,o.style.transform="translateX(0)",this.setItemsViewability(!0,Cbola.Enums.ItemViewTypes.ON_PREV_BTN),this.updateProgressElem(this.currItemIdx%15),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[]):(o.style.transform="translateX(20%)",setTimeout(function(){o.style.transform="translateX(0)"},400)),setTimeout(function(){t.addEventListener("click",this.boundedOnPrev)}.bind(this),600)},s.prototype.onResize=function(){var e=this.boxElem.clientWidth;e>=580?this.itemsBox.className="cbola-items-box cbola-items-box-large":e>=490?this.itemsBox.className="cbola-items-box cbola-items-box-medium":this.itemsBox.className="cbola-items-box cbola-items-box-small",this.options.RemoveInContentHeader&&(e>=560?this.poweredByLogo.classList.remove("cbola-hidden"):this.poweredByLogo.classList.add("cbola-hidden")),setTimeout(this.fixHeaderStyles.bind(this),100)},s.prototype.fixHeaderStyles=function(){if(!this.options.RemoveInContentHeader){var e=this.container.querySelector(".cbola-desktop-facts-header"),t=e.children[0],n=e.children[2],i=e.children[1],o=e.clientWidth-(n.clientWidth+t.clientWidth+6);i.style.width=o+"px"}},s.prototype.onAfterLoad=function(){Cbola.taskManager.addTask(this.updateViewability,[],this),this.options.teaser&&this.options.teaser.Triggers&&this.options.teaser.Triggers[0]===Cbola.Enums.teaserTriggerTypes.TIMEOUT&&this.setTeaser()},s.prototype.onBecameViewable=function(e){l.onBecameViewable.apply(this),this.becameViewableOnce||(this.setItemsViewability(!0,void 0,e),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[],this.becameViewableOnce=!0,this.options.teaser&&this.options.teaser.Triggers&&this.options.teaser.Triggers[0]===Cbola.Enums.teaserTriggerTypes.VIEWABILITY&&this.setTeaser())},s.prototype.setTeaser=function(){var e=this.options.teaser.Delay>0?this.options.teaser.Delay:0,t=this.options.teaser.Duration||10;1===this.options.teaser.TeaserType&&(this.teaserTimerId=setTimeout(function(){this.onOpenSlider(!1),this.teaserTimerId=setTimeout(this.onCloseSlider.bind(this),1e3*t,!1)}.bind(this),1e3*e))},s.prototype.onBecameUnviewable=function(){l.onBecameUnviewable.apply(this),this.becameUnviewableOnce||(this.setItemsViewability(!0,void 0,Cbola.Enums.ItemViewTypes.UNVIEWABILITY),n.SetItemsView(this.elementId,this.itemsToReport),this.itemsToReport=[],this.becameUnviewableOnce=!0)},s.prototype.setItemsViewability=function(e,t,n){var i=n?n:e?t:Cbola.Enums.ItemViewTypes.NONE,o=n?Cbola.Enums.ItemViewTypes.NONE:e?Cbola.Enums.ItemViewTypes.NONE:t,r=this.items[this.currItemIdx];r&&(r.setViewable(e),r.isViewable&&!n&&(t===Cbola.Enums.ItemViewTypes.ON_HOVER?r.setViewOrder(this.itemsViewOrder):r.setViewOrder(++this.itemsViewOrder)),r.setOpenType(i),r.setCloseType(o),r.setDisplayOrder(this.currItemIdx+1),this.itemsToReport.push(r))},s}();
//# sourceMappingURL=http://localhost:9000//maps/Carambola.min.js.map
